(function(){var a={};a.dev=false;a.tooltip=a.tooltip||{};a.utils=a.utils||{};a.models=a.models||{};a.charts={};a.logs={};a.dom={};a.dispatch=d3.dispatch("render_start","render_end");if(!Function.prototype.bind){Function.prototype.bind=function(c){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var g=Array.prototype.slice.call(arguments,1),f=this,d=function(){},e=function(){return f.apply(this instanceof d&&c?this:c,g.concat(Array.prototype.slice.call(arguments)))};d.prototype=this.prototype;e.prototype=new d();return e}}if(a.dev){a.dispatch.on("render_start",function(c){a.logs.startTime=+new Date()});a.dispatch.on("render_end",function(c){a.logs.endTime=+new Date();a.logs.totalTime=a.logs.endTime-a.logs.startTime;a.log("total",a.logs.totalTime)})}a.log=function(){if(a.dev&&window.console&&console.log&&console.log.apply){console.log.apply(console,arguments)}else{if(a.dev&&window.console&&typeof console.log=="function"&&Function.prototype.bind){var c=Function.prototype.bind.call(console.log,console);c.apply(console,arguments)}}return arguments[arguments.length-1]};a.deprecated=function(c,d){if(console&&console.warn){console.warn("nvd3 warning: `"+c+"` has been deprecated. ",d||"")}};a.render=function b(d){d=d||1;a.render.active=true;a.dispatch.render_start();var c=function(){var f,g;for(var e=0;e<d&&(g=a.render.queue[e]);e++){f=g.generate();if(typeof g.callback==typeof(Function)){g.callback(f)}}a.render.queue.splice(0,e);if(a.render.queue.length){setTimeout(c)}else{a.dispatch.render_end();a.render.active=false}};setTimeout(c)};a.render.active=false;a.render.queue=[];a.addGraph=function(c){if(typeof arguments[0]===typeof(Function)){c={generate:arguments[0],callback:arguments[1]}}a.render.queue.push(c);if(!a.render.active){a.render()}};if(typeof(module)!=="undefined"&&typeof(exports)!=="undefined"){module.exports=a}if(typeof(window)!=="undefined"){window.nv=a}a.dom.write=function(c){if(window.fastdom!==undefined){return fastdom.write(c)}return c()};a.dom.read=function(c){if(window.fastdom!==undefined){return fastdom.read(c)}return c()};a.interactiveGuideline=function(){var l=a.models.tooltip();l.duration(0).hideDelay(0)._isInteractiveLayer(true).hidden(false);var c=null;var k=null;var d={left:0,top:0},j=d3.scale.linear(),g=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick"),h=true;var f=null;var i="ActiveXObject" in window;function e(m){m.each(function(q){var n=d3.select(this);var p=(c||960),s=(k||400);var o=n.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([q]);var t=o.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer");t.append("g").attr("class","nv-interactiveGuideLine");if(!f){return}function r(){var x=d3.mouse(this);var w=x[0];var v=x[1];var y=true;var z=false;if(i){w=d3.event.offsetX;v=d3.event.offsetY;if(d3.event.target.tagName!=="svg"){y=false}if(d3.event.target.className.baseVal.match("nv-legend")){z=true}}if(y){w-=d.left;v-=d.top}if(w<0||v<0||w>p||v>s||(d3.event.relatedTarget&&d3.event.relatedTarget.ownerSVGElement===undefined)||z){if(i){if(d3.event.relatedTarget&&d3.event.relatedTarget.ownerSVGElement===undefined&&(d3.event.relatedTarget.className===undefined||d3.event.relatedTarget.className.match(l.nvPointerEventsClass))){return}}g.elementMouseout({mouseX:w,mouseY:v});e.renderGuideLine(null);l.hidden(true);return}else{l.hidden(false)}var u=j.invert(w);g.elementMousemove({mouseX:w,mouseY:v,pointXValue:u});if(d3.event.type==="dblclick"){g.elementDblclick({mouseX:w,mouseY:v,pointXValue:u})}if(d3.event.type==="click"){g.elementClick({mouseX:w,mouseY:v,pointXValue:u})}}f.on("touchmove",r).on("mousemove",r,true).on("mouseout",r,true).on("dblclick",r).on("click",r);e.guideLine=null;e.renderGuideLine=function(u){if(!h){return}if(e.guideLine&&e.guideLine.attr("x1")===u){return}a.dom.write(function(){var v=o.select(".nv-interactiveGuideLine").selectAll("line").data((u!=null)?[a.utils.NaNtoZero(u)]:[],String);v.enter().append("line").attr("class","nv-guideline").attr("x1",function(w){return w}).attr("x2",function(w){return w}).attr("y1",s).attr("y2",0);v.exit().remove()})}})}e.dispatch=g;e.tooltip=l;e.margin=function(m){if(!arguments.length){return d}d.top=typeof m.top!="undefined"?m.top:d.top;d.left=typeof m.left!="undefined"?m.left:d.left;return e};e.width=function(m){if(!arguments.length){return c}c=m;return e};e.height=function(m){if(!arguments.length){return k}k=m;return e};e.xScale=function(m){if(!arguments.length){return j}j=m;return e};e.showGuideLine=function(m){if(!arguments.length){return h}h=m;return e};e.svgContainer=function(m){if(!arguments.length){return f}f=m;return e};return e};a.interactiveBisect=function(k,h,d){if(!(k instanceof Array)){return null}var c;if(typeof d!=="function"){c=function(m){return m.x}}else{c=d}var l=function(n,m){return c(n)-m};var e=d3.bisector(l).left;var g=d3.max([0,e(k,h)-1]);var j=c(k[g]);if(typeof j==="undefined"){j=g}if(j===h){return g}var f=d3.min([g+1,k.length-1]);var i=c(k[f]);if(typeof i==="undefined"){i=f}if(Math.abs(i-h)>=Math.abs(j-h)){return g}else{return f}};a.nearestValueIndex=function(e,d,c){var g=Infinity,f=null;e.forEach(function(j,h){var k=Math.abs(d-j);if(j!=null&&k<=g&&k<c){g=k;f=h}});return f};(function(){a.models.tooltip=function(){var D=null;var j="w",h=25,v=0,f=null,A=null,y=null,z=true,s=400,i=null,r=null,C={left:null,top:null},l={left:0,top:0},p=true,e=100,B=true;var d=false;var u="nvtooltip-"+Math.floor(Math.random()*100000);var m="nv-pointer-events-none";var c=function(F,E){return F};var w=function(E){return E};var x=function(F,E){return F};var g=function(I){if(I===null){return""}var H=d3.select(document.createElement("table"));if(B){var E=H.selectAll("thead").data([I]).enter().append("thead");E.append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",true).html(w(I.value))}var J=H.selectAll("tbody").data([I]).enter().append("tbody");var F=J.selectAll("tr").data(function(K){return K.series}).enter().append("tr").classed("highlight",function(K){return K.highlight});F.append("td").classed("legend-color-guide",true).append("div").style("background-color",function(K){return K.color});F.append("td").classed("key",true).html(function(L,K){return x(L.key,K)});F.append("td").classed("value",true).html(function(L,K){return c(L.value,K)});F.selectAll("td").each(function(M){if(M.highlight){var L=d3.scale.linear().domain([0,1]).range(["#fff",M.color]);var K=0.6;d3.select(this).style("border-bottom-color",L(K)).style("border-top-color",L(K))}});var G=H.node().outerHTML;if(I.footer!==undefined){G+="<div class='footer'>"+I.footer+"</div>"}return G};var k=function(E){if(E&&E.series){if(E.series instanceof Array){return !!E.series.length}if(E.series instanceof Object){E.series=[E.series];return true}}return false};var q=function(E){if(!r){return}a.dom.read(function(){var V=parseInt(r.offsetHeight,10),G=parseInt(r.offsetWidth,10),I=a.utils.windowSize().width,F=a.utils.windowSize().height,H=window.pageYOffset,L=window.pageXOffset,J,R;F=window.innerWidth>=document.body.scrollWidth?F:F-16;I=window.innerHeight>=document.body.scrollHeight?I:I-16;var M=function(W){var X=R;do{if(!isNaN(W.offsetTop)){X+=(W.offsetTop)}W=W.offsetParent}while(W);return X};var U=function(W){var X=J;do{if(!isNaN(W.offsetLeft)){X+=(W.offsetLeft)}W=W.offsetParent}while(W);return X};var P,O;switch(j){case"e":J=E[0]-G-h;R=E[1]-(V/2);P=U(r);O=M(r);if(P<L){J=E[0]+h>L?E[0]+h:L-P+J}if(O<H){R=H-O+R}if(O+V>H+F){R=H+F-O+R-V}break;case"w":J=E[0]+h;R=E[1]-(V/2);P=U(r);O=M(r);if(P+G>I){J=E[0]-G-h}if(O<H){R=H+5}if(O+V>H+F){R=H+F-O+R-V}break;case"n":J=E[0]-(G/2)-5;R=E[1]+h;P=U(r);O=M(r);if(P<L){J=L+5}if(P+G>I){J=J-G/2+5}if(O+V>H+F){R=H+F-O+R-V}break;case"s":J=E[0]-(G/2);R=E[1]-V-h;P=U(r);O=M(r);if(P<L){J=L+5}if(P+G>I){J=J-G/2+5}if(H>O){R=H}break;case"none":J=E[0];R=E[1]-h;P=U(r);O=M(r);break}J-=l.left;R-=l.top;var N=r.getBoundingClientRect();var H=window.pageYOffset||document.documentElement.scrollTop;var L=window.pageXOffset||document.documentElement.scrollLeft;var T="translate("+(N.left+L)+"px, "+(N.top+H)+"px)";var K="translate("+J+"px, "+R+"px)";var Q=d3.interpolateString(T,K);var S=i.style("opacity")<0.1;if(z){i.transition().delay(s).duration(0).style("opacity",0)}else{i.interrupt().transition().duration(S?0:e).styleTween("transform",function(W){return Q},"important").style("-webkit-transform",K).style("opacity",1)}})};function o(){if(y){var E=d3.select(y);if(E.node().tagName!=="svg"){E=E.select("svg")}var G=(E.node())?E.attr("viewBox"):null;if(G){G=G.split(" ");var F=parseInt(E.style("width"),10)/G[2];C.left=C.left*F;C.top=C.top*F}}}function n(){if(!i){var E;if(y){E=y}else{E=document.body}i=d3.select(E).append("div").attr("class","nvtooltip "+(A?A:"xy-tooltip")).attr("id",u);i.style("top",0).style("left",0);i.style("opacity",0);i.selectAll("div, table, td, tr").classed(m,true);i.classed(m,true);r=i.node()}}function t(){if(!p){return}if(!k(D)){return}o();var F=C.left;var E=(f!==null)?f:C.top;a.dom.write(function(){n();var G=g(D);if(G){r.innerHTML=G}if(y&&d){a.dom.read(function(){var J=y.getElementsByTagName("svg")[0];var M={left:0,top:0};if(J){var I=J.getBoundingClientRect();var K=y.getBoundingClientRect();var H=I.top;if(H<0){var L=y.getBoundingClientRect();H=(Math.abs(H)>L.height)?0:H}M.top=Math.abs(H-K.top);M.left=Math.abs(I.left-K.left)}F+=y.offsetLeft+M.left-2*y.scrollLeft;E+=y.offsetTop+M.top-2*y.scrollTop;if(v&&v>0){E=Math.floor(E/v)*v}q([F,E])})}else{q([F,E])}});return t}t.nvPointerEventsClass=m;t.options=a.utils.optionsFunc.bind(t);t._options=Object.create({},{duration:{get:function(){return e},set:function(E){e=E}},gravity:{get:function(){return j},set:function(E){j=E}},distance:{get:function(){return h},set:function(E){h=E}},snapDistance:{get:function(){return v},set:function(E){v=E}},classes:{get:function(){return A},set:function(E){A=E}},chartContainer:{get:function(){return y},set:function(E){y=E}},fixedTop:{get:function(){return f},set:function(E){f=E}},enabled:{get:function(){return p},set:function(E){p=E}},hideDelay:{get:function(){return s},set:function(E){s=E}},contentGenerator:{get:function(){return g},set:function(E){g=E}},valueFormatter:{get:function(){return c},set:function(E){c=E}},headerFormatter:{get:function(){return w},set:function(E){w=E}},keyFormatter:{get:function(){return x},set:function(E){x=E}},headerEnabled:{get:function(){return B},set:function(E){B=E}},_isInteractiveLayer:{get:function(){return d},set:function(E){d=!!E}},position:{get:function(){return C},set:function(E){C.left=E.left!==undefined?E.left:C.left;C.top=E.top!==undefined?E.top:C.top}},offset:{get:function(){return l},set:function(E){l.left=E.left!==undefined?E.left:l.left;l.top=E.top!==undefined?E.top:l.top}},hidden:{get:function(){return z},set:function(E){if(z!=E){z=!!E;t()}}},data:{get:function(){return D},set:function(E){if(E.point){E.value=E.point.x;E.series=E.series||{};E.series.value=E.point.y;E.series.color=E.point.color||E.series.color}D=E}},tooltipElem:{get:function(){return r},set:function(E){}},id:{get:function(){return u},set:function(E){}}});a.utils.initOptions(t);return t}})();a.utils.windowSize=function(){var c={width:640,height:480};if(window.innerWidth&&window.innerHeight){c.width=window.innerWidth;c.height=window.innerHeight;return(c)}if(document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth){c.width=document.documentElement.offsetWidth;c.height=document.documentElement.offsetHeight;return(c)}if(document.body&&document.body.offsetWidth){c.width=document.body.offsetWidth;c.height=document.body.offsetHeight;return(c)}return(c)};a.utils.windowResize=function(c){if(window.addEventListener){window.addEventListener("resize",c)}else{a.log("ERROR: Failed to bind to window.resize with: ",c)}return{callback:c,clear:function(){window.removeEventListener("resize",c)}}};a.utils.getColor=function(c){if(c===undefined){return a.utils.defaultColor()}else{if(Array.isArray(c)){var d=d3.scale.ordinal().range(c);return function(g,f){var e=f===undefined?g:f;return g.color||d(e)}}else{return c}}};a.utils.defaultColor=function(){return a.utils.getColor(d3.scale.category20().range())};a.utils.customTheme=function(f,d,e){d=d||function(g){return g.key};e=e||d3.scale.category20().range();var c=e.length;return function(i,g){var h=d(i);if(typeof f[h]==="function"){return f[h]()}else{if(f[h]!==undefined){return f[h]}else{if(!c){c=e.length}c=c-1;return e[c]}}}};a.utils.pjax=function(c,d){var e=function(f){d3.html(f,function(g){var h=d3.select(d).node();h.parentNode.replaceChild(d3.select(g).select(d).node(),h);a.utils.pjax(c,d)})};d3.selectAll(c).on("click",function(){history.pushState(this.href,this.textContent,this.href);e(this.href);d3.event.preventDefault()});d3.select(window).on("popstate",function(){if(d3.event.state){e(d3.event.state)}})};a.utils.calcApproxTextWidth=function(c){if(typeof c.style==="function"&&typeof c.text==="function"){var e=parseInt(c.style("font-size").replace("px",""),10);var d=c.text().length;return d*e*0.5}return 0};a.utils.NaNtoZero=function(c){if(typeof c!=="number"||isNaN(c)||c===null||c===Infinity||c===-Infinity){return 0}return c};d3.selection.prototype.watchTransition=function(d){var c=[this].concat([].slice.call(arguments,1));return d.transition.apply(d,c)};a.utils.renderWatch=function(e,f){if(!(this instanceof a.utils.renderWatch)){return new a.utils.renderWatch(e,f)}var g=f!==undefined?f:250;var c=[];var d=this;this.models=function(h){h=[].slice.call(arguments,0);h.forEach(function(i){i.__rendered=false;(function(j){j.dispatch.on("renderEnd",function(k){j.__rendered=true;d.renderEnd("model")})})(i);if(c.indexOf(i)<0){c.push(i)}});return this};this.reset=function(h){if(h!==undefined){g=h}c=[]};this.transition=function(i,h,j){h=arguments.length>1?[].slice.call(arguments,1):[];if(h.length>1){j=h.pop()}else{j=g!==undefined?g:250}i.__rendered=false;if(c.indexOf(i)<0){c.push(i)}if(j===0){i.__rendered=true;i.delay=function(){return this};i.duration=function(){return this};return i}else{if(i.length===0){i.__rendered=true}else{if(i.every(function(l){return !l.length})){i.__rendered=true}else{i.__rendered=false}}var k=0;return i.transition().duration(j).each(function(){++k}).each("end",function(m,l){if(--k===0){i.__rendered=true;d.renderEnd.apply(this,h)}})}};this.renderEnd=function(){if(c.every(function(h){return h.__rendered})){c.forEach(function(h){h.__rendered=false});e.renderEnd.apply(this,arguments)}}};a.utils.deepExtend=function(d){var c=arguments.length>1?[].slice.call(arguments,1):[];c.forEach(function(i){for(var h in i){var f=d[h] instanceof Array;var e=typeof d[h]==="object";var g=typeof i[h]==="object";if(e&&!f&&g){a.utils.deepExtend(d[h],i[h])}else{d[h]=i[h]}}})};a.utils.state=function(){if(!(this instanceof a.utils.state)){return new a.utils.state()}var f={};var d=this;var i=function(){};var e=function(){return{}};var h=null;var g=null;this.dispatch=d3.dispatch("change","set");this.dispatch.on("set",function(j){i(j,true)});this.getter=function(j){e=j;return this};this.setter=function(j,k){if(!k){k=function(){}}i=function(l,m){j(l);if(m){k()}};return this};this.init=function(j){h=h||{};a.utils.deepExtend(h,j)};var c=function(){var k=e();if(JSON.stringify(k)===JSON.stringify(f)){return false}for(var j in k){if(f[j]===undefined){f[j]={}}f[j]=k[j];g=true}return true};this.update=function(){if(h){i(h,false);h=null}if(c.call(this)){this.dispatch.change(f)}}};a.utils.optionsFunc=function(c){if(c){d3.map(c).forEach((function(d,e){if(typeof this[d]==="function"){this[d](e)}}).bind(this))}return this};a.utils.calcTicksX=function(g,f){var c=1;var e=0;for(e;e<f.length;e+=1){var d=f[e]&&f[e].values?f[e].values.length:0;c=d>c?d:c}a.log("Requested number of ticks: ",g);a.log("Calculated max values to be: ",c);g=g>c?g=c-1:g;g=g<1?1:g;g=Math.floor(g);a.log("Calculating tick count as: ",g);return g};a.utils.calcTicksY=function(d,c){return a.utils.calcTicksX(d,c)};a.utils.initOption=function(d,c){if(d._calls&&d._calls[c]){d[c]=d._calls[c]}else{d[c]=function(e){if(!arguments.length){return d._options[c]}d._overrides[c]=true;d._options[c]=e;return d};d["_"+c]=function(e){if(!arguments.length){return d._options[c]}if(!d._overrides[c]){d._options[c]=e}return d}}};a.utils.initOptions=function(f){f._overrides=f._overrides||{};var e=Object.getOwnPropertyNames(f._options||{});var d=Object.getOwnPropertyNames(f._calls||{});e=e.concat(d);for(var c in e){a.utils.initOption(f,e[c])}};a.utils.inheritOptionsD3=function(d,c,e){d._d3options=e.concat(d._d3options||[]);e.unshift(c);e.unshift(d);d3.rebind.apply(this,e)};a.utils.arrayUnique=function(c){return c.sort().filter(function(d,e){return !e||d!=c[e-1]})};a.utils.symbolMap=d3.map();a.utils.symbol=function(){var d,c=64;function e(j,g){var f=d.call(this,j,g);var h=c.call(this,j,g);if(d3.svg.symbolTypes.indexOf(f)!==-1){return d3.svg.symbol().type(f).size(h)()}else{return a.utils.symbolMap.get(f)(h)}}e.type=function(f){if(!arguments.length){return d}d=d3.functor(f);return e};e.size=function(f){if(!arguments.length){return c}c=d3.functor(f);return e};return e};a.utils.inheritOptions=function(i,h){var g=Object.getOwnPropertyNames(h._options||{});var f=Object.getOwnPropertyNames(h._calls||{});var c=h._inherited||[];var d=h._d3options||[];var e=g.concat(f).concat(c).concat(d);e.unshift(h);e.unshift(i);d3.rebind.apply(this,e);i._inherited=a.utils.arrayUnique(g.concat(f).concat(c).concat(g).concat(i._inherited||[]));i._d3options=a.utils.arrayUnique(d.concat(i._d3options||[]))};a.utils.initSVG=function(c){c.classed({"nvd3-svg":true})};a.utils.sanitizeHeight=function(c,d){return(c||parseInt(d.style("height"),10)||400)};a.utils.sanitizeWidth=function(d,c){return(d||parseInt(c.style("width"),10)||960)};a.utils.availableHeight=function(c,d,e){return a.utils.sanitizeHeight(c,d)-e.top-e.bottom};a.utils.availableWidth=function(d,c,e){return a.utils.sanitizeWidth(d,c)-e.left-e.right};a.utils.noData=function(i,d){var f=i.options(),g=f.margin(),l=f.noData(),h=(l==null)?["No Data Available."]:[l],m=a.utils.availableHeight(f.height(),d,g),e=a.utils.availableWidth(f.width(),d,g),k=g.left+e/2,j=g.top+m/2;d.selectAll("g").remove();var c=d.selectAll(".nv-noData").data(h);c.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");c.attr("x",k).attr("y",j).text(function(n){return n})};a.models.axis=function(){var e=d3.svg.axis();var t=d3.scale.linear();var k={top:0,right:0,bottom:0,left:0},m=75,l=60,h=null,p=true,f=0,q=true,d=false,n=false,r=null,i=0,c=250,s=d3.dispatch("renderEnd");e.scale(t).orient("bottom").tickFormat(function(u){return u});var o;var g=a.utils.renderWatch(s,c);function j(u){g.reset();u.each(function(G){var x=d3.select(this);a.utils.initSVG(x);var z=x.selectAll("g.nv-wrap.nv-axis").data([G]);var C=z.enter().append("g").attr("class","nvd3 nv-wrap nv-axis");var v=C.append("g");var I=z.select("g");if(r!==null){e.ticks(r)}else{if(e.orient()=="top"||e.orient()=="bottom"){e.ticks(Math.abs(t.range()[1]-t.range()[0])/100)}}I.watchTransition(g,"axis").call(e);o=o||e.scale();var B=e.tickFormat();if(B==null){B=o.tickFormat()}var A=I.selectAll("text.nv-axislabel").data([h||null]);A.exit().remove();var F;var H;var M;switch(e.orient()){case"top":A.enter().append("text").attr("class","nv-axislabel");if(t.range().length<2){M=0}else{if(t.range().length===2){M=t.range()[1]}else{M=t.range()[t.range().length-1]+(t.range()[1]-t.range()[0])}}A.attr("text-anchor","middle").attr("y",0).attr("x",M/2);if(p){H=z.selectAll("g.nv-axisMaxMin").data(t.domain());H.enter().append("g").attr("class",function(N,w){return["nv-axisMaxMin","nv-axisMaxMin-x",(w==0?"nv-axisMin-x":"nv-axisMax-x")].join(" ")}).append("text");H.exit().remove();H.attr("transform",function(N,w){return"translate("+a.utils.NaNtoZero(t(N))+",0)"}).select("text").attr("dy","-0.5em").attr("y",-e.tickPadding()).attr("text-anchor","middle").text(function(O,N){var w=B(O);return(""+w).match("NaN")?"":w});H.watchTransition(g,"min-max top").attr("transform",function(N,w){return"translate("+a.utils.NaNtoZero(t.range()[w])+",0)"})}break;case"bottom":F=i+36;var y=30;var K=0;var D=I.selectAll("g").select("text");var L="";if(f%360){D.each(function(P,w){var O=this.getBoundingClientRect();var N=O.width;K=O.height;if(N>y){y=N}});L="rotate("+f+" 0,"+(K/2+e.tickPadding())+")";var J=Math.abs(Math.sin(f*Math.PI/180));F=(J?J*y:y)+30;D.attr("transform",L).style("text-anchor",f%360>0?"start":"end")}A.enter().append("text").attr("class","nv-axislabel");if(t.range().length<2){M=0}else{if(t.range().length===2){M=t.range()[1]}else{M=t.range()[t.range().length-1]+(t.range()[1]-t.range()[0])}}A.attr("text-anchor","middle").attr("y",F).attr("x",M/2);if(p){H=z.selectAll("g.nv-axisMaxMin").data([t.domain()[0],t.domain()[t.domain().length-1]]);H.enter().append("g").attr("class",function(N,w){return["nv-axisMaxMin","nv-axisMaxMin-x",(w==0?"nv-axisMin-x":"nv-axisMax-x")].join(" ")}).append("text");H.exit().remove();H.attr("transform",function(N,w){return"translate("+a.utils.NaNtoZero((t(N)+(n?t.rangeBand()/2:0)))+",0)"}).select("text").attr("dy",".71em").attr("y",e.tickPadding()).attr("transform",L).style("text-anchor",f?(f%360>0?"start":"end"):"middle").text(function(O,N){var w=B(O);return(""+w).match("NaN")?"":w});H.watchTransition(g,"min-max bottom").attr("transform",function(N,w){return"translate("+a.utils.NaNtoZero((t(N)+(n?t.rangeBand()/2:0)))+",0)"})}if(d){D.attr("transform",function(N,w){return"translate(0,"+(w%2==0?"0":"12")+")"})}break;case"right":A.enter().append("text").attr("class","nv-axislabel");A.style("text-anchor",q?"middle":"begin").attr("transform",q?"rotate(90)":"").attr("y",q?(-Math.max(k.right,m)+12):-10).attr("x",q?(d3.max(t.range())/2):e.tickPadding());if(p){H=z.selectAll("g.nv-axisMaxMin").data(t.domain());H.enter().append("g").attr("class",function(N,w){return["nv-axisMaxMin","nv-axisMaxMin-y",(w==0?"nv-axisMin-y":"nv-axisMax-y")].join(" ")}).append("text").style("opacity",0);H.exit().remove();H.attr("transform",function(N,w){return"translate(0,"+a.utils.NaNtoZero(t(N))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",e.tickPadding()).style("text-anchor","start").text(function(O,N){var w=B(O);return(""+w).match("NaN")?"":w});H.watchTransition(g,"min-max right").attr("transform",function(N,w){return"translate(0,"+a.utils.NaNtoZero(t.range()[w])+")"}).select("text").style("opacity",1)}break;case"left":A.enter().append("text").attr("class","nv-axislabel");A.style("text-anchor",q?"middle":"end").attr("transform",q?"rotate(-90)":"").attr("y",q?(-Math.max(k.left,m)+25-(i||0)):-10).attr("x",q?(-d3.max(t.range())/2):-e.tickPadding());if(p){H=z.selectAll("g.nv-axisMaxMin").data(t.domain());H.enter().append("g").attr("class",function(N,w){return["nv-axisMaxMin","nv-axisMaxMin-y",(w==0?"nv-axisMin-y":"nv-axisMax-y")].join(" ")}).append("text").style("opacity",0);H.exit().remove();H.attr("transform",function(N,w){return"translate(0,"+a.utils.NaNtoZero(o(N))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-e.tickPadding()).attr("text-anchor","end").text(function(O,N){var w=B(O);return(""+w).match("NaN")?"":w});H.watchTransition(g,"min-max right").attr("transform",function(N,w){return"translate(0,"+a.utils.NaNtoZero(t.range()[w])+")"}).select("text").style("opacity",1)}break}A.text(function(w){return w});if(p&&(e.orient()==="left"||e.orient()==="right")){I.selectAll("g").each(function(N,w){d3.select(this).select("text").attr("opacity",1);if(t(N)<t.range()[1]+10||t(N)>t.range()[0]-10){if(N>1e-10||N<-1e-10){d3.select(this).attr("opacity",0)}d3.select(this).select("text").attr("opacity",0)}});if(t.domain()[0]==t.domain()[1]&&t.domain()[0]==0){z.selectAll("g.nv-axisMaxMin").style("opacity",function(N,w){return !w?1:0})}}if(p&&(e.orient()==="top"||e.orient()==="bottom")){var E=[];z.selectAll("g.nv-axisMaxMin").each(function(O,w){try{if(w){E.push(t(O)-this.getBoundingClientRect().width-4)}else{E.push(t(O)+this.getBoundingClientRect().width+4)}}catch(N){if(w){E.push(t(O)-4)}else{E.push(t(O)+4)}}});I.selectAll("g").each(function(N,w){if(t(N)<E[0]||t(N)>E[1]){if(N>1e-10||N<-1e-10){d3.select(this).remove()}else{d3.select(this).select("text").remove()}}})}I.selectAll(".tick").filter(function(w){return !parseFloat(Math.round(w*100000)/1000000)&&(w!==undefined)}).classed("zero",true);o=t.copy()});g.renderEnd("axis immediate");return j}j.axis=e;j.dispatch=s;j.options=a.utils.optionsFunc.bind(j);j._options=Object.create({},{axisLabelDistance:{get:function(){return i},set:function(u){i=u}},staggerLabels:{get:function(){return d},set:function(u){d=u}},rotateLabels:{get:function(){return f},set:function(u){f=u}},rotateYLabel:{get:function(){return q},set:function(u){q=u}},showMaxMin:{get:function(){return p},set:function(u){p=u}},axisLabel:{get:function(){return h},set:function(u){h=u}},height:{get:function(){return l},set:function(u){l=u}},ticks:{get:function(){return r},set:function(u){r=u}},width:{get:function(){return m},set:function(u){m=u}},margin:{get:function(){return k},set:function(u){k.top=u.top!==undefined?u.top:k.top;k.right=u.right!==undefined?u.right:k.right;k.bottom=u.bottom!==undefined?u.bottom:k.bottom;k.left=u.left!==undefined?u.left:k.left}},duration:{get:function(){return c},set:function(u){c=u;g.reset(c)}},scale:{get:function(){return t},set:function(u){t=u;e.scale(t);n=typeof t.rangeBands==="function";a.utils.inheritOptionsD3(j,t,["domain","range","rangeBand","rangeBands"])}}});a.utils.initOptions(j);a.utils.inheritOptionsD3(j,e,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]);a.utils.inheritOptionsD3(j,t,["domain","range","rangeBand","rangeBands"]);return j};a.models.boxPlot=function(){var k={top:0,right:0,bottom:0,left:0},o=960,m=500,n=Math.floor(Math.random()*10000),h=d3.scale.ordinal(),g=d3.scale.linear(),v=function(x){return x.x},t=function(x){return x.y},s=a.utils.defaultColor(),i=null,q,p,l,r,w=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),c=250,f=null;var u,d;var e=a.utils.renderWatch(w,c);function j(x){e.reset();x.each(function(E){var K=o-k.left-k.right,z=m-k.top-k.bottom;i=d3.select(this);a.utils.initSVG(i);h.domain(q||E.map(function(N,M){return v(N,M)})).rangeBands(l||[0,K],0.1);var B=[];if(!p){var J=d3.min(E.map(function(N){var M=[];M.push(N.values.Q1);if(N.values.hasOwnProperty("whisker_low")&&N.values.whisker_low!==null){M.push(N.values.whisker_low)}if(N.values.hasOwnProperty("outliers")&&N.values.outliers!==null){M=M.concat(N.values.outliers)}return d3.min(M)}));var A=d3.max(E.map(function(M){var N=[];N.push(M.values.Q3);if(M.values.hasOwnProperty("whisker_high")&&M.values.whisker_high!==null){N.push(M.values.whisker_high)}if(M.values.hasOwnProperty("outliers")&&M.values.outliers!==null){N=N.concat(M.values.outliers)}return d3.max(N)}));B=[J,A]}g.domain(p||B);g.range(r||[z,0]);u=u||h;d=d||g.copy().range([g(0),g(0)]);var y=i.selectAll("g.nv-wrap").data([E]);var C=y.enter().append("g").attr("class","nvd3 nv-wrap");y.attr("transform","translate("+k.left+","+k.top+")");var D=y.selectAll(".nv-boxplot").data(function(M){return M});var L=D.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001);D.attr("class","nv-boxplot").attr("transform",function(O,N,M){return"translate("+(h(v(O,N))+h.rangeBand()*0.05)+", 0)"}).classed("hover",function(M){return M.hover});D.watchTransition(e,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",0.75).delay(function(N,M){return M*c/E.length}).attr("transform",function(N,M){return"translate("+(h(v(N,M))+h.rangeBand()*0.05)+", 0)"});D.exit().remove();L.each(function(O,M){var N=d3.select(this);["low","high"].forEach(function(P){if(O.values.hasOwnProperty("whisker_"+P)&&O.values["whisker_"+P]!==null){N.append("line").style("stroke",(O.color)?O.color:s(O,M)).attr("class","nv-boxplot-whisker nv-boxplot-"+P);N.append("line").style("stroke",(O.color)?O.color:s(O,M)).attr("class","nv-boxplot-tick nv-boxplot-"+P)}})});var H=D.selectAll(".nv-boxplot-outlier").data(function(M){if(M.values.hasOwnProperty("outliers")&&M.values.outliers!==null){return M.values.outliers}else{return[]}});H.enter().append("circle").style("fill",function(O,N,M){return s(O,M)}).style("stroke",function(O,N,M){return s(O,M)}).on("mouseover",function(O,N,M){d3.select(this).classed("hover",true);w.elementMouseover({series:{key:O,color:s(O,M)},e:d3.event})}).on("mouseout",function(O,N,M){d3.select(this).classed("hover",false);w.elementMouseout({series:{key:O,color:s(O,M)},e:d3.event})}).on("mousemove",function(N,M){w.elementMousemove({e:d3.event})});H.attr("class","nv-boxplot-outlier");H.watchTransition(e,"nv-boxplot: nv-boxplot-outlier").attr("cx",h.rangeBand()*0.45).attr("cy",function(O,N,M){return g(O)}).attr("r","3");H.exit().remove();var I=function(){return(f===null?h.rangeBand()*0.9:Math.min(75,h.rangeBand()*0.9))};var G=function(){return h.rangeBand()*0.45-I()/2};var F=function(){return h.rangeBand()*0.45+I()/2};["low","high"].forEach(function(M){var N=(M==="low")?"Q1":"Q3";D.select("line.nv-boxplot-whisker.nv-boxplot-"+M).watchTransition(e,"nv-boxplot: boxplots").attr("x1",h.rangeBand()*0.45).attr("y1",function(P,O){return g(P.values["whisker_"+M])}).attr("x2",h.rangeBand()*0.45).attr("y2",function(P,O){return g(P.values[N])});D.select("line.nv-boxplot-tick.nv-boxplot-"+M).watchTransition(e,"nv-boxplot: boxplots").attr("x1",G).attr("y1",function(P,O){return g(P.values["whisker_"+M])}).attr("x2",F).attr("y2",function(P,O){return g(P.values["whisker_"+M])})});["low","high"].forEach(function(M){L.selectAll(".nv-boxplot-"+M).on("mouseover",function(P,O,N){d3.select(this).classed("hover",true);w.elementMouseover({series:{key:P.values["whisker_"+M],color:s(P,N)},e:d3.event})}).on("mouseout",function(P,O,N){d3.select(this).classed("hover",false);w.elementMouseout({series:{key:P.values["whisker_"+M],color:s(P,N)},e:d3.event})}).on("mousemove",function(O,N){w.elementMousemove({e:d3.event})})});L.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(N,M){d3.select(this).classed("hover",true);w.elementMouseover({key:N.label,value:N.label,series:[{key:"Q3",value:N.values.Q3,color:N.color||s(N,M)},{key:"Q2",value:N.values.Q2,color:N.color||s(N,M)},{key:"Q1",value:N.values.Q1,color:N.color||s(N,M)}],data:N,index:M,e:d3.event})}).on("mouseout",function(N,M){d3.select(this).classed("hover",false);w.elementMouseout({key:N.label,value:N.label,series:[{key:"Q3",value:N.values.Q3,color:N.color||s(N,M)},{key:"Q2",value:N.values.Q2,color:N.color||s(N,M)},{key:"Q1",value:N.values.Q1,color:N.color||s(N,M)}],data:N,index:M,e:d3.event})}).on("mousemove",function(N,M){w.elementMousemove({e:d3.event})});D.select("rect.nv-boxplot-box").watchTransition(e,"nv-boxplot: boxes").attr("y",function(N,M){return g(N.values.Q3)}).attr("width",I).attr("x",G).attr("height",function(N,M){return Math.abs(g(N.values.Q3)-g(N.values.Q1))||1}).style("fill",function(N,M){return N.color||s(N,M)}).style("stroke",function(N,M){return N.color||s(N,M)});L.append("line").attr("class","nv-boxplot-median");D.select("line.nv-boxplot-median").watchTransition(e,"nv-boxplot: boxplots line").attr("x1",G).attr("y1",function(N,M){return g(N.values.Q2)}).attr("x2",F).attr("y2",function(N,M){return g(N.values.Q2)});u=h.copy();d=g.copy()});e.renderEnd("nv-boxplot immediate");return j}j.dispatch=w;j.options=a.utils.optionsFunc.bind(j);j._options=Object.create({},{width:{get:function(){return o},set:function(x){o=x}},height:{get:function(){return m},set:function(x){m=x}},maxBoxWidth:{get:function(){return f},set:function(x){f=x}},x:{get:function(){return v},set:function(x){v=x}},y:{get:function(){return t},set:function(x){t=x}},xScale:{get:function(){return h},set:function(x){h=x}},yScale:{get:function(){return g},set:function(x){g=x}},xDomain:{get:function(){return q},set:function(x){q=x}},yDomain:{get:function(){return p},set:function(x){p=x}},xRange:{get:function(){return l},set:function(x){l=x}},yRange:{get:function(){return r},set:function(x){r=x}},id:{get:function(){return n},set:function(x){n=x}},margin:{get:function(){return k},set:function(x){k.top=x.top!==undefined?x.top:k.top;k.right=x.right!==undefined?x.right:k.right;k.bottom=x.bottom!==undefined?x.bottom:k.bottom;k.left=x.left!==undefined?x.left:k.left}},color:{get:function(){return s},set:function(x){s=a.utils.getColor(x)}},duration:{get:function(){return c},set:function(x){c=x;e.reset(c)}}});a.utils.initOptions(j);return j};a.models.boxPlotChart=function(){var n=a.models.boxPlot(),j=a.models.axis(),d=a.models.axis();var p={top:15,right:10,bottom:50,left:60},r=null,q=null,s=a.utils.getColor(),t=true,m=true,i=false,e=false,g=a.models.tooltip(),l,k,f="No Data Available.",u=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate","renderEnd"),c=250;j.orient("bottom").showMaxMin(false).tickFormat(function(v){return v});d.orient((i)?"right":"left").tickFormat(d3.format(",.1f"));g.duration(0);var h=a.utils.renderWatch(u,c);function o(v){h.reset();h.models(n);if(t){h.models(j)}if(m){h.models(d)}v.each(function(D){var x=d3.select(this),G=this;a.utils.initSVG(x);var H=(r||parseInt(x.style("width"))||960)-p.left-p.right,B=(q||parseInt(x.style("height"))||400)-p.top-p.bottom;o.update=function(){u.beforeUpdate();x.transition().duration(c).call(o)};o.container=this;if(!D||!D.length||!D.filter(function(I){return I.values.hasOwnProperty("Q1")&&I.values.hasOwnProperty("Q2")&&I.values.hasOwnProperty("Q3")}).length){var y=x.selectAll(".nv-noData").data([f]);y.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");y.attr("x",p.left+H/2).attr("y",p.top+B/2).text(function(I){return I});return o}else{x.selectAll(".nv-noData").remove()}l=n.xScale();k=n.yScale().clamp(true);var z=x.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([D]);var w=z.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g");var A=w.append("defs");var E=z.select("g");w.append("g").attr("class","nv-x nv-axis");w.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");w.append("g").attr("class","nv-barsWrap");E.attr("transform","translate("+p.left+","+p.top+")");if(i){E.select(".nv-y.nv-axis").attr("transform","translate("+H+",0)")}n.width(H).height(B);var F=E.select(".nv-barsWrap").datum(D.filter(function(I){return !I.disabled}));F.transition().call(n);A.append("clipPath").attr("id","nv-x-label-clip-"+n.id()).append("rect");E.select("#nv-x-label-clip-"+n.id()+" rect").attr("width",l.rangeBand()*(e?2:1)).attr("height",16).attr("x",-l.rangeBand()/(e?1:2));if(t){j.scale(l).ticks(a.utils.calcTicksX(H/100,D)).tickSize(-B,0);E.select(".nv-x.nv-axis").attr("transform","translate(0,"+k.range()[0]+")");E.select(".nv-x.nv-axis").call(j);var C=E.select(".nv-x.nv-axis").selectAll("g");if(e){C.selectAll("text").attr("transform",function(K,J,I){return"translate(0,"+(I%2==0?"5":"17")+")"})}}if(m){d.scale(k).ticks(Math.floor(B/36)).tickSize(-H,0);E.select(".nv-y.nv-axis").call(d)}E.select(".nv-zeroLine line").attr("x1",0).attr("x2",H).attr("y1",k(0)).attr("y2",k(0))});h.renderEnd("nv-boxplot chart immediate");return o}n.dispatch.on("elementMouseover.tooltip",function(v){g.data(v).hidden(false)});n.dispatch.on("elementMouseout.tooltip",function(v){g.data(v).hidden(true)});n.dispatch.on("elementMousemove.tooltip",function(v){g.position({top:d3.event.pageY,left:d3.event.pageX})()});o.dispatch=u;o.boxplot=n;o.xAxis=j;o.yAxis=d;o.tooltip=g;o.options=a.utils.optionsFunc.bind(o);o._options=Object.create({},{width:{get:function(){return r},set:function(v){r=v}},height:{get:function(){return q},set:function(v){q=v}},staggerLabels:{get:function(){return e},set:function(v){e=v}},showXAxis:{get:function(){return t},set:function(v){t=v}},showYAxis:{get:function(){return m},set:function(v){m=v}},tooltips:{get:function(){return tooltips},set:function(v){tooltips=v}},tooltipContent:{get:function(){return g},set:function(v){g=v}},noData:{get:function(){return f},set:function(v){f=v}},margin:{get:function(){return p},set:function(v){p.top=v.top!==undefined?v.top:p.top;p.right=v.right!==undefined?v.right:p.right;p.bottom=v.bottom!==undefined?v.bottom:p.bottom;p.left=v.left!==undefined?v.left:p.left}},duration:{get:function(){return c},set:function(v){c=v;h.reset(c);n.duration(c);j.duration(c);d.duration(c)}},color:{get:function(){return s},set:function(v){s=a.utils.getColor(v);n.color(s)}},rightAlignYAxis:{get:function(){return i},set:function(v){i=v;d.orient((v)?"right":"left")}}});a.utils.inheritOptions(o,n);a.utils.initOptions(o);return o};a.models.bullet=function(){var j={top:0,right:0,bottom:0,left:0},l="left",p=false,e=function(t){return t.ranges},k=function(t){return t.markers?t.markers:[0]},d=function(t){return t.measures},n=function(t){return t.rangeLabels?t.rangeLabels:[]},r=function(t){return t.markerLabels?t.markerLabels:[]},g=function(t){return t.measureLabels?t.measureLabels:[]},m=[0],f=380,s=30,c=null,h=null,i=a.utils.getColor(["#1f77b4"]),o=d3.dispatch("elementMouseover","elementMouseout","elementMousemove");function q(t){t.each(function(R,M){var u=f-j.left-j.right,v=s-j.top-j.bottom;c=d3.select(this);a.utils.initSVG(c);var S=e.call(this,R,M).slice().sort(d3.descending),K=k.call(this,R,M).slice().sort(d3.descending),I=d.call(this,R,M).slice().sort(d3.descending),J=n.call(this,R,M).slice(),z=r.call(this,R,M).slice(),P=g.call(this,R,M).slice();var O=d3.scale.linear().domain(d3.extent(d3.merge([m,S]))).range(p?[u,0]:[0,u]);var Q=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(O.range());this.__chart__=O;var y=d3.min(S),B=d3.max(S),x=S[1];var D=c.selectAll("g.nv-wrap.nv-bullet").data([R]);var A=D.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet");var L=A.append("g");var N=D.select("g");L.append("rect").attr("class","nv-range nv-rangeMax");L.append("rect").attr("class","nv-range nv-rangeAvg");L.append("rect").attr("class","nv-range nv-rangeMin");L.append("rect").attr("class","nv-measure");D.attr("transform","translate("+j.left+","+j.top+")");var H=function(T){return Math.abs(Q(T)-Q(0))},F=function(T){return Math.abs(O(T)-O(0))};var G=function(T){return T<0?Q(T):Q(0)},E=function(T){return T<0?O(T):O(0)};N.select("rect.nv-rangeMax").attr("height",v).attr("width",F(B>0?B:y)).attr("x",E(B>0?B:y)).datum(B>0?B:y);N.select("rect.nv-rangeAvg").attr("height",v).attr("width",F(x)).attr("x",E(x)).datum(x);N.select("rect.nv-rangeMin").attr("height",v).attr("width",F(B)).attr("x",E(B)).attr("width",F(B>0?y:B)).attr("x",E(B>0?y:B)).datum(B>0?y:B);N.select("rect.nv-measure").style("fill",i).attr("height",v/3).attr("y",v/3).attr("width",I<0?O(0)-O(I[0]):O(I[0])-O(0)).attr("x",E(I)).on("mouseover",function(){o.elementMouseover({value:I[0],label:P[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){o.elementMousemove({value:I[0],label:P[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){o.elementMouseout({value:I[0],label:P[0]||"Current",color:d3.select(this).style("fill")})});var C=v/6;var w=K.map(function(T,U){return{value:T,label:z[U]}});L.selectAll("path.nv-markerTriangle").data(w).enter().append("path").attr("class","nv-markerTriangle").attr("transform",function(T){return"translate("+O(T.value)+","+(v/2)+")"}).attr("d","M0,"+C+"L"+C+","+(-C)+" "+(-C)+","+(-C)+"Z").on("mouseover",function(T){o.elementMouseover({value:T.value,label:T.label||"Previous",color:d3.select(this).style("fill"),pos:[O(T.value),v/2]})}).on("mousemove",function(T){o.elementMousemove({value:T.value,label:T.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(U,T){o.elementMouseout({value:U.value,label:U.label||"Previous",color:d3.select(this).style("fill")})});D.selectAll(".nv-range").on("mouseover",function(V,U){var T=J[U]||(!U?"Maximum":U==1?"Mean":"Minimum");o.elementMouseover({value:V,label:T,color:d3.select(this).style("fill")})}).on("mousemove",function(){o.elementMousemove({value:I[0],label:P[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(V,U){var T=J[U]||(!U?"Maximum":U==1?"Mean":"Minimum");o.elementMouseout({value:V,label:T,color:d3.select(this).style("fill")})})});return q}q.dispatch=o;q.options=a.utils.optionsFunc.bind(q);q._options=Object.create({},{ranges:{get:function(){return e},set:function(t){e=t}},markers:{get:function(){return k},set:function(t){k=t}},measures:{get:function(){return d},set:function(t){d=t}},forceX:{get:function(){return m},set:function(t){m=t}},width:{get:function(){return f},set:function(t){f=t}},height:{get:function(){return s},set:function(t){s=t}},tickFormat:{get:function(){return h},set:function(t){h=t}},margin:{get:function(){return j},set:function(t){j.top=t.top!==undefined?t.top:j.top;j.right=t.right!==undefined?t.right:j.right;j.bottom=t.bottom!==undefined?t.bottom:j.bottom;j.left=t.left!==undefined?t.left:j.left}},orient:{get:function(){return l},set:function(t){l=t;p=l=="right"||l=="bottom"}},color:{get:function(){return i},set:function(t){i=a.utils.getColor(t)}}});a.utils.initOptions(q);return q};a.models.bulletChart=function(){var c=a.models.bullet();var q=a.models.tooltip();var j="left",l=false,h={top:5,right:40,bottom:20,left:120},e=function(r){return r.ranges},i=function(r){return r.markers?r.markers:[0]},d=function(r){return r.measures},f=null,p=55,g=null,n=null,o=null,k=d3.dispatch("tooltipShow","tooltipHide");q.duration(0).headerEnabled(false);function m(r){r.each(function(L,F){var B=d3.select(this);a.utils.initSVG(B);var s=a.utils.availableWidth(f,B,h),t=p-h.top-h.bottom,w=this;m.update=function(){m(r)};m.container=this;if(!L||!e.call(this,L,F)){a.utils.noData(m,B);return m}else{B.selectAll(".nv-noData").remove()}var O=e.call(this,L,F).slice().sort(d3.descending),D=i.call(this,L,F).slice().sort(d3.descending),z=d.call(this,L,F).slice().sort(d3.descending);var x=B.selectAll("g.nv-wrap.nv-bulletChart").data([L]);var u=x.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart");var E=u.append("g");var I=x.select("g");E.append("g").attr("class","nv-bulletWrap");E.append("g").attr("class","nv-titles");x.attr("transform","translate("+h.left+","+h.top+")");var J=d3.scale.linear().domain([0,Math.max(O[0],D[0],z[0])]).range(l?[s,0]:[0,s]);var K=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(J.range());this.__chart__=J;var A=function(P){return Math.abs(K(P)-K(0))},y=function(P){return Math.abs(J(P)-J(0))};var N=E.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(p-h.top-h.bottom)/2+")");N.append("text").attr("class","nv-title").text(function(P){return P.title});N.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(P){return P.subtitle});c.width(s).height(t);var M=I.select(".nv-bulletWrap");d3.transition(M).call(c);var H=g||J.tickFormat(s/100);var G=I.selectAll("g.nv-tick").data(J.ticks(n?n:(s/50)),function(P){return this.textContent||H(P)});var C=G.enter().append("g").attr("class","nv-tick").attr("transform",function(P){return"translate("+K(P)+",0)"}).style("opacity",0.000001);C.append("line").attr("y1",t).attr("y2",t*7/6);C.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",t*7/6).text(H);var v=d3.transition(G).attr("transform",function(P){return"translate("+J(P)+",0)"}).style("opacity",1);v.select("line").attr("y1",t).attr("y2",t*7/6);v.select("text").attr("y",t*7/6);d3.transition(G.exit()).attr("transform",function(P){return"translate("+J(P)+",0)"}).style("opacity",0.000001).remove()});d3.timer.flush();return m}c.dispatch.on("elementMouseover.tooltip",function(r){r.series={key:r.label,value:r.value,color:r.color};q.data(r).hidden(false)});c.dispatch.on("elementMouseout.tooltip",function(r){q.hidden(true)});c.dispatch.on("elementMousemove.tooltip",function(r){q.position({top:d3.event.pageY,left:d3.event.pageX})()});m.bullet=c;m.dispatch=k;m.tooltip=q;m.options=a.utils.optionsFunc.bind(m);m._options=Object.create({},{ranges:{get:function(){return e},set:function(r){e=r}},markers:{get:function(){return i},set:function(r){i=r}},measures:{get:function(){return d},set:function(r){d=r}},width:{get:function(){return f},set:function(r){f=r}},height:{get:function(){return p},set:function(r){p=r}},tickFormat:{get:function(){return g},set:function(r){g=r}},ticks:{get:function(){return n},set:function(r){n=r}},noData:{get:function(){return o},set:function(r){o=r}},tooltips:{get:function(){return q.enabled()},set:function(r){a.deprecated("tooltips","use chart.tooltip.enabled() instead");q.enabled(!!r)}},tooltipContent:{get:function(){return q.contentGenerator()},set:function(r){a.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");q.contentGenerator(r)}},margin:{get:function(){return h},set:function(r){h.top=r.top!==undefined?r.top:h.top;h.right=r.right!==undefined?r.right:h.right;h.bottom=r.bottom!==undefined?r.bottom:h.bottom;h.left=r.left!==undefined?r.left:h.left}},orient:{get:function(){return j},set:function(r){j=r;l=j=="right"||j=="bottom"}}});a.utils.inheritOptions(m,c);a.utils.initOptions(m);return m};a.models.candlestickBar=function(){var n={top:0,right:0,bottom:0,left:0},r=null,o=null,p=Math.floor(Math.random()*10000),j,h=d3.scale.linear(),g=d3.scale.linear(),w=function(x){return x.x},v=function(x){return x.y},d=function(x){return x.open},c=function(x){return x.close},B=function(x){return x.high},i=function(x){return x.low},f=[],e=[],k=false,A=true,u=a.utils.defaultColor(),z=false,t,q,m,s,C=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");function l(x){x.each(function(H){j=d3.select(this);var M=a.utils.availableWidth(r,j,n),E=a.utils.availableHeight(o,j,n);a.utils.initSVG(j);var O=(M/H[0].values.length)*0.45;h.domain(t||d3.extent(H[0].values.map(w).concat(f)));if(k){h.range(m||[M*0.5/H[0].values.length,M*(H[0].values.length-0.5)/H[0].values.length])}else{h.range(m||[5+O/2,M-O/2-5])}g.domain(q||[d3.min(H[0].values.map(i).concat(e)),d3.max(H[0].values.map(B).concat(e))]).range(s||[E,0]);if(h.domain()[0]===h.domain()[1]){h.domain()[0]?h.domain([h.domain()[0]-h.domain()[0]*0.01,h.domain()[1]+h.domain()[1]*0.01]):h.domain([-1,1])}if(g.domain()[0]===g.domain()[1]){g.domain()[0]?g.domain([g.domain()[0]+g.domain()[0]*0.01,g.domain()[1]-g.domain()[1]*0.01]):g.domain([-1,1])}var D=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([H[0].values]);var G=D.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar");var F=G.append("defs");var y=G.append("g");var I=D.select("g");y.append("g").attr("class","nv-ticks");D.attr("transform","translate("+n.left+","+n.top+")");j.on("click",function(Q,P){C.chartClick({data:Q,index:P,pos:d3.event,id:p})});F.append("clipPath").attr("id","nv-chart-clip-path-"+p).append("rect");D.select("#nv-chart-clip-path-"+p+" rect").attr("width",M).attr("height",E);I.attr("clip-path",A?"url(#nv-chart-clip-path-"+p+")":"");var K=D.select(".nv-ticks").selectAll(".nv-tick").data(function(P){return P});K.exit().remove();var J=K.enter().append("g").attr("class",function(R,Q,P){return(d(R,Q)>c(R,Q)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+P+"-"+Q});var N=J.append("line").attr("class","nv-candlestick-lines").attr("transform",function(Q,P){return"translate("+h(w(Q,P))+",0)"}).attr("x1",0).attr("y1",function(Q,P){return g(B(Q,P))}).attr("x2",0).attr("y2",function(Q,P){return g(i(Q,P))});var L=J.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(Q,P){return"translate("+(h(w(Q,P))-O/2)+","+(g(v(Q,P))-(d(Q,P)>c(Q,P)?(g(c(Q,P))-g(d(Q,P))):0))+")"}).attr("x",0).attr("y",0).attr("width",O).attr("height",function(S,Q){var P=d(S,Q);var R=c(S,Q);return P>R?g(R)-g(P):g(P)-g(R)});j.selectAll(".nv-candlestick-lines").transition().attr("transform",function(Q,P){return"translate("+h(w(Q,P))+",0)"}).attr("x1",0).attr("y1",function(Q,P){return g(B(Q,P))}).attr("x2",0).attr("y2",function(Q,P){return g(i(Q,P))});j.selectAll(".nv-candlestick-rects").transition().attr("transform",function(Q,P){return"translate("+(h(w(Q,P))-O/2)+","+(g(v(Q,P))-(d(Q,P)>c(Q,P)?(g(c(Q,P))-g(d(Q,P))):0))+")"}).attr("x",0).attr("y",0).attr("width",O).attr("height",function(S,Q){var P=d(S,Q);var R=c(S,Q);return P>R?g(R)-g(P):g(P)-g(R)})});return l}l.highlightPoint=function(y,x){l.clearHighlights();j.select(".nv-candlestickBar .nv-tick-0-"+y).classed("hover",x)};l.clearHighlights=function(){j.select(".nv-candlestickBar .nv-tick.hover").classed("hover",false)};l.dispatch=C;l.options=a.utils.optionsFunc.bind(l);l._options=Object.create({},{width:{get:function(){return r},set:function(x){r=x}},height:{get:function(){return o},set:function(x){o=x}},xScale:{get:function(){return h},set:function(x){h=x}},yScale:{get:function(){return g},set:function(x){g=x}},xDomain:{get:function(){return t},set:function(x){t=x}},yDomain:{get:function(){return q},set:function(x){q=x}},xRange:{get:function(){return m},set:function(x){m=x}},yRange:{get:function(){return s},set:function(x){s=x}},forceX:{get:function(){return f},set:function(x){f=x}},forceY:{get:function(){return e},set:function(x){e=x}},padData:{get:function(){return k},set:function(x){k=x}},clipEdge:{get:function(){return A},set:function(x){A=x}},id:{get:function(){return p},set:function(x){p=x}},interactive:{get:function(){return z},set:function(x){z=x}},x:{get:function(){return w},set:function(x){w=x}},y:{get:function(){return v},set:function(x){v=x}},open:{get:function(){return d()},set:function(x){d=x}},close:{get:function(){return c()},set:function(x){c=x}},high:{get:function(){return B},set:function(x){B=x}},low:{get:function(){return i},set:function(x){i=x}},margin:{get:function(){return n},set:function(x){n.top=x.top!=undefined?x.top:n.top;n.right=x.right!=undefined?x.right:n.right;n.bottom=x.bottom!=undefined?x.bottom:n.bottom;n.left=x.left!=undefined?x.left:n.left}},color:{get:function(){return u},set:function(x){u=a.utils.getColor(x)}}});a.utils.initOptions(l);return l};a.models.cumulativeLineChart=function(){var w=a.models.line(),q=a.models.axis(),m=a.models.axis(),E=a.models.legend(),s=a.models.legend(),H=a.interactiveGuideline(),z=a.models.tooltip();var i={top:30,right:30,bottom:50,left:60},u=a.utils.defaultColor(),c=null,e=null,p=true,g=true,G=true,K=false,j=true,f=false,I=true,D,B,A=w.id(),O=a.utils.state(),t=null,l=null,o=function(x){return x.average},F=d3.dispatch("stateChange","changeState","renderEnd"),J=250,r=250,L=false;O.index=0;O.rescaleY=I;q.orient("bottom").tickPadding(7);m.orient((K)?"right":"left");z.valueFormatter(function(y,x){return m.tickFormat()(y,x)}).headerFormatter(function(y,x){return q.tickFormat()(y,x)});s.updateState(false);var h=d3.scale.linear(),v={i:0,x:0},C=a.utils.renderWatch(F,r);var N=function(x){return function(){return{active:x.map(function(y){return !y.disabled}),index:v.i,rescaleY:I}}};var k=function(x){return function(y){if(y.index!==undefined){v.i=y.index}if(y.rescaleY!==undefined){I=y.rescaleY}if(y.active!==undefined){x.forEach(function(Q,P){Q.disabled=!y.active[P]})}}};function M(x){C.reset();C.models(w);if(g){C.models(q)}if(G){C.models(m)}x.each(function(ak){var X=d3.select(this);a.utils.initSVG(X);X.classed("nv-chart-"+A,true);var V=this;var P=a.utils.availableWidth(c,X,i),R=a.utils.availableHeight(e,X,i);M.update=function(){if(r===0){X.call(M)}else{X.transition().duration(r).call(M)}};M.container=this;O.setter(k(ak),M.update).getter(N(ak)).update();O.disabled=ak.map(function(am){return !!am.disabled});if(!t){var al;t={};for(al in O){if(O[al] instanceof Array){t[al]=O[al].slice(0)}else{t[al]=O[al]}}}var aj=d3.behavior.drag().on("dragstart",ah).on("drag",ai).on("dragend",ac);function ah(an,am){d3.select(M.container).style("cursor","ew-resize")}function ai(an,am){v.x=d3.event.x;v.i=Math.round(h.invert(v.x));aa()}function ac(an,am){d3.select(M.container).style("cursor","auto");O.index=v.i;F.stateChange(O)}if(!ak||!ak.length||!ak.filter(function(am){return am.values.length}).length){a.utils.noData(M,X);return M}else{X.selectAll(".nv-noData").remove()}D=w.xScale();B=w.yScale();if(!I){var Q=ak.filter(function(am){return !am.disabled}).map(function(ao,an){var am=d3.extent(ao.values,w.y());if(am[0]<-0.95){am[0]=-0.95}return[(am[0]-am[1])/(1+am[1]),(am[1]-am[0])/(1+am[0])]});var S=[d3.min(Q,function(am){return am[0]}),d3.max(Q,function(am){return am[1]})];w.yDomain(S)}else{w.yDomain(null)}h.domain([0,ak[0].values.length-1]).range([0,P]).clamp(true);var ak=d(v.i,ak);var af=(f)?"none":"all";var W=X.selectAll("g.nv-wrap.nv-cumulativeLine").data([ak]);var Z=W.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g");var ag=W.select("g");Z.append("g").attr("class","nv-interactive");Z.append("g").attr("class","nv-x nv-axis").style("pointer-events","none");Z.append("g").attr("class","nv-y nv-axis");Z.append("g").attr("class","nv-background");Z.append("g").attr("class","nv-linesWrap").style("pointer-events",af);Z.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none");Z.append("g").attr("class","nv-legendWrap");Z.append("g").attr("class","nv-controlsWrap");if(p){E.width(P);ag.select(".nv-legendWrap").datum(ak).call(E);if(i.top!=E.height()){i.top=E.height();R=a.utils.availableHeight(e,X,i)}ag.select(".nv-legendWrap").attr("transform","translate(0,"+(-i.top)+")")}if(j){var U=[{key:"Re-scale y-axis",disabled:!I}];s.width(140).color(["#444","#444","#444"]).rightAlign(false).margin({top:5,right:0,bottom:5,left:20});ag.select(".nv-controlsWrap").datum(U).attr("transform","translate(0,"+(-i.top)+")").call(s)}W.attr("transform","translate("+i.left+","+i.top+")");if(K){ag.select(".nv-y.nv-axis").attr("transform","translate("+P+",0)")}var y=ak.filter(function(am){return am.tempDisabled});W.select(".tempDisabled").remove();if(y.length){W.append("text").attr("class","tempDisabled").attr("x",P/2).attr("y","-.71em").style("text-anchor","end").text(y.map(function(am){return am.key}).join(", ")+" values cannot be calculated for this time period.")}if(f){H.width(P).height(R).margin({left:i.left,top:i.top}).svgContainer(X).xScale(D);W.select(".nv-interactive").call(H)}Z.select(".nv-background").append("rect");ag.select(".nv-background rect").attr("width",P).attr("height",R);w.y(function(am){return am.display.y}).width(P).height(R).color(ak.map(function(an,am){return an.color||u(an,am)}).filter(function(an,am){return !ak[am].disabled&&!ak[am].tempDisabled}));var ab=ag.select(".nv-linesWrap").datum(ak.filter(function(am){return !am.disabled&&!am.tempDisabled}));ab.call(w);ak.forEach(function(an,am){an.seriesIndex=am});var ae=ak.filter(function(am){return !am.disabled&&!!o(am)});var ad=ag.select(".nv-avgLinesWrap").selectAll("line").data(ae,function(am){return am.key});var T=function(an){var am=B(o(an));if(am<0){return 0}if(am>R){return R}return am};ad.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(an,am){return w.color()(an,an.seriesIndex)}).attr("x1",0).attr("x2",P).attr("y1",T).attr("y2",T);ad.style("stroke-opacity",function(an){var am=B(o(an));if(am<0||am>R){return 0}return 1}).attr("x1",0).attr("x2",P).attr("y1",T).attr("y2",T);ad.exit().remove();var Y=ab.selectAll(".nv-indexLine").data([v]);Y.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",0.5).style("pointer-events","all").call(aj);Y.attr("transform",function(am){return"translate("+h(am.i)+",0)"}).attr("height",R);if(g){q.scale(D)._ticks(a.utils.calcTicksX(P/70,ak)).tickSize(-R,0);ag.select(".nv-x.nv-axis").attr("transform","translate(0,"+B.range()[0]+")");ag.select(".nv-x.nv-axis").call(q)}if(G){m.scale(B)._ticks(a.utils.calcTicksY(R/36,ak)).tickSize(-P,0);ag.select(".nv-y.nv-axis").call(m)}function aa(){Y.data([v]);var am=M.duration();M.duration(0);M.update();M.duration(am)}ag.select(".nv-background rect").on("click",function(){v.x=d3.mouse(this)[0];v.i=Math.round(h.invert(v.x));O.index=v.i;F.stateChange(O);aa()});w.dispatch.on("elementClick",function(am){v.i=am.pointIndex;v.x=h(v.i);O.index=v.i;F.stateChange(O);aa()});s.dispatch.on("legendClick",function(an,am){an.disabled=!an.disabled;I=!an.disabled;O.rescaleY=I;F.stateChange(O);M.update()});E.dispatch.on("stateChange",function(an){for(var am in an){O[am]=an[am]}F.stateChange(O);M.update()});H.dispatch.on("elementMousemove",function(at){w.clearHighlights();var aq,aw,ao,am=[];ak.filter(function(ay,ax){ay.seriesIndex=ax;return !ay.disabled}).forEach(function(az,ay){aw=a.interactiveBisect(az.values,at.pointXValue,M.x());w.highlightPoint(ay,aw,true);var ax=az.values[aw];if(typeof ax==="undefined"){return}if(typeof aq==="undefined"){aq=ax}if(typeof ao==="undefined"){ao=M.xScale()(M.x()(ax,aw))}am.push({key:az.key,value:M.y()(ax,aw),color:u(az,az.seriesIndex)})});if(am.length>2){var av=M.yScale().invert(at.mouseY);var an=Math.abs(M.yScale().domain()[0]-M.yScale().domain()[1]);var ar=0.03*an;var au=a.nearestValueIndex(am.map(function(ax){return ax.value}),av,ar);if(au!==null){am[au].highlight=true}}var ap=q.tickFormat()(M.x()(aq,aw),aw);H.tooltip.position({left:ao+i.left,top:at.mouseY+i.top}).chartContainer(V.parentNode).valueFormatter(function(ay,ax){return m.tickFormat()(ay)}).data({value:ap,series:am})();H.renderGuideLine(ao)});H.dispatch.on("elementMouseout",function(am){w.clearHighlights()});F.on("changeState",function(am){if(typeof am.disabled!=="undefined"){ak.forEach(function(ao,an){ao.disabled=am.disabled[an]});O.disabled=am.disabled}if(typeof am.index!=="undefined"){v.i=am.index;v.x=h(v.i);O.index=am.index;Y.data([v])}if(typeof am.rescaleY!=="undefined"){I=am.rescaleY}M.update()})});C.renderEnd("cumulativeLineChart immediate");return M}w.dispatch.on("elementMouseover.tooltip",function(y){var x={x:M.x()(y.point),y:M.y()(y.point),color:y.point.color};y.point=x;z.data(y).position(y.pos).hidden(false)});w.dispatch.on("elementMouseout.tooltip",function(x){z.hidden(true)});var n=null;function d(x,y){if(!n){n=w.y()}return y.map(function(Q,S){if(!Q.values){return Q}var P=Q.values[x];if(P==null){return Q}var R=n(P,x);if(R<-0.95&&!L){Q.tempDisabled=true;return Q}Q.tempDisabled=false;Q.values=Q.values.map(function(T,U){T.display={y:(n(T,U)-R)/(1+R)};return T});return Q})}M.dispatch=F;M.lines=w;M.legend=E;M.controls=s;M.xAxis=q;M.yAxis=m;M.interactiveLayer=H;M.state=O;M.tooltip=z;M.options=a.utils.optionsFunc.bind(M);M._options=Object.create({},{width:{get:function(){return c},set:function(x){c=x}},height:{get:function(){return e},set:function(x){e=x}},rescaleY:{get:function(){return I},set:function(x){I=x}},showControls:{get:function(){return j},set:function(x){j=x}},showLegend:{get:function(){return p},set:function(x){p=x}},average:{get:function(){return o},set:function(x){o=x}},defaultState:{get:function(){return t},set:function(x){t=x}},noData:{get:function(){return l},set:function(x){l=x}},showXAxis:{get:function(){return g},set:function(x){g=x}},showYAxis:{get:function(){return G},set:function(x){G=x}},noErrorCheck:{get:function(){return L},set:function(x){L=x}},tooltips:{get:function(){return z.enabled()},set:function(x){a.deprecated("tooltips","use chart.tooltip.enabled() instead");z.enabled(!!x)}},tooltipContent:{get:function(){return z.contentGenerator()},set:function(x){a.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");z.contentGenerator(x)}},margin:{get:function(){return i},set:function(x){i.top=x.top!==undefined?x.top:i.top;i.right=x.right!==undefined?x.right:i.right;i.bottom=x.bottom!==undefined?x.bottom:i.bottom;i.left=x.left!==undefined?x.left:i.left}},color:{get:function(){return u},set:function(x){u=a.utils.getColor(x);E.color(u)}},useInteractiveGuideline:{get:function(){return f},set:function(x){f=x;if(x===true){M.interactive(false);M.useVoronoi(false)}}},rightAlignYAxis:{get:function(){return K},set:function(x){K=x;m.orient((x)?"right":"left")}},duration:{get:function(){return r},set:function(x){r=x;w.duration(r);q.duration(r);m.duration(r);C.reset(r)}}});a.utils.inheritOptions(M,w);a.utils.initOptions(M);return M};a.models.discreteBar=function(){var l={top:0,right:0,bottom:0,left:0},p=960,n=500,o=Math.floor(Math.random()*10000),j,i=d3.scale.ordinal(),h=d3.scale.linear(),w=function(x){return x.x},u=function(x){return x.y},e=[0],t=a.utils.defaultColor(),z=false,g=d3.format(",.2f"),r,q,m,s,B=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),A="discreteBar",c=250;var v,d;var f=a.utils.renderWatch(B,c);function k(x){f.reset();x.each(function(I){var L=p-l.left-l.right,E=n-l.top-l.bottom;j=d3.select(this);a.utils.initSVG(j);I.forEach(function(N,M){N.values.forEach(function(O){O.series=M})});var D=(r&&q)?[]:I.map(function(M){return M.values.map(function(O,N){return{x:w(O,N),y:u(O,N),y0:O.y0}})});i.domain(r||d3.merge(D).map(function(M){return M.x})).rangeBands(m||[0,L],0.1);h.domain(q||d3.extent(d3.merge(D).map(function(M){return M.y}).concat(e)));if(z){h.range(s||[E-(h.domain()[0]<0?12:0),h.domain()[1]>0?12:0])}else{h.range(s||[E,0])}v=v||i;d=d||h.copy().range([h(0),h(0)]);var C=j.selectAll("g.nv-wrap.nv-discretebar").data([I]);var G=C.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar");var y=G.append("g");var J=C.select("g");y.append("g").attr("class","nv-groups");C.attr("transform","translate("+l.left+","+l.top+")");var F=C.select(".nv-groups").selectAll(".nv-group").data(function(M){return M},function(M){return M.key});F.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001);F.exit().watchTransition(f,"discreteBar: exit groups").style("stroke-opacity",0.000001).style("fill-opacity",0.000001).remove();F.attr("class",function(N,M){return"nv-group nv-series-"+M}).classed("hover",function(M){return M.hover});F.watchTransition(f,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",0.75);var K=F.selectAll("g.nv-bar").data(function(M){return M.values});K.exit().remove();var H=K.enter().append("g").attr("transform",function(O,N,M){return"translate("+(i(w(O,N))+i.rangeBand()*0.05)+", "+h(0)+")"}).on("mouseover",function(N,M){d3.select(this).classed("hover",true);B.elementMouseover({data:N,index:M,color:d3.select(this).style("fill")})}).on("mouseout",function(N,M){d3.select(this).classed("hover",false);B.elementMouseout({data:N,index:M,color:d3.select(this).style("fill")})}).on("mousemove",function(N,M){B.elementMousemove({data:N,index:M,color:d3.select(this).style("fill")})}).on("click",function(N,M){B.elementClick({data:N,index:M,color:d3.select(this).style("fill")});d3.event.stopPropagation()}).on("dblclick",function(N,M){B.elementDblClick({data:N,index:M,color:d3.select(this).style("fill")});d3.event.stopPropagation()});H.append("rect").attr("height",0).attr("width",i.rangeBand()*0.9/I.length);if(z){H.append("text").attr("text-anchor","middle");K.select("text").text(function(N,M){return g(u(N,M))}).watchTransition(f,"discreteBar: bars text").attr("x",i.rangeBand()*0.9/2).attr("y",function(N,M){return u(N,M)<0?h(u(N,M))-h(0)+12:-4})}else{K.selectAll("text").remove()}K.attr("class",function(N,M){return u(N,M)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(N,M){return N.color||t(N,M)}).style("stroke",function(N,M){return N.color||t(N,M)}).select("rect").attr("class",A).watchTransition(f,"discreteBar: bars rect").attr("width",i.rangeBand()*0.9/I.length);K.watchTransition(f,"discreteBar: bars").attr("transform",function(P,M){var O=i(w(P,M))+i.rangeBand()*0.05,N=u(P,M)<0?h(0):h(0)-h(u(P,M))<1?h(0)-1:h(u(P,M));return"translate("+O+", "+N+")"}).select("rect").attr("height",function(N,M){return Math.max(Math.abs(h(u(N,M))-h((q&&q[0])||0))||1)});v=i.copy();d=h.copy()});f.renderEnd("discreteBar immediate");return k}k.dispatch=B;k.options=a.utils.optionsFunc.bind(k);k._options=Object.create({},{width:{get:function(){return p},set:function(x){p=x}},height:{get:function(){return n},set:function(x){n=x}},forceY:{get:function(){return e},set:function(x){e=x}},showValues:{get:function(){return z},set:function(x){z=x}},x:{get:function(){return w},set:function(x){w=x}},y:{get:function(){return u},set:function(x){u=x}},xScale:{get:function(){return i},set:function(x){i=x}},yScale:{get:function(){return h},set:function(x){h=x}},xDomain:{get:function(){return r},set:function(x){r=x}},yDomain:{get:function(){return q},set:function(x){q=x}},xRange:{get:function(){return m},set:function(x){m=x}},yRange:{get:function(){return s},set:function(x){s=x}},valueFormat:{get:function(){return g},set:function(x){g=x}},id:{get:function(){return o},set:function(x){o=x}},rectClass:{get:function(){return A},set:function(x){A=x}},margin:{get:function(){return l},set:function(x){l.top=x.top!==undefined?x.top:l.top;l.right=x.right!==undefined?x.right:l.right;l.bottom=x.bottom!==undefined?x.bottom:l.bottom;l.left=x.left!==undefined?x.left:l.left}},color:{get:function(){return t},set:function(x){t=a.utils.getColor(x)}},duration:{get:function(){return c},set:function(x){c=x;f.reset(c)}}});a.utils.initOptions(k);return k};a.models.discreteBarChart=function(){var t=a.models.discreteBar(),j=a.models.axis(),d=a.models.axis(),g=a.models.tooltip();var o={top:15,right:10,bottom:50,left:60},q=null,p=null,r=a.utils.getColor(),s=true,m=true,i=false,e=false,l,k,f=null,u=d3.dispatch("beforeUpdate","renderEnd"),c=250;j.orient("bottom").showMaxMin(false).tickFormat(function(v){return v});d.orient((i)?"right":"left").tickFormat(d3.format(",.1f"));g.duration(0).headerEnabled(false).valueFormatter(function(w,v){return d.tickFormat()(w,v)}).keyFormatter(function(w,v){return j.tickFormat()(w,v)});var h=a.utils.renderWatch(u,c);function n(v){h.reset();h.models(t);if(s){h.models(j)}if(m){h.models(d)}v.each(function(C){var x=d3.select(this),F=this;a.utils.initSVG(x);var G=a.utils.availableWidth(q,x,o),z=a.utils.availableHeight(p,x,o);n.update=function(){u.beforeUpdate();x.transition().duration(c).call(n)};n.container=this;if(!C||!C.length||!C.filter(function(H){return H.values.length}).length){a.utils.noData(n,x);return n}else{x.selectAll(".nv-noData").remove()}l=t.xScale();k=t.yScale().clamp(true);var y=x.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([C]);var w=y.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g");var A=w.append("defs");var D=y.select("g");w.append("g").attr("class","nv-x nv-axis");w.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");w.append("g").attr("class","nv-barsWrap");D.attr("transform","translate("+o.left+","+o.top+")");if(i){D.select(".nv-y.nv-axis").attr("transform","translate("+G+",0)")}t.width(G).height(z);var E=D.select(".nv-barsWrap").datum(C.filter(function(H){return !H.disabled}));E.transition().call(t);A.append("clipPath").attr("id","nv-x-label-clip-"+t.id()).append("rect");D.select("#nv-x-label-clip-"+t.id()+" rect").attr("width",l.rangeBand()*(e?2:1)).attr("height",16).attr("x",-l.rangeBand()/(e?1:2));if(s){j.scale(l)._ticks(a.utils.calcTicksX(G/100,C)).tickSize(-z,0);D.select(".nv-x.nv-axis").attr("transform","translate(0,"+(k.range()[0]+((t.showValues()&&k.domain()[0]<0)?16:0))+")");D.select(".nv-x.nv-axis").call(j);var B=D.select(".nv-x.nv-axis").selectAll("g");if(e){B.selectAll("text").attr("transform",function(J,I,H){return"translate(0,"+(H%2==0?"5":"17")+")"})}}if(m){d.scale(k)._ticks(a.utils.calcTicksY(z/36,C)).tickSize(-G,0);D.select(".nv-y.nv-axis").call(d)}D.select(".nv-zeroLine line").attr("x1",0).attr("x2",G).attr("y1",k(0)).attr("y2",k(0))});h.renderEnd("discreteBar chart immediate");return n}t.dispatch.on("elementMouseover.tooltip",function(v){v.series={key:n.x()(v.data),value:n.y()(v.data),color:v.color};g.data(v).hidden(false)});t.dispatch.on("elementMouseout.tooltip",function(v){g.hidden(true)});t.dispatch.on("elementMousemove.tooltip",function(v){g.position({top:d3.event.pageY,left:d3.event.pageX})()});n.dispatch=u;n.discretebar=t;n.xAxis=j;n.yAxis=d;n.tooltip=g;n.options=a.utils.optionsFunc.bind(n);n._options=Object.create({},{width:{get:function(){return q},set:function(v){q=v}},height:{get:function(){return p},set:function(v){p=v}},staggerLabels:{get:function(){return e},set:function(v){e=v}},showXAxis:{get:function(){return s},set:function(v){s=v}},showYAxis:{get:function(){return m},set:function(v){m=v}},noData:{get:function(){return f},set:function(v){f=v}},tooltips:{get:function(){return g.enabled()},set:function(v){a.deprecated("tooltips","use chart.tooltip.enabled() instead");g.enabled(!!v)}},tooltipContent:{get:function(){return g.contentGenerator()},set:function(v){a.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");g.contentGenerator(v)}},margin:{get:function(){return o},set:function(v){o.top=v.top!==undefined?v.top:o.top;o.right=v.right!==undefined?v.right:o.right;o.bottom=v.bottom!==undefined?v.bottom:o.bottom;o.left=v.left!==undefined?v.left:o.left}},duration:{get:function(){return c},set:function(v){c=v;h.reset(c);t.duration(c);j.duration(c);d.duration(c)}},color:{get:function(){return r},set:function(v){r=a.utils.getColor(v);t.color(r)}},rightAlignYAxis:{get:function(){return i},set:function(v){i=v;d.orient((v)?"right":"left")}}});a.utils.inheritOptions(n,t);a.utils.initOptions(n);return n};a.models.distribution=function(){var g={top:0,right:0,bottom:0,left:0},c=400,o=8,d="x",j=function(p){return p[d]},h=a.utils.defaultColor(),e=d3.scale.linear(),i,f=250,m=d3.dispatch("renderEnd");var l;var k=a.utils.renderWatch(m,f);function n(p){k.reset();p.each(function(u){var v=c-(d==="x"?g.left+g.right:g.top+g.bottom),y=d=="x"?"y":"x",r=d3.select(this);a.utils.initSVG(r);l=l||e;var s=r.selectAll("g.nv-distribution").data([u]);var t=s.enter().append("g").attr("class","nvd3 nv-distribution");var q=t.append("g");var w=s.select("g");s.attr("transform","translate("+g.left+","+g.top+")");var z=w.selectAll("g.nv-dist").data(function(A){return A},function(A){return A.key});z.enter().append("g");z.attr("class",function(B,A){return"nv-dist nv-series-"+A}).style("stroke",function(B,A){return h(B,A)});var x=z.selectAll("line.nv-dist"+d).data(function(A){return A.values});x.enter().append("line").attr(d+"1",function(B,A){return l(j(B,A))}).attr(d+"2",function(B,A){return l(j(B,A))});k.transition(z.exit().selectAll("line.nv-dist"+d),"dist exit").attr(d+"1",function(B,A){return e(j(B,A))}).attr(d+"2",function(B,A){return e(j(B,A))}).style("stroke-opacity",0).remove();x.attr("class",function(B,A){return"nv-dist"+d+" nv-dist"+d+"-"+A}).attr(y+"1",0).attr(y+"2",o);k.transition(x,"dist").attr(d+"1",function(B,A){return e(j(B,A))}).attr(d+"2",function(B,A){return e(j(B,A))});l=e.copy()});k.renderEnd("distribution immediate");return n}n.options=a.utils.optionsFunc.bind(n);n.dispatch=m;n.margin=function(p){if(!arguments.length){return g}g.top=typeof p.top!="undefined"?p.top:g.top;g.right=typeof p.right!="undefined"?p.right:g.right;g.bottom=typeof p.bottom!="undefined"?p.bottom:g.bottom;g.left=typeof p.left!="undefined"?p.left:g.left;return n};n.width=function(p){if(!arguments.length){return c}c=p;return n};n.axis=function(p){if(!arguments.length){return d}d=p;return n};n.size=function(p){if(!arguments.length){return o}o=p;return n};n.getData=function(p){if(!arguments.length){return j}j=d3.functor(p);return n};n.scale=function(p){if(!arguments.length){return e}e=p;return n};n.color=function(p){if(!arguments.length){return h}h=a.utils.getColor(p);return n};n.duration=function(p){if(!arguments.length){return f}f=p;k.reset(f);return n};return n};a.models.furiousLegend=function(){var f={top:5,right:0,bottom:5,left:0},d=400,o=20,h=function(q){return q.key},g=a.utils.getColor(),l=true,n=28,e=true,p=true,c=false,j=false,k=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),i="classic";function m(q){q.each(function(Q){var u=d-f.left-f.right,H=d3.select(this);a.utils.initSVG(H);var F=H.selectAll("g.nv-legend").data([Q]);var M=F.enter().append("g").attr("class","nvd3 nv-legend").append("g");var P=F.select("g");F.attr("transform","translate("+f.left+","+f.top+")");var G=P.selectAll(".nv-series").data(function(R){if(i!="furious"){return R}return R.filter(function(S){return j?true:!S.disengaged})});var z=G.enter().append("g").attr("class","nv-series");var J;if(i=="classic"){z.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);J=G.select("circle")}else{if(i=="furious"){z.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3);J=G.select("rect");z.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)");var v=G.select(".nv-check-box");v.each(function(S,R){d3.select(this).selectAll("path").attr("stroke",s(S,R))})}}z.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var C=G.select("text.nv-legend-text");G.on("mouseover",function(S,R){k.legendMouseover(S,R)}).on("mouseout",function(S,R){k.legendMouseout(S,R)}).on("click",function(U,R){k.legendClick(U,R);var T=G.data();if(p){if(i=="classic"){if(c){T.forEach(function(V){V.disabled=true});U.disabled=false}else{U.disabled=!U.disabled;if(T.every(function(V){return V.disabled})){T.forEach(function(V){V.disabled=false})}}}else{if(i=="furious"){if(j){U.disengaged=!U.disengaged;U.userDisabled=U.userDisabled==undefined?!!U.disabled:U.userDisabled;U.disabled=U.disengaged||U.userDisabled}else{if(!j){U.disabled=!U.disabled;U.userDisabled=U.disabled;var S=T.filter(function(V){return !V.disengaged});if(S.every(function(V){return V.userDisabled})){T.forEach(function(V){V.disabled=V.userDisabled=false})}}}}}k.stateChange({disabled:T.map(function(V){return !!V.disabled}),disengaged:T.map(function(V){return !!V.disengaged})})}}).on("dblclick",function(T,R){if(i=="furious"&&j){return}k.legendDblclick(T,R);if(p){var S=G.data();S.forEach(function(U){U.disabled=true;if(i=="furious"){U.userDisabled=U.disabled}});T.disabled=false;if(i=="furious"){T.userDisabled=T.disabled}k.stateChange({disabled:S.map(function(U){return !!U.disabled})})}});G.classed("nv-disabled",function(R){return R.userDisabled});G.exit().remove();C.attr("fill",s).text(h);var y;switch(i){case"furious":y=23;break;case"classic":y=20}if(l){var x=[];G.each(function(V,T){var S=d3.select(this).select("text");var R;try{R=S.node().getComputedTextLength();if(R<=0){throw Error()}}catch(U){R=a.utils.calcApproxTextWidth(S)}x.push(R+n)});var E=0;var L=0;var I=[];while(L<u&&E<x.length){I[E]=x[E];L+=x[E++]}if(E===0){E=1}while(L>u&&E>1){I=[];E--;for(var N=0;N<x.length;N++){if(x[N]>(I[N%E]||0)){I[N%E]=x[N]}}L=I.reduce(function(S,T,R,U){return S+T})}var t=[];for(var O=0,D=0;O<E;O++){t[O]=D;D+=I[O]}G.attr("transform",function(S,R){return"translate("+t[R%E]+","+(5+Math.floor(R/E)*y)+")"});if(e){P.attr("transform","translate("+(d-f.right-L)+","+f.top+")")}else{P.attr("transform","translate(0,"+f.top+")")}o=f.top+f.bottom+(Math.ceil(x.length/E)*y)}else{var A=5,B=5,K=0,w;G.attr("transform",function(T,R){var S=d3.select(this).select("text").node().getComputedTextLength()+n;w=B;if(d<f.left+f.right+w+S){B=w=5;A+=y}B+=S;if(B>K){K=B}return"translate("+w+","+A+")"});P.attr("transform","translate("+(d-f.right-K)+","+f.top+")");o=f.top+f.bottom+A+15}if(i=="furious"){J.attr("width",function(S,R){return C[0][R].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15)}J.style("fill",r).style("stroke",function(S,R){return S.color||g(S,R)})});function s(u,t){if(i!="furious"){return"#000"}if(j){return u.disengaged?g(u,t):"#fff"}else{if(!j){return !!u.disabled?g(u,t):"#fff"}}}function r(u,t){if(j&&i=="furious"){return u.disengaged?"#fff":g(u,t)}else{return !!u.disabled?"#fff":g(u,t)}}return m}m.dispatch=k;m.options=a.utils.optionsFunc.bind(m);m._options=Object.create({},{width:{get:function(){return d},set:function(q){d=q}},height:{get:function(){return o},set:function(q){o=q}},key:{get:function(){return h},set:function(q){h=q}},align:{get:function(){return l},set:function(q){l=q}},rightAlign:{get:function(){return e},set:function(q){e=q}},padding:{get:function(){return n},set:function(q){n=q}},updateState:{get:function(){return p},set:function(q){p=q}},radioButtonMode:{get:function(){return c},set:function(q){c=q}},expanded:{get:function(){return j},set:function(q){j=q}},vers:{get:function(){return i},set:function(q){i=q}},margin:{get:function(){return f},set:function(q){f.top=q.top!==undefined?q.top:f.top;f.right=q.right!==undefined?q.right:f.right;f.bottom=q.bottom!==undefined?q.bottom:f.bottom;f.left=q.left!==undefined?q.left:f.left}},color:{get:function(){return g},set:function(q){g=a.utils.getColor(q)}}});a.utils.initOptions(m);return m};a.models.historicalBar=function(){var k={top:0,right:0,bottom:0,left:0},o=null,m=null,n=Math.floor(Math.random()*10000),h=null,g=d3.scale.linear(),f=d3.scale.linear(),u=function(x){return x.x},t=function(x){return x.y},d=[],c=[0],i=false,w=true,s=a.utils.defaultColor(),r,p,l,q,z=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),v=true;var e=a.utils.renderWatch(z,0);function j(x){x.each(function(E){e.reset();h=d3.select(this);var H=a.utils.availableWidth(o,h,k),B=a.utils.availableHeight(m,h,k);a.utils.initSVG(h);g.domain(r||d3.extent(E[0].values.map(u).concat(d)));if(i){g.range(l||[H*0.5/E[0].values.length,H*(E[0].values.length-0.5)/E[0].values.length])}else{g.range(l||[0,H])}f.domain(p||d3.extent(E[0].values.map(t).concat(c))).range(q||[B,0]);if(g.domain()[0]===g.domain()[1]){g.domain()[0]?g.domain([g.domain()[0]-g.domain()[0]*0.01,g.domain()[1]+g.domain()[1]*0.01]):g.domain([-1,1])}if(f.domain()[0]===f.domain()[1]){f.domain()[0]?f.domain([f.domain()[0]+f.domain()[0]*0.01,f.domain()[1]-f.domain()[1]*0.01]):f.domain([-1,1])}var A=h.selectAll("g.nv-wrap.nv-historicalBar-"+n).data([E[0].values]);var D=A.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+n);var C=D.append("defs");var y=D.append("g");var F=A.select("g");y.append("g").attr("class","nv-bars");A.attr("transform","translate("+k.left+","+k.top+")");h.on("click",function(J,I){z.chartClick({data:J,index:I,pos:d3.event,id:n})});C.append("clipPath").attr("id","nv-chart-clip-path-"+n).append("rect");A.select("#nv-chart-clip-path-"+n+" rect").attr("width",H).attr("height",B);F.attr("clip-path",w?"url(#nv-chart-clip-path-"+n+")":"");var G=A.select(".nv-bars").selectAll(".nv-bar").data(function(I){return I},function(J,I){return u(J,I)});G.exit().remove();G.enter().append("rect").attr("x",0).attr("y",function(J,I){return a.utils.NaNtoZero(f(Math.max(0,t(J,I))))}).attr("height",function(J,I){return a.utils.NaNtoZero(Math.abs(f(t(J,I))-f(0)))}).attr("transform",function(J,I){return"translate("+(g(u(J,I))-H/E[0].values.length*0.45)+",0)"}).on("mouseover",function(J,I){if(!v){return}d3.select(this).classed("hover",true);z.elementMouseover({data:J,index:I,color:d3.select(this).style("fill")})}).on("mouseout",function(J,I){if(!v){return}d3.select(this).classed("hover",false);z.elementMouseout({data:J,index:I,color:d3.select(this).style("fill")})}).on("mousemove",function(J,I){if(!v){return}z.elementMousemove({data:J,index:I,color:d3.select(this).style("fill")})}).on("click",function(J,I){if(!v){return}z.elementClick({data:J,index:I,color:d3.select(this).style("fill")});d3.event.stopPropagation()}).on("dblclick",function(J,I){if(!v){return}z.elementDblClick({data:J,index:I,color:d3.select(this).style("fill")});d3.event.stopPropagation()});G.attr("fill",function(J,I){return s(J,I)}).attr("class",function(K,J,I){return(t(K,J)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+I+"-"+J}).watchTransition(e,"bars").attr("transform",function(J,I){return"translate("+(g(u(J,I))-H/E[0].values.length*0.45)+",0)"}).attr("width",(H/E[0].values.length)*0.9);G.watchTransition(e,"bars").attr("y",function(K,I){var J=t(K,I)<0?f(0):f(0)-f(t(K,I))<1?f(0)-1:f(t(K,I));return a.utils.NaNtoZero(J)}).attr("height",function(J,I){return a.utils.NaNtoZero(Math.max(Math.abs(f(t(J,I))-f(0)),1))})});e.renderEnd("historicalBar immediate");return j}j.highlightPoint=function(y,x){h.select(".nv-bars .nv-bar-0-"+y).classed("hover",x)};j.clearHighlights=function(){h.select(".nv-bars .nv-bar.hover").classed("hover",false)};j.dispatch=z;j.options=a.utils.optionsFunc.bind(j);j._options=Object.create({},{width:{get:function(){return o},set:function(x){o=x}},height:{get:function(){return m},set:function(x){m=x}},forceX:{get:function(){return d},set:function(x){d=x}},forceY:{get:function(){return c},set:function(x){c=x}},padData:{get:function(){return i},set:function(x){i=x}},x:{get:function(){return u},set:function(x){u=x}},y:{get:function(){return t},set:function(x){t=x}},xScale:{get:function(){return g},set:function(x){g=x}},yScale:{get:function(){return f},set:function(x){f=x}},xDomain:{get:function(){return r},set:function(x){r=x}},yDomain:{get:function(){return p},set:function(x){p=x}},xRange:{get:function(){return l},set:function(x){l=x}},yRange:{get:function(){return q},set:function(x){q=x}},clipEdge:{get:function(){return w},set:function(x){w=x}},id:{get:function(){return n},set:function(x){n=x}},interactive:{get:function(){return v},set:function(x){v=x}},margin:{get:function(){return k},set:function(x){k.top=x.top!==undefined?x.top:k.top;k.right=x.right!==undefined?x.right:k.right;k.bottom=x.bottom!==undefined?x.bottom:k.bottom;k.left=x.left!==undefined?x.left:k.left}},color:{get:function(){return s},set:function(x){s=a.utils.getColor(x)}}});a.utils.initOptions(j);return j};a.models.historicalBarChart=function(C){var t=C||a.models.historicalBar(),k=a.models.axis(),c=a.models.axis(),d=a.models.legend(),u=a.interactiveGuideline(),g=a.models.tooltip();var r={top:30,right:90,bottom:50,left:90},w=a.utils.defaultColor(),v=null,s=null,z=false,A=true,o=true,j=false,n=false,m,l,f={},i=null,e=null,B=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),p=250;k.orient("bottom").tickPadding(7);c.orient((j)?"right":"left");g.duration(0).headerEnabled(false).valueFormatter(function(y,x){return c.tickFormat()(y,x)}).headerFormatter(function(y,x){return k.tickFormat()(y,x)});var h=a.utils.renderWatch(B,0);function q(x){x.each(function(G){h.reset();h.models(t);if(A){h.models(k)}if(o){h.models(c)}var D=d3.select(this),J=this;a.utils.initSVG(D);var L=a.utils.availableWidth(v,D,r),F=a.utils.availableHeight(s,D,r);q.update=function(){D.transition().duration(p).call(q)};q.container=this;f.disabled=G.map(function(M){return !!M.disabled});if(!i){var K;i={};for(K in f){if(f[K] instanceof Array){i[K]=f[K].slice(0)}else{i[K]=f[K]}}}if(!G||!G.length||!G.filter(function(M){return M.values.length}).length){a.utils.noData(q,D);return q}else{D.selectAll(".nv-noData").remove()}m=t.xScale();l=t.yScale();var E=D.selectAll("g.nv-wrap.nv-historicalBarChart").data([G]);var y=E.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g");var H=E.select("g");y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class","nv-y nv-axis");y.append("g").attr("class","nv-barsWrap");y.append("g").attr("class","nv-legendWrap");y.append("g").attr("class","nv-interactive");if(z){d.width(L);H.select(".nv-legendWrap").datum(G).call(d);if(r.top!=d.height()){r.top=d.height();F=a.utils.availableHeight(s,D,r)}E.select(".nv-legendWrap").attr("transform","translate(0,"+(-r.top)+")")}E.attr("transform","translate("+r.left+","+r.top+")");if(j){H.select(".nv-y.nv-axis").attr("transform","translate("+L+",0)")}if(n){u.width(L).height(F).margin({left:r.left,top:r.top}).svgContainer(D).xScale(m);E.select(".nv-interactive").call(u)}t.width(L).height(F).color(G.map(function(N,M){return N.color||w(N,M)}).filter(function(N,M){return !G[M].disabled}));var I=H.select(".nv-barsWrap").datum(G.filter(function(M){return !M.disabled}));I.transition().call(t);if(A){k.scale(m)._ticks(a.utils.calcTicksX(L/100,G)).tickSize(-F,0);H.select(".nv-x.nv-axis").attr("transform","translate(0,"+l.range()[0]+")");H.select(".nv-x.nv-axis").transition().call(k)}if(o){c.scale(l)._ticks(a.utils.calcTicksY(F/36,G)).tickSize(-L,0);H.select(".nv-y.nv-axis").transition().call(c)}u.dispatch.on("elementMousemove",function(R){t.clearHighlights();var Q,P,M,O=[];G.filter(function(T,S){T.seriesIndex=S;return !T.disabled}).forEach(function(U,T){P=a.interactiveBisect(U.values,R.pointXValue,q.x());t.highlightPoint(P,true);var S=U.values[P];if(S===undefined){return}if(Q===undefined){Q=S}if(M===undefined){M=q.xScale()(q.x()(S,P))}O.push({key:U.key,value:q.y()(S,P),color:w(U,U.seriesIndex),data:U.values[P]})});var N=k.tickFormat()(q.x()(Q,P));u.tooltip.position({left:M+r.left,top:R.mouseY+r.top}).chartContainer(J.parentNode).valueFormatter(function(T,S){return c.tickFormat()(T)}).data({value:N,index:P,series:O})();u.renderGuideLine(M)});u.dispatch.on("elementMouseout",function(M){B.tooltipHide();t.clearHighlights()});d.dispatch.on("legendClick",function(N,M){N.disabled=!N.disabled;if(!G.filter(function(O){return !O.disabled}).length){G.map(function(O){O.disabled=false;E.selectAll(".nv-series").classed("disabled",false);return O})}f.disabled=G.map(function(O){return !!O.disabled});B.stateChange(f);x.transition().call(q)});d.dispatch.on("legendDblclick",function(M){G.forEach(function(N){N.disabled=true});M.disabled=false;f.disabled=G.map(function(N){return !!N.disabled});B.stateChange(f);q.update()});B.on("changeState",function(M){if(typeof M.disabled!=="undefined"){G.forEach(function(O,N){O.disabled=M.disabled[N]});f.disabled=M.disabled}q.update()})});h.renderEnd("historicalBarChart immediate");return q}t.dispatch.on("elementMouseover.tooltip",function(x){x.series={key:q.x()(x.data),value:q.y()(x.data),color:x.color};g.data(x).hidden(false)});t.dispatch.on("elementMouseout.tooltip",function(x){g.hidden(true)});t.dispatch.on("elementMousemove.tooltip",function(x){g.position({top:d3.event.pageY,left:d3.event.pageX})()});q.dispatch=B;q.bars=t;q.legend=d;q.xAxis=k;q.yAxis=c;q.interactiveLayer=u;q.tooltip=g;q.options=a.utils.optionsFunc.bind(q);q._options=Object.create({},{width:{get:function(){return v},set:function(x){v=x}},height:{get:function(){return s},set:function(x){s=x}},showLegend:{get:function(){return z},set:function(x){z=x}},showXAxis:{get:function(){return A},set:function(x){A=x}},showYAxis:{get:function(){return o},set:function(x){o=x}},defaultState:{get:function(){return i},set:function(x){i=x}},noData:{get:function(){return e},set:function(x){e=x}},tooltips:{get:function(){return g.enabled()},set:function(x){a.deprecated("tooltips","use chart.tooltip.enabled() instead");g.enabled(!!x)}},tooltipContent:{get:function(){return g.contentGenerator()},set:function(x){a.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");g.contentGenerator(x)}},margin:{get:function(){return r},set:function(x){r.top=x.top!==undefined?x.top:r.top;r.right=x.right!==undefined?x.right:r.right;r.bottom=x.bottom!==undefined?x.bottom:r.bottom;r.left=x.left!==undefined?x.left:r.left}},color:{get:function(){return w},set:function(x){w=a.utils.getColor(x);d.color(w);t.color(w)}},duration:{get:function(){return p},set:function(x){p=x;h.reset(p);c.duration(p);k.duration(p)}},rightAlignYAxis:{get:function(){return j},set:function(x){j=x;c.orient((x)?"right":"left")}},useInteractiveGuideline:{get:function(){return n},set:function(x){n=x;if(x===true){q.interactive(false)}}}});a.utils.inheritOptions(q,t);a.utils.initOptions(q);return q};a.models.ohlcBarChart=function(){var c=a.models.historicalBarChart(a.models.ohlcBar());c.useInteractiveGuideline(true);c.interactiveLayer.tooltip.contentGenerator(function(f){var g=f.series[0].data;var e=g.open<g.close?"2ca02c":"d62728";return'<h3 style="color: #'+e+'">'+f.value+"</h3><table><tr><td>open:</td><td>"+c.yAxis.tickFormat()(g.open)+"</td></tr><tr><td>close:</td><td>"+c.yAxis.tickFormat()(g.close)+"</td></tr><tr><td>high</td><td>"+c.yAxis.tickFormat()(g.high)+"</td></tr><tr><td>low:</td><td>"+c.yAxis.tickFormat()(g.low)+"</td></tr></table>"});return c};a.models.candlestickBarChart=function(){var c=a.models.historicalBarChart(a.models.candlestickBar());c.useInteractiveGuideline(true);c.interactiveLayer.tooltip.contentGenerator(function(f){var g=f.series[0].data;var e=g.open<g.close?"2ca02c":"d62728";return'<h3 style="color: #'+e+'">'+f.value+"</h3><table><tr><td>open:</td><td>"+c.yAxis.tickFormat()(g.open)+"</td></tr><tr><td>close:</td><td>"+c.yAxis.tickFormat()(g.close)+"</td></tr><tr><td>high</td><td>"+c.yAxis.tickFormat()(g.high)+"</td></tr><tr><td>low:</td><td>"+c.yAxis.tickFormat()(g.low)+"</td></tr></table>"});return c};a.models.legend=function(){var f={top:5,right:0,bottom:5,left:0},d=400,o=20,h=function(q){return q.key},g=a.utils.getColor(),l=true,n=32,e=true,p=true,c=false,j=false,k=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),i="classic";function m(q){q.each(function(S){var v=d-f.left-f.right,J=d3.select(this);a.utils.initSVG(J);var H=J.selectAll("g.nv-legend").data([S]);var O=H.enter().append("g").attr("class","nvd3 nv-legend").append("g");var R=H.select("g");H.attr("transform","translate("+f.left+","+f.top+")");var I=R.selectAll(".nv-series").data(function(T){if(i!="furious"){return T}return T.filter(function(U){return j?true:!U.disengaged})});var A=I.enter().append("g").attr("class","nv-series");var L;var z;switch(i){case"furious":z=23;break;case"classic":z=20}if(i=="classic"){A.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);L=I.select("circle")}else{if(i=="furious"){A.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3);L=I.select(".nv-legend-symbol");A.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)");var w=I.select(".nv-check-box");w.each(function(U,T){d3.select(this).selectAll("path").attr("stroke",t(U,T))})}}A.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var E=I.select("text.nv-legend-text");I.on("mouseover",function(U,T){k.legendMouseover(U,T)}).on("mouseout",function(U,T){k.legendMouseout(U,T)}).on("click",function(W,T){k.legendClick(W,T);var V=I.data();if(p){if(i=="classic"){if(c){V.forEach(function(X){X.disabled=true});W.disabled=false}else{W.disabled=!W.disabled;if(V.every(function(X){return X.disabled})){V.forEach(function(X){X.disabled=false})}}}else{if(i=="furious"){if(j){W.disengaged=!W.disengaged;W.userDisabled=W.userDisabled==undefined?!!W.disabled:W.userDisabled;W.disabled=W.disengaged||W.userDisabled}else{if(!j){W.disabled=!W.disabled;W.userDisabled=W.disabled;var U=V.filter(function(X){return !X.disengaged});if(U.every(function(X){return X.userDisabled})){V.forEach(function(X){X.disabled=X.userDisabled=false})}}}}}k.stateChange({disabled:V.map(function(X){return !!X.disabled}),disengaged:V.map(function(X){return !!X.disengaged})})}}).on("dblclick",function(V,T){if(i=="furious"&&j){return}k.legendDblclick(V,T);if(p){var U=I.data();U.forEach(function(W){W.disabled=true;if(i=="furious"){W.userDisabled=W.disabled}});V.disabled=false;if(i=="furious"){V.userDisabled=V.disabled}k.stateChange({disabled:U.map(function(W){return !!W.disabled})})}});I.classed("nv-disabled",function(T){return T.userDisabled});I.exit().remove();E.attr("fill",t).text(h);var N=0;if(l){var y=[];I.each(function(X,V){var U=d3.select(this).select("text");var T;try{T=U.node().getComputedTextLength();if(T<=0){throw Error()}}catch(W){T=a.utils.calcApproxTextWidth(U)}y.push(T+n)});var G=0;var K=[];N=0;while(N<v&&G<y.length){K[G]=y[G];N+=y[G++]}if(G===0){G=1}while(N>v&&G>1){K=[];G--;for(var P=0;P<y.length;P++){if(y[P]>(K[P%G]||0)){K[P%G]=y[P]}}N=K.reduce(function(U,V,T,W){return U+V})}var u=[];for(var Q=0,F=0;Q<G;Q++){u[Q]=F;F+=K[Q]}I.attr("transform",function(U,T){return"translate("+u[T%G]+","+(5+Math.floor(T/G)*z)+")"});if(e){R.attr("transform","translate("+(d-f.right-N)+","+f.top+")")}else{R.attr("transform","translate(0,"+f.top+")")}o=f.top+f.bottom+(Math.ceil(y.length/G)*z)}else{var C=5,D=5,M=0,x;I.attr("transform",function(V,T){var U=d3.select(this).select("text").node().getComputedTextLength()+n;x=D;if(d<f.left+f.right+x+U){D=x=5;C+=z}D+=U;if(D>M){M=D}if(N<x+M){N=x+M}return"translate("+x+","+C+")"});R.attr("transform","translate("+(d-f.right-M)+","+f.top+")");o=f.top+f.bottom+C+15}if(i=="furious"){L.attr("width",function(U,T){return E[0][T].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15);O.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0);var B=R.select(".nv-legend-bg");B.transition().duration(300).attr("x",-z).attr("width",N+z-12).attr("height",o+10).attr("y",-f.top-10).attr("opacity",j?1:0)}L.style("fill",r).style("fill-opacity",s).style("stroke",r)});function t(v,u){if(i!="furious"){return"#000"}if(j){return v.disengaged?"#000":"#fff"}else{if(!j){if(!v.color){v.color=g(v,u)}return !!v.disabled?v.color:"#fff"}}}function r(v,u){if(j&&i=="furious"){return v.disengaged?"#eee":v.color||g(v,u)}else{return v.color||g(v,u)}}function s(v,u){if(j&&i=="furious"){return 1}else{return !!v.disabled?0:1}}return m}m.dispatch=k;m.options=a.utils.optionsFunc.bind(m);m._options=Object.create({},{width:{get:function(){return d},set:function(q){d=q}},height:{get:function(){return o},set:function(q){o=q}},key:{get:function(){return h},set:function(q){h=q}},align:{get:function(){return l},set:function(q){l=q}},rightAlign:{get:function(){return e},set:function(q){e=q}},padding:{get:function(){return n},set:function(q){n=q}},updateState:{get:function(){return p},set:function(q){p=q}},radioButtonMode:{get:function(){return c},set:function(q){c=q}},expanded:{get:function(){return j},set:function(q){j=q}},vers:{get:function(){return i},set:function(q){i=q}},margin:{get:function(){return f},set:function(q){f.top=q.top!==undefined?q.top:f.top;f.right=q.right!==undefined?q.right:f.right;f.bottom=q.bottom!==undefined?q.bottom:f.bottom;f.left=q.left!==undefined?q.left:f.left}},color:{get:function(){return g},set:function(q){g=a.utils.getColor(q)}}});a.utils.initOptions(m);return m};a.models.line=function(){var j=a.models.scatter();var m={top:0,right:0,bottom:0,left:0},p=960,n=500,k=null,o=1.5,q=a.utils.defaultColor(),t=function(x){return x.x},r=function(x){return x.y},d=function(y,x){return !isNaN(r(y,x))&&r(y,x)!==null},u=function(x){return x.area},v=false,i,h,g="linear",c=250,w=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");j.pointSize(16).pointDomain([16,256]);var s,e,f=a.utils.renderWatch(w,c);function l(x){f.reset();f.models(j);x.each(function(G){k=d3.select(this);var J=a.utils.availableWidth(p,k,m),B=a.utils.availableHeight(n,k,m);a.utils.initSVG(k);i=j.xScale();h=j.yScale();s=s||i;e=e||h;var z=k.selectAll("g.nv-wrap.nv-line").data([G]);var E=z.enter().append("g").attr("class","nvd3 nv-wrap nv-line");var C=E.append("defs");var y=E.append("g");var H=z.select("g");y.append("g").attr("class","nv-groups");y.append("g").attr("class","nv-scatterWrap");z.attr("transform","translate("+m.left+","+m.top+")");j.width(J).height(B);var A=z.select(".nv-scatterWrap");A.call(j);C.append("clipPath").attr("id","nv-edge-clip-"+j.id()).append("rect");z.select("#nv-edge-clip-"+j.id()+" rect").attr("width",J).attr("height",(B>0)?B:0);H.attr("clip-path",v?"url(#nv-edge-clip-"+j.id()+")":"");A.attr("clip-path",v?"url(#nv-edge-clip-"+j.id()+")":"");var D=z.select(".nv-groups").selectAll(".nv-group").data(function(K){return K},function(K){return K.key});D.enter().append("g").style("stroke-opacity",0.000001).style("stroke-width",function(K){return K.strokeWidth||o}).style("fill-opacity",0.000001);D.exit().remove();D.attr("class",function(L,K){return(L.classed||"")+" nv-group nv-series-"+K}).classed("hover",function(K){return K.hover}).style("fill",function(L,K){return q(L,K)}).style("stroke",function(L,K){return q(L,K)});D.watchTransition(f,"line: groups").style("stroke-opacity",1).style("fill-opacity",function(K){return K.fillOpacity||0.5});var I=D.selectAll("path.nv-area").data(function(K){return u(K)?[K]:[]});I.enter().append("path").attr("class","nv-area").attr("d",function(K){return d3.svg.area().interpolate(g).defined(d).x(function(M,L){return a.utils.NaNtoZero(s(t(M,L)))}).y0(function(M,L){return a.utils.NaNtoZero(e(r(M,L)))}).y1(function(M,L){return e(h.domain()[0]<=0?h.domain()[1]>=0?0:h.domain()[1]:h.domain()[0])}).apply(this,[K.values])});D.exit().selectAll("path.nv-area").remove();I.watchTransition(f,"line: areaPaths").attr("d",function(K){return d3.svg.area().interpolate(g).defined(d).x(function(M,L){return a.utils.NaNtoZero(i(t(M,L)))}).y0(function(M,L){return a.utils.NaNtoZero(h(r(M,L)))}).y1(function(M,L){return h(h.domain()[0]<=0?h.domain()[1]>=0?0:h.domain()[1]:h.domain()[0])}).apply(this,[K.values])});var F=D.selectAll("path.nv-line").data(function(K){return[K.values]});F.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(g).defined(d).x(function(L,K){return a.utils.NaNtoZero(s(t(L,K)))}).y(function(L,K){return a.utils.NaNtoZero(e(r(L,K)))}));F.watchTransition(f,"line: linePaths").attr("d",d3.svg.line().interpolate(g).defined(d).x(function(L,K){return a.utils.NaNtoZero(i(t(L,K)))}).y(function(L,K){return a.utils.NaNtoZero(h(r(L,K)))}));s=i.copy();e=h.copy()});f.renderEnd("line immediate");return l}l.dispatch=w;l.scatter=j;j.dispatch.on("elementClick",function(){w.elementClick.apply(this,arguments)});j.dispatch.on("elementMouseover",function(){w.elementMouseover.apply(this,arguments)});j.dispatch.on("elementMouseout",function(){w.elementMouseout.apply(this,arguments)});l.options=a.utils.optionsFunc.bind(l);l._options=Object.create({},{width:{get:function(){return p},set:function(x){p=x}},height:{get:function(){return n},set:function(x){n=x}},defined:{get:function(){return d},set:function(x){d=x}},interpolate:{get:function(){return g},set:function(x){g=x}},clipEdge:{get:function(){return v},set:function(x){v=x}},margin:{get:function(){return m},set:function(x){m.top=x.top!==undefined?x.top:m.top;m.right=x.right!==undefined?x.right:m.right;m.bottom=x.bottom!==undefined?x.bottom:m.bottom;m.left=x.left!==undefined?x.left:m.left}},duration:{get:function(){return c},set:function(x){c=x;f.reset(c);j.duration(c)}},isArea:{get:function(){return u},set:function(x){u=d3.functor(x)}},x:{get:function(){return t},set:function(x){t=x;j.x(x)}},y:{get:function(){return r},set:function(x){r=x;j.y(x)}},color:{get:function(){return q},set:function(x){q=a.utils.getColor(x);j.color(q)}}});a.utils.inheritOptions(l,j);a.utils.initOptions(l);return l};a.models.lineChart=function(){var e=a.models.line(),n=a.models.axis(),d=a.models.axis(),f=a.models.legend(),v=a.interactiveGuideline(),i=a.models.tooltip();var t={top:30,right:20,bottom:50,left:60},z=a.utils.defaultColor(),w=null,u=null,B=true,C=true,r=true,m=false,q=false,p,o,h=a.utils.state(),k=null,g=null,D=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),c=250;n.orient("bottom").tickPadding(7);d.orient(m?"right":"left");i.valueFormatter(function(y,x){return d.tickFormat()(y,x)}).headerFormatter(function(y,x){return n.tickFormat()(y,x)});var j=a.utils.renderWatch(D,c);var l=function(x){return function(){return{active:x.map(function(y){return !y.disabled})}}};var A=function(x){return function(y){if(y.active!==undefined){x.forEach(function(F,E){F.disabled=!y.active[E]})}}};function s(x){j.reset();j.models(e);if(C){j.models(n)}if(r){j.models(d)}x.each(function(I){var F=d3.select(this),K=this;a.utils.initSVG(F);var M=a.utils.availableWidth(w,F,t),H=a.utils.availableHeight(u,F,t);s.update=function(){if(c===0){F.call(s)}else{F.transition().duration(c).call(s)}};s.container=this;h.setter(A(I),s.update).getter(l(I)).update();h.disabled=I.map(function(N){return !!N.disabled});if(!k){var L;k={};for(L in h){if(h[L] instanceof Array){k[L]=h[L].slice(0)}else{k[L]=h[L]}}}if(!I||!I.length||!I.filter(function(N){return N.values.length}).length){a.utils.noData(s,F);return s}else{F.selectAll(".nv-noData").remove()}p=e.xScale();o=e.yScale();var G=F.selectAll("g.nv-wrap.nv-lineChart").data([I]);var y=G.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g");var J=G.select("g");y.append("rect").style("opacity",0);y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class","nv-y nv-axis");y.append("g").attr("class","nv-linesWrap");y.append("g").attr("class","nv-legendWrap");y.append("g").attr("class","nv-interactive");J.select("rect").attr("width",M).attr("height",(H>0)?H:0);if(B){f.width(M);J.select(".nv-legendWrap").datum(I).call(f);if(t.top!=f.height()){t.top=f.height();H=a.utils.availableHeight(u,F,t)}G.select(".nv-legendWrap").attr("transform","translate(0,"+(-t.top)+")")}G.attr("transform","translate("+t.left+","+t.top+")");if(m){J.select(".nv-y.nv-axis").attr("transform","translate("+M+",0)")}if(q){v.width(M).height(H).margin({left:t.left,top:t.top}).svgContainer(F).xScale(p);G.select(".nv-interactive").call(v)}e.width(M).height(H).color(I.map(function(O,N){return O.color||z(O,N)}).filter(function(O,N){return !I[N].disabled}));var E=J.select(".nv-linesWrap").datum(I.filter(function(N){return !N.disabled}));E.call(e);if(C){n.scale(p)._ticks(a.utils.calcTicksX(M/100,I)).tickSize(-H,0);J.select(".nv-x.nv-axis").attr("transform","translate(0,"+o.range()[0]+")");J.select(".nv-x.nv-axis").call(n)}if(r){d.scale(o)._ticks(a.utils.calcTicksY(H/36,I)).tickSize(-M,0);J.select(".nv-y.nv-axis").call(d)}f.dispatch.on("stateChange",function(O){for(var N in O){h[N]=O[N]}D.stateChange(h);s.update()});v.dispatch.on("elementMousemove",function(T){e.clearHighlights();var R,W,P,N=[];I.filter(function(Y,X){Y.seriesIndex=X;return !Y.disabled}).forEach(function(Z,Y){W=a.interactiveBisect(Z.values,T.pointXValue,s.x());var X=Z.values[W];var aa=s.y()(X,W);if(aa!=null){e.highlightPoint(Y,W,true)}if(X===undefined){return}if(R===undefined){R=X}if(P===undefined){P=s.xScale()(s.x()(X,W))}N.push({key:Z.key,value:aa,color:z(Z,Z.seriesIndex)})});if(N.length>2){var V=s.yScale().invert(T.mouseY);var O=Math.abs(s.yScale().domain()[0]-s.yScale().domain()[1]);var S=0.03*O;var U=a.nearestValueIndex(N.map(function(X){return X.value}),V,S);if(U!==null){N[U].highlight=true}}var Q=n.tickFormat()(s.x()(R,W));v.tooltip.position({left:T.mouseX+t.left,top:T.mouseY+t.top}).chartContainer(K.parentNode).valueFormatter(function(Y,X){return Y==null?"N/A":d.tickFormat()(Y)}).data({value:Q,index:W,series:N})();v.renderGuideLine(P)});v.dispatch.on("elementClick",function(P){var N,O=[];I.filter(function(R,Q){R.seriesIndex=Q;return !R.disabled}).forEach(function(R){var T=a.interactiveBisect(R.values,P.pointXValue,s.x());var Q=R.values[T];if(typeof Q==="undefined"){return}if(typeof N==="undefined"){N=s.xScale()(s.x()(Q,T))}var S=s.yScale()(s.y()(Q,T));O.push({point:Q,pointIndex:T,pos:[N,S],seriesIndex:R.seriesIndex,series:R})});e.dispatch.elementClick(O)});v.dispatch.on("elementMouseout",function(N){e.clearHighlights()});D.on("changeState",function(N){if(typeof N.disabled!=="undefined"&&I.length===N.disabled.length){I.forEach(function(P,O){P.disabled=N.disabled[O]});h.disabled=N.disabled}s.update()})});j.renderEnd("lineChart immediate");return s}e.dispatch.on("elementMouseover.tooltip",function(x){i.data(x).position(x.pos).hidden(false)});e.dispatch.on("elementMouseout.tooltip",function(x){i.hidden(true)});s.dispatch=D;s.lines=e;s.legend=f;s.xAxis=n;s.yAxis=d;s.interactiveLayer=v;s.tooltip=i;s.dispatch=D;s.options=a.utils.optionsFunc.bind(s);s._options=Object.create({},{width:{get:function(){return w},set:function(x){w=x}},height:{get:function(){return u},set:function(x){u=x}},showLegend:{get:function(){return B},set:function(x){B=x}},showXAxis:{get:function(){return C},set:function(x){C=x}},showYAxis:{get:function(){return r},set:function(x){r=x}},defaultState:{get:function(){return k},set:function(x){k=x}},noData:{get:function(){return g},set:function(x){g=x}},tooltips:{get:function(){return i.enabled()},set:function(x){a.deprecated("tooltips","use chart.tooltip.enabled() instead");i.enabled(!!x)}},tooltipContent:{get:function(){return i.contentGenerator()},set:function(x){a.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");i.contentGenerator(x)}},margin:{get:function(){return t},set:function(x){t.top=x.top!==undefined?x.top:t.top;t.right=x.right!==undefined?x.right:t.right;t.bottom=x.bottom!==undefined?x.bottom:t.bottom;t.left=x.left!==undefined?x.left:t.left}},duration:{get:function(){return c},set:function(x){c=x;j.reset(c);e.duration(c);n.duration(c);d.duration(c)}},color:{get:function(){return z},set:function(x){z=a.utils.getColor(x);f.color(z);e.color(z)}},rightAlignYAxis:{get:function(){return m},set:function(x){m=x;d.orient(m?"right":"left")}},useInteractiveGuideline:{get:function(){return q},set:function(x){q=x;if(q){e.interactive(false);e.useVoronoi(false)}}}});a.utils.inheritOptions(s,e);a.utils.initOptions(s);return s};a.models.linePlusBarChart=function(){var z=a.models.line(),o=a.models.line(),y=a.models.historicalBar(),E=a.models.historicalBar(),q=a.models.axis(),u=a.models.axis(),m=a.models.axis(),f=a.models.axis(),H=a.models.axis(),r=a.models.axis(),C=a.models.legend(),J=d3.svg.brush(),A=a.models.tooltip();var h={top:30,right:30,bottom:30,left:60},K={top:0,right:30,bottom:20,left:60},c=null,e=null,I=function(x){return x.x},G=function(x){return x.y},t=a.utils.defaultColor(),n=true,L=true,v=false,w=true,D=50,g,i=null,B,l,T,Q,P,O,k=null,F=d3.dispatch("brush","stateChange","changeState"),M=0,S=a.utils.state(),s=null,d=" (left axis)",p=" (right axis)";z.clipEdge(true);o.interactive(false);q.orient("bottom").tickPadding(5);m.orient("left");f.orient("right");u.orient("bottom").tickPadding(5);H.orient("left");r.orient("right");A.headerEnabled(true).headerFormatter(function(U,x){return q.tickFormat()(U,x)});var R=function(x){return function(){return{active:x.map(function(U){return !U.disabled})}}};var j=function(x){return function(U){if(U.active!==undefined){x.forEach(function(W,V){W.disabled=!U.active[V]})}}};function N(x){x.each(function(at){var ae=d3.select(this),Z=this;a.utils.initSVG(ae);var U=a.utils.availableWidth(c,ae,h),aa=a.utils.availableHeight(e,ae,h)-(L?D:0),Y=D-K.top-K.bottom;N.update=function(){ae.transition().duration(M).call(N)};N.container=this;S.setter(j(at),N.update).getter(R(at)).update();S.disabled=at.map(function(av){return !!av.disabled});if(!s){var au;s={};for(au in S){if(S[au] instanceof Array){s[au]=S[au].slice(0)}else{s[au]=S[au]}}}if(!at||!at.length||!at.filter(function(av){return av.values.length}).length){a.utils.noData(N,ae);return N}else{ae.selectAll(".nv-noData").remove()}var V=at.filter(function(av){return !av.disabled&&av.bar});var al=at.filter(function(av){return !av.bar});B=y.xScale();l=u.scale();T=y.yScale();Q=z.yScale();P=E.yScale();O=o.yScale();var ac=at.filter(function(av){return !av.disabled&&av.bar}).map(function(av){return av.values.map(function(ax,aw){return{x:I(ax,aw),y:G(ax,aw)}})});var ab=at.filter(function(av){return !av.disabled&&!av.bar}).map(function(av){return av.values.map(function(ax,aw){return{x:I(ax,aw),y:G(ax,aw)}})});B.range([0,U]);l.domain(d3.extent(d3.merge(ac.concat(ab)),function(av){return av.x})).range([0,U]);var ad=ae.selectAll("g.nv-wrap.nv-linePlusBar").data([at]);var ai=ad.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g");var am=ad.select("g");ai.append("g").attr("class","nv-legendWrap");var X=ai.append("g").attr("class","nv-focus");X.append("g").attr("class","nv-x nv-axis");X.append("g").attr("class","nv-y1 nv-axis");X.append("g").attr("class","nv-y2 nv-axis");X.append("g").attr("class","nv-barsWrap");X.append("g").attr("class","nv-linesWrap");var W=ai.append("g").attr("class","nv-context");W.append("g").attr("class","nv-x nv-axis");W.append("g").attr("class","nv-y1 nv-axis");W.append("g").attr("class","nv-y2 nv-axis");W.append("g").attr("class","nv-barsWrap");W.append("g").attr("class","nv-linesWrap");W.append("g").attr("class","nv-brushBackground");W.append("g").attr("class","nv-x nv-brush");if(n){var ag=C.align()?U/2:U;var ar=C.align()?ag:0;C.width(ag);am.select(".nv-legendWrap").datum(at.map(function(av){av.originalKey=av.originalKey===undefined?av.key:av.originalKey;av.key=av.originalKey+(av.bar?d:p);return av})).call(C);if(h.top!=C.height()){h.top=C.height();aa=a.utils.availableHeight(e,ae,h)-D}am.select(".nv-legendWrap").attr("transform","translate("+ar+","+(-h.top)+")")}ad.attr("transform","translate("+h.left+","+h.top+")");am.select(".nv-context").style("display",L?"initial":"none");E.width(U).height(Y).color(at.map(function(aw,av){return aw.color||t(aw,av)}).filter(function(aw,av){return !at[av].disabled&&at[av].bar}));o.width(U).height(Y).color(at.map(function(aw,av){return aw.color||t(aw,av)}).filter(function(aw,av){return !at[av].disabled&&!at[av].bar}));var an=am.select(".nv-context .nv-barsWrap").datum(V.length?V:[{values:[]}]);var ak=am.select(".nv-context .nv-linesWrap").datum(!al[0].disabled?al:[{values:[]}]);am.select(".nv-context").attr("transform","translate(0,"+(aa+h.bottom+K.top)+")");an.transition().call(E);ak.transition().call(o);if(w){u._ticks(a.utils.calcTicksX(U/100,at)).tickSize(-Y,0);am.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+P.range()[0]+")");am.select(".nv-context .nv-x.nv-axis").transition().call(u)}if(v){H.scale(P)._ticks(Y/36).tickSize(-U,0);r.scale(O)._ticks(Y/36).tickSize(V.length?0:-U,0);am.select(".nv-context .nv-y3.nv-axis").style("opacity",V.length?1:0).attr("transform","translate(0,"+l.range()[0]+")");am.select(".nv-context .nv-y2.nv-axis").style("opacity",al.length?1:0).attr("transform","translate("+l.range()[1]+",0)");am.select(".nv-context .nv-y1.nv-axis").transition().call(H);am.select(".nv-context .nv-y2.nv-axis").transition().call(r)}J.x(l).on("brush",ah);if(i){J.extent(i)}var aq=am.select(".nv-brushBackground").selectAll("g").data([i||J.extent()]);var ao=aq.enter().append("g");ao.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",Y);ao.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",Y);var ap=am.select(".nv-x.nv-brush").call(J);ap.selectAll("rect").attr("height",Y);ap.selectAll(".resize").append("path").attr("d",af);C.dispatch.on("stateChange",function(aw){for(var av in aw){S[av]=aw[av]}F.stateChange(S);N.update()});F.on("changeState",function(av){if(typeof av.disabled!=="undefined"){at.forEach(function(ax,aw){ax.disabled=av.disabled[aw]});S.disabled=av.disabled}N.update()});function af(ax){var aw=+(ax=="e"),av=aw?1:-1,ay=Y/3;return"M"+(0.5*av)+","+ay+"A6,6 0 0 "+aw+" "+(6.5*av)+","+(ay+6)+"V"+(2*ay-6)+"A6,6 0 0 "+aw+" "+(0.5*av)+","+(2*ay)+"ZM"+(2.5*av)+","+(ay+8)+"V"+(2*ay-8)+"M"+(4.5*av)+","+(ay+8)+"V"+(2*ay-8)}function aj(){if(!J.empty()){J.extent(i)}aq.data([J.empty()?l.domain():i]).each(function(ay,av){var aw=l(ay[0])-l.range()[0],ax=l.range()[1]-l(ay[1]);d3.select(this).select(".left").attr("width",aw<0?0:aw);d3.select(this).select(".right").attr("x",l(ay[1])).attr("width",ax<0?0:ax)})}function ah(){i=J.empty()?null:J.extent();g=J.empty()?l.domain():J.extent();F.brush({extent:g,brush:J});aj();y.width(U).height(aa).color(at.map(function(ay,ax){return ay.color||t(ay,ax)}).filter(function(ay,ax){return !at[ax].disabled&&at[ax].bar}));z.width(U).height(aa).color(at.map(function(ay,ax){return ay.color||t(ay,ax)}).filter(function(ay,ax){return !at[ax].disabled&&!at[ax].bar}));var aw=am.select(".nv-focus .nv-barsWrap").datum(!V.length?[{values:[]}]:V.map(function(ay,ax){return{key:ay.key,values:ay.values.filter(function(aA,az){return y.x()(aA,az)>=g[0]&&y.x()(aA,az)<=g[1]})}}));var av=am.select(".nv-focus .nv-linesWrap").datum(al[0].disabled?[{values:[]}]:al.map(function(ay,ax){return{area:ay.area,fillOpacity:ay.fillOpacity,key:ay.key,values:ay.values.filter(function(aA,az){return z.x()(aA,az)>=g[0]&&z.x()(aA,az)<=g[1]})}}));if(V.length){B=y.xScale()}else{B=z.xScale()}q.scale(B)._ticks(a.utils.calcTicksX(U/100,at)).tickSize(-aa,0);q.domain([Math.ceil(g[0]),Math.floor(g[1])]);am.select(".nv-x.nv-axis").transition().duration(M).call(q);aw.transition().duration(M).call(y);av.transition().duration(M).call(z);am.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+T.range()[0]+")");m.scale(T)._ticks(a.utils.calcTicksY(aa/36,at)).tickSize(-U,0);f.scale(Q)._ticks(a.utils.calcTicksY(aa/36,at)).tickSize(V.length?0:-U,0);am.select(".nv-focus .nv-y1.nv-axis").style("opacity",V.length?1:0);am.select(".nv-focus .nv-y2.nv-axis").style("opacity",al.length&&!al[0].disabled?1:0).attr("transform","translate("+B.range()[1]+",0)");am.select(".nv-focus .nv-y1.nv-axis").transition().duration(M).call(m);am.select(".nv-focus .nv-y2.nv-axis").transition().duration(M).call(f)}ah()});return N}z.dispatch.on("elementMouseover.tooltip",function(x){A.duration(100).valueFormatter(function(V,U){return f.tickFormat()(V,U)}).data(x).position(x.pos).hidden(false)});z.dispatch.on("elementMouseout.tooltip",function(x){A.hidden(true)});y.dispatch.on("elementMouseover.tooltip",function(x){x.value=N.x()(x.data);x.series={value:N.y()(x.data),color:x.color};A.duration(0).valueFormatter(function(V,U){return m.tickFormat()(V,U)}).data(x).hidden(false)});y.dispatch.on("elementMouseout.tooltip",function(x){A.hidden(true)});y.dispatch.on("elementMousemove.tooltip",function(x){A.position({top:d3.event.pageY,left:d3.event.pageX})()});N.dispatch=F;N.legend=C;N.lines=z;N.lines2=o;N.bars=y;N.bars2=E;N.xAxis=q;N.x2Axis=u;N.y1Axis=m;N.y2Axis=f;N.y3Axis=H;N.y4Axis=r;N.tooltip=A;N.options=a.utils.optionsFunc.bind(N);N._options=Object.create({},{width:{get:function(){return c},set:function(x){c=x}},height:{get:function(){return e},set:function(x){e=x}},showLegend:{get:function(){return n},set:function(x){n=x}},brushExtent:{get:function(){return i},set:function(x){i=x}},noData:{get:function(){return k},set:function(x){k=x}},focusEnable:{get:function(){return L},set:function(x){L=x}},focusHeight:{get:function(){return D},set:function(x){D=x}},focusShowAxisX:{get:function(){return w},set:function(x){w=x}},focusShowAxisY:{get:function(){return v},set:function(x){v=x}},legendLeftAxisHint:{get:function(){return d},set:function(x){d=x}},legendRightAxisHint:{get:function(){return p},set:function(x){p=x}},tooltips:{get:function(){return A.enabled()},set:function(x){a.deprecated("tooltips","use chart.tooltip.enabled() instead");A.enabled(!!x)}},tooltipContent:{get:function(){return A.contentGenerator()},set:function(x){a.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");A.contentGenerator(x)}},margin:{get:function(){return h},set:function(x){h.top=x.top!==undefined?x.top:h.top;h.right=x.right!==undefined?x.right:h.right;h.bottom=x.bottom!==undefined?x.bottom:h.bottom;h.left=x.left!==undefined?x.left:h.left}},duration:{get:function(){return M},set:function(x){M=x}},color:{get:function(){return t},set:function(x){t=a.utils.getColor(x);C.color(t)}},x:{get:function(){return I},set:function(x){I=x;z.x(x);o.x(x);y.x(x);E.x(x)}},y:{get:function(){return G},set:function(x){G=x;z.y(x);o.y(x);y.y(x);E.y(x)}}});a.utils.inheritOptions(N,z);a.utils.initOptions(N);return N};a.models.lineWithFocusChart=function(){var d=a.models.line(),o=a.models.line(),p=a.models.axis(),c=a.models.axis(),I=a.models.axis(),g=a.models.axis(),e=a.models.legend(),f=d3.svg.brush(),l=a.models.tooltip(),B=a.interactiveGuideline();var z={top:30,right:30,bottom:30,left:60},s={top:0,right:30,bottom:20,left:60},D=a.utils.defaultColor(),C=null,A=null,j=50,t=false,r,q,E,h,G=true,v=null,i=null,H=d3.dispatch("brush","stateChange","changeState"),u=250,k=a.utils.state(),m=null;d.clipEdge(true).duration(0);o.interactive(false);p.orient("bottom").tickPadding(5);c.orient("left");I.orient("bottom").tickPadding(5);g.orient("left");l.valueFormatter(function(y,x){return c.tickFormat()(y,x)}).headerFormatter(function(y,x){return p.tickFormat()(y,x)});var n=function(x){return function(){return{active:x.map(function(y){return !y.disabled})}}};var F=function(x){return function(y){if(y.active!==undefined){x.forEach(function(K,J){K.disabled=!y.active[J]})}}};function w(x){x.each(function(Z){var Q=d3.select(this),N=this;a.utils.initSVG(Q);var y=a.utils.availableWidth(C,Q,z),O=a.utils.availableHeight(A,Q,z)-j,M=j-s.top-s.bottom;w.update=function(){Q.transition().duration(u).call(w)};w.container=this;k.setter(F(Z),w.update).getter(n(Z)).update();k.disabled=Z.map(function(ab){return !!ab.disabled});if(!m){var aa;m={};for(aa in k){if(k[aa] instanceof Array){m[aa]=k[aa].slice(0)}else{m[aa]=k[aa]}}}if(!Z||!Z.length||!Z.filter(function(ab){return ab.values.length}).length){a.utils.noData(w,Q);return w}else{Q.selectAll(".nv-noData").remove()}r=d.xScale();q=d.yScale();E=o.xScale();h=o.yScale();var P=Q.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([Z]);var T=P.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g");var V=P.select("g");T.append("g").attr("class","nv-legendWrap");var L=T.append("g").attr("class","nv-focus");L.append("g").attr("class","nv-x nv-axis");L.append("g").attr("class","nv-y nv-axis");L.append("g").attr("class","nv-linesWrap");L.append("g").attr("class","nv-interactive");var J=T.append("g").attr("class","nv-context");J.append("g").attr("class","nv-x nv-axis");J.append("g").attr("class","nv-y nv-axis");J.append("g").attr("class","nv-linesWrap");J.append("g").attr("class","nv-brushBackground");J.append("g").attr("class","nv-x nv-brush");if(G){e.width(y);V.select(".nv-legendWrap").datum(Z).call(e);if(z.top!=e.height()){z.top=e.height();O=a.utils.availableHeight(A,Q,z)-j}V.select(".nv-legendWrap").attr("transform","translate(0,"+(-z.top)+")")}P.attr("transform","translate("+z.left+","+z.top+")");if(t){B.width(y).height(O).margin({left:z.left,top:z.top}).svgContainer(Q).xScale(r);P.select(".nv-interactive").call(B)}d.width(y).height(O).color(Z.map(function(ac,ab){return ac.color||D(ac,ab)}).filter(function(ac,ab){return !Z[ab].disabled}));o.defined(d.defined()).width(y).height(M).color(Z.map(function(ac,ab){return ac.color||D(ac,ab)}).filter(function(ac,ab){return !Z[ab].disabled}));V.select(".nv-context").attr("transform","translate(0,"+(O+z.bottom+s.top)+")");var K=V.select(".nv-context .nv-linesWrap").datum(Z.filter(function(ab){return !ab.disabled}));d3.transition(K).call(o);p.scale(r)._ticks(a.utils.calcTicksX(y/100,Z)).tickSize(-O,0);c.scale(q)._ticks(a.utils.calcTicksY(O/36,Z)).tickSize(-y,0);V.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+O+")");f.x(E).on("brush",function(){S()});if(v){f.extent(v)}var X=V.select(".nv-brushBackground").selectAll("g").data([v||f.extent()]);var W=X.enter().append("g");W.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",M);W.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",M);var Y=V.select(".nv-x.nv-brush").call(f);Y.selectAll("rect").attr("height",M);Y.selectAll(".resize").append("path").attr("d",R);S();I.scale(E)._ticks(a.utils.calcTicksX(y/100,Z)).tickSize(-M,0);V.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+h.range()[0]+")");d3.transition(V.select(".nv-context .nv-x.nv-axis")).call(I);g.scale(h)._ticks(a.utils.calcTicksY(M/36,Z)).tickSize(-y,0);d3.transition(V.select(".nv-context .nv-y.nv-axis")).call(g);V.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+h.range()[0]+")");e.dispatch.on("stateChange",function(ac){for(var ab in ac){k[ab]=ac[ab]}H.stateChange(k);w.update()});B.dispatch.on("elementMousemove",function(ah){d.clearHighlights();var af,ak,ad,ab=[];Z.filter(function(am,al){am.seriesIndex=al;return !am.disabled}).forEach(function(ao,an){var ap=f.empty()?E.domain():f.extent();var am=ao.values.filter(function(at,ar){return d.x()(at,ar)>=ap[0]&&d.x()(at,ar)<=ap[1]});ak=a.interactiveBisect(am,ah.pointXValue,d.x());var al=am[ak];var aq=w.y()(al,ak);if(aq!=null){d.highlightPoint(an,ak,true)}if(al===undefined){return}if(af===undefined){af=al}if(ad===undefined){ad=w.xScale()(w.x()(al,ak))}ab.push({key:ao.key,value:w.y()(al,ak),color:D(ao,ao.seriesIndex)})});if(ab.length>2){var aj=w.yScale().invert(ah.mouseY);var ac=Math.abs(w.yScale().domain()[0]-w.yScale().domain()[1]);var ag=0.03*ac;var ai=a.nearestValueIndex(ab.map(function(al){return al.value}),aj,ag);if(ai!==null){ab[ai].highlight=true}}var ae=p.tickFormat()(w.x()(af,ak));B.tooltip.position({left:ah.mouseX+z.left,top:ah.mouseY+z.top}).chartContainer(N.parentNode).valueFormatter(function(am,al){return am==null?"N/A":c.tickFormat()(am)}).data({value:ae,index:ak,series:ab})();B.renderGuideLine(ad)});B.dispatch.on("elementMouseout",function(ab){d.clearHighlights()});H.on("changeState",function(ab){if(typeof ab.disabled!=="undefined"){Z.forEach(function(ad,ac){ad.disabled=ab.disabled[ac]})}w.update()});function R(ad){var ac=+(ad=="e"),ab=ac?1:-1,ae=M/3;return"M"+(0.5*ab)+","+ae+"A6,6 0 0 "+ac+" "+(6.5*ab)+","+(ae+6)+"V"+(2*ae-6)+"A6,6 0 0 "+ac+" "+(0.5*ab)+","+(2*ae)+"ZM"+(2.5*ab)+","+(ae+8)+"V"+(2*ae-8)+"M"+(4.5*ab)+","+(ae+8)+"V"+(2*ae-8)}function U(){if(!f.empty()){f.extent(v)}X.data([f.empty()?E.domain():v]).each(function(ae,ab){var ac=E(ae[0])-r.range()[0],ad=y-E(ae[1]);d3.select(this).select(".left").attr("width",ac<0?0:ac);d3.select(this).select(".right").attr("x",E(ae[1])).attr("width",ad<0?0:ad)})}function S(){v=f.empty()?null:f.extent();var ac=f.empty()?E.domain():f.extent();if(Math.abs(ac[0]-ac[1])<=1){return}H.brush({extent:ac,brush:f});U();var ab=V.select(".nv-focus .nv-linesWrap").datum(Z.filter(function(ad){return !ad.disabled}).map(function(ae,ad){return{key:ae.key,area:ae.area,values:ae.values.filter(function(ag,af){return d.x()(ag,af)>=ac[0]&&d.x()(ag,af)<=ac[1]})}}));ab.transition().duration(u).call(d);V.select(".nv-focus .nv-x.nv-axis").transition().duration(u).call(p);V.select(".nv-focus .nv-y.nv-axis").transition().duration(u).call(c)}});return w}d.dispatch.on("elementMouseover.tooltip",function(x){l.data(x).position(x.pos).hidden(false)});d.dispatch.on("elementMouseout.tooltip",function(x){l.hidden(true)});w.dispatch=H;w.legend=e;w.lines=d;w.lines2=o;w.xAxis=p;w.yAxis=c;w.x2Axis=I;w.y2Axis=g;w.interactiveLayer=B;w.tooltip=l;w.options=a.utils.optionsFunc.bind(w);w._options=Object.create({},{width:{get:function(){return C},set:function(x){C=x}},height:{get:function(){return A},set:function(x){A=x}},focusHeight:{get:function(){return j},set:function(x){j=x}},showLegend:{get:function(){return G},set:function(x){G=x}},brushExtent:{get:function(){return v},set:function(x){v=x}},defaultState:{get:function(){return m},set:function(x){m=x}},noData:{get:function(){return i},set:function(x){i=x}},tooltips:{get:function(){return l.enabled()},set:function(x){a.deprecated("tooltips","use chart.tooltip.enabled() instead");l.enabled(!!x)}},tooltipContent:{get:function(){return l.contentGenerator()},set:function(x){a.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");l.contentGenerator(x)}},margin:{get:function(){return z},set:function(x){z.top=x.top!==undefined?x.top:z.top;z.right=x.right!==undefined?x.right:z.right;z.bottom=x.bottom!==undefined?x.bottom:z.bottom;z.left=x.left!==undefined?x.left:z.left}},color:{get:function(){return D},set:function(x){D=a.utils.getColor(x);e.color(D)}},interpolate:{get:function(){return d.interpolate()},set:function(x){d.interpolate(x);o.interpolate(x)}},xTickFormat:{get:function(){return p.tickFormat()},set:function(x){p.tickFormat(x);I.tickFormat(x)}},yTickFormat:{get:function(){return c.tickFormat()},set:function(x){c.tickFormat(x);g.tickFormat(x)}},duration:{get:function(){return u},set:function(x){u=x;c.duration(u);g.duration(u);p.duration(u);I.duration(u)}},x:{get:function(){return d.x()},set:function(x){d.x(x);o.x(x)}},y:{get:function(){return d.y()},set:function(x){d.y(x);o.y(x)}},useInteractiveGuideline:{get:function(){return t},set:function(x){t=x;if(t){d.interactive(false);d.useVoronoi(false)}}}});a.utils.inheritOptions(w,d);a.utils.initOptions(w);return w};a.models.multiBar=function(){var o={top:0,right:0,bottom:0,left:0},t=960,p=500,j=d3.scale.ordinal(),i=d3.scale.linear(),q=Math.floor(Math.random()*10000),k=null,B=function(x){return x.x},z=function(x){return x.y},e=[0],D=true,C=false,h="zero",w=a.utils.defaultColor(),E=false,r=null,f,c=500,v,s,n,u,G=0.1,F=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd");var A,d,g=a.utils.renderWatch(F,c);var m=0;function l(x){g.reset();x.each(function(R){var W=t-o.left-o.right,N=p-o.top-o.bottom;k=d3.select(this);a.utils.initSVG(k);var S=0;var K=function(Y,X){if(Y.series===R.length-1&&X===R[0].values.length-1){return true}return false};if(E&&R.length){E=[{values:R[0].values.map(function(X){return{x:X.x,y:0,series:X.series,size:0.01}})}]}if(C){var U=d3.layout.stack().offset(h).values(function(X){return X.values}).y(z)(!R.length&&E?E:R);U.forEach(function(Y,X){if(Y.nonStackable){R[X].nonStackableSeries=S++;U[X]=R[X]}else{if(X>0&&U[X-1].nonStackable){U[X].values.map(function(aa,Z){aa.y0-=U[X-1].values[Z].y;aa.y1=aa.y0+aa.y})}}});R=U}R.forEach(function(Y,X){Y.values.forEach(function(Z){Z.series=X;Z.key=Y.key})});if(C){R[0].values.map(function(Z,X){var aa=0,Y=0;R.map(function(ad,ab){if(!R[ab].nonStackable){var ac=ad.values[X];ac.size=Math.abs(ac.y);if(ac.y<0){ac.y1=Y;Y=Y-ac.size}else{ac.y1=ac.size+aa;aa=aa+ac.size}}})})}var L=(v&&s)?[]:R.map(function(Y,X){return Y.values.map(function(aa,Z){return{x:B(aa,Z),y:z(aa,Z),y0:aa.y0,y1:aa.y1,idx:X}})});j.domain(v||d3.merge(L).map(function(X){return X.x})).rangeBands(n||[0,W],G);i.domain(s||d3.extent(d3.merge(L).map(function(Y){var X=Y.y;if(C&&!R[Y.idx].nonStackable){if(Y.y>0){X=Y.y1}else{X=Y.y1+Y.y}}return X}).concat(e))).range(u||[N,0]);if(j.domain()[0]===j.domain()[1]){j.domain()[0]?j.domain([j.domain()[0]-j.domain()[0]*0.01,j.domain()[1]+j.domain()[1]*0.01]):j.domain([-1,1])}if(i.domain()[0]===i.domain()[1]){i.domain()[0]?i.domain([i.domain()[0]+i.domain()[0]*0.01,i.domain()[1]-i.domain()[1]*0.01]):i.domain([-1,1])}A=A||j;d=d||i;var J=k.selectAll("g.nv-wrap.nv-multibar").data([R]);var P=J.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar");var M=P.append("defs");var H=P.append("g");var T=J.select("g");H.append("g").attr("class","nv-groups");J.attr("transform","translate("+o.left+","+o.top+")");M.append("clipPath").attr("id","nv-edge-clip-"+q).append("rect");J.select("#nv-edge-clip-"+q+" rect").attr("width",W).attr("height",N);T.attr("clip-path",D?"url(#nv-edge-clip-"+q+")":"");var O=J.select(".nv-groups").selectAll(".nv-group").data(function(X){return X},function(Y,X){return X});O.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001);var y=g.transition(O.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,c)).attr("y",function(aa,Y,X){var Z=d(0)||0;if(C){if(R[aa.series]&&!R[aa.series].nonStackable){Z=d(aa.y0)}}return Z}).attr("height",0).remove();if(y.delay){y.delay(function(Z,Y){var X=Y*(c/(m+1))-Y;return X})}O.attr("class",function(Y,X){return"nv-group nv-series-"+X}).classed("hover",function(X){return X.hover}).style("fill",function(Y,X){return w(Y,X)}).style("stroke",function(Y,X){return w(Y,X)});O.style("stroke-opacity",1).style("fill-opacity",0.75);var V=O.selectAll("rect.nv-bar").data(function(X){return(E&&!R.length)?E.values:X.values});V.exit().remove();var Q=V.enter().append("rect").attr("class",function(Y,X){return z(Y,X)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(Z,Y,X){return C&&!R[X].nonStackable?0:(X*j.rangeBand()/R.length)}).attr("y",function(Z,Y,X){return d(C&&!R[X].nonStackable?Z.y0:0)||0}).attr("height",0).attr("width",function(Z,Y,X){return j.rangeBand()/(C&&!R[X].nonStackable?1:R.length)}).attr("transform",function(Y,X){return"translate("+j(B(Y,X))+",0)"});V.style("fill",function(Z,Y,X){return w(Z,X,Y)}).style("stroke",function(Z,Y,X){return w(Z,X,Y)}).on("mouseover",function(Y,X){d3.select(this).classed("hover",true);F.elementMouseover({data:Y,index:X,color:d3.select(this).style("fill")})}).on("mouseout",function(Y,X){d3.select(this).classed("hover",false);F.elementMouseout({data:Y,index:X,color:d3.select(this).style("fill")})}).on("mousemove",function(Y,X){F.elementMousemove({data:Y,index:X,color:d3.select(this).style("fill")})}).on("click",function(Y,X){F.elementClick({data:Y,index:X,color:d3.select(this).style("fill")});d3.event.stopPropagation()}).on("dblclick",function(Y,X){F.elementDblClick({data:Y,index:X,color:d3.select(this).style("fill")});d3.event.stopPropagation()});V.attr("class",function(Y,X){return z(Y,X)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(Y,X){return"translate("+j(B(Y,X))+",0)"});if(r){if(!f){f=R.map(function(){return true})}V.style("fill",function(Z,Y,X){return d3.rgb(r(Z,Y)).darker(f.map(function(ab,aa){return aa}).filter(function(ab,aa){return !f[aa]})[X]).toString()}).style("stroke",function(Z,Y,X){return d3.rgb(r(Z,Y)).darker(f.map(function(ab,aa){return aa}).filter(function(ab,aa){return !f[aa]})[X]).toString()})}var I=V.watchTransition(g,"multibar",Math.min(250,c)).delay(function(Y,X){return X*c/R[0].values.length});if(C){I.attr("y",function(aa,Y,X){var Z=0;if(!R[X].nonStackable){Z=i(aa.y1)}else{if(z(aa,Y)<0){Z=i(0)}else{if(i(0)-i(z(aa,Y))<-1){Z=i(0)-1}else{Z=i(z(aa,Y))||0}}}return Z}).attr("height",function(Z,Y,X){if(!R[X].nonStackable){return Math.max(Math.abs(i(Z.y+Z.y0)-i(Z.y0)),1)}else{return Math.max(Math.abs(i(z(Z,Y))-i(0)),1)||0}}).attr("x",function(aa,Y,X){var Z=0;if(R[X].nonStackable){Z=aa.series*j.rangeBand()/R.length;if(R.length!==S){Z=R[X].nonStackableSeries*j.rangeBand()/(S*2)}}return Z}).attr("width",function(aa,Y,X){if(!R[X].nonStackable){return j.rangeBand()}else{var Z=(j.rangeBand()/S);if(R.length!==S){Z=j.rangeBand()/(S*2)}return Z}})}else{I.attr("x",function(Y,X){return Y.series*j.rangeBand()/R.length}).attr("width",j.rangeBand()/R.length).attr("y",function(Y,X){return z(Y,X)<0?i(0):i(0)-i(z(Y,X))<1?i(0)-1:i(z(Y,X))||0}).attr("height",function(Y,X){return Math.max(Math.abs(i(z(Y,X))-i(0)),1)||0})}A=j.copy();d=i.copy();if(R[0]&&R[0].values){m=R[0].values.length}});g.renderEnd("multibar immediate");return l}l.dispatch=F;l.options=a.utils.optionsFunc.bind(l);l._options=Object.create({},{width:{get:function(){return t},set:function(x){t=x}},height:{get:function(){return p},set:function(x){p=x}},x:{get:function(){return B},set:function(x){B=x}},y:{get:function(){return z},set:function(x){z=x}},xScale:{get:function(){return j},set:function(x){j=x}},yScale:{get:function(){return i},set:function(x){i=x}},xDomain:{get:function(){return v},set:function(x){v=x}},yDomain:{get:function(){return s},set:function(x){s=x}},xRange:{get:function(){return n},set:function(x){n=x}},yRange:{get:function(){return u},set:function(x){u=x}},forceY:{get:function(){return e},set:function(x){e=x}},stacked:{get:function(){return C},set:function(x){C=x}},stackOffset:{get:function(){return h},set:function(x){h=x}},clipEdge:{get:function(){return D},set:function(x){D=x}},disabled:{get:function(){return f},set:function(x){f=x}},id:{get:function(){return q},set:function(x){q=x}},hideable:{get:function(){return E},set:function(x){E=x}},groupSpacing:{get:function(){return G},set:function(x){G=x}},margin:{get:function(){return o},set:function(x){o.top=x.top!==undefined?x.top:o.top;o.right=x.right!==undefined?x.right:o.right;o.bottom=x.bottom!==undefined?x.bottom:o.bottom;o.left=x.left!==undefined?x.left:o.left}},duration:{get:function(){return c},set:function(x){c=x;g.reset(c)}},color:{get:function(){return w},set:function(x){w=a.utils.getColor(x)}},barColor:{get:function(){return r},set:function(x){r=x?a.utils.getColor(x):null}}});a.utils.initOptions(l);return l};a.models.multiBarChart=function(){var h=a.models.multiBar(),q=a.models.axis(),e=a.models.axis(),g=a.models.legend(),v=a.models.legend(),l=a.models.tooltip();var z={top:30,right:20,bottom:50,left:60},B=null,A=null,C=a.utils.defaultColor(),I=true,D={},F=true,H=true,t=true,p=false,u=true,f=false,i=0,s,r,k=a.utils.state(),n=null,j=null,J=d3.dispatch("stateChange","changeState","renderEnd"),d=function(){return I?180:0},c=250;k.stacked=false;h.stacked(false);q.orient("bottom").tickPadding(7).showMaxMin(false).tickFormat(function(x){return x});e.orient((p)?"right":"left").tickFormat(d3.format(",.1f"));l.duration(0).valueFormatter(function(y,x){return e.tickFormat()(y,x)}).headerFormatter(function(y,x){return q.tickFormat()(y,x)});v.updateState(false);var m=a.utils.renderWatch(J);var G=false;var o=function(x){return function(){return{active:x.map(function(y){return !y.disabled}),stacked:G}}};var E=function(x){return function(y){if(y.stacked!==undefined){G=y.stacked}if(y.active!==undefined){x.forEach(function(L,K){L.disabled=!y.active[K]})}}};function w(x){m.reset();m.models(h);if(H){m.models(q)}if(t){m.models(e)}x.each(function(R){var L=d3.select(this),U=this;a.utils.initSVG(L);var Y=a.utils.availableWidth(B,L,z),N=a.utils.availableHeight(A,L,z);w.update=function(){if(c===0){L.call(w)}else{L.transition().duration(c).call(w)}};w.container=this;k.setter(E(R),w.update).getter(o(R)).update();k.disabled=R.map(function(Z){return !!Z.disabled});if(!n){var X;n={};for(X in k){if(k[X] instanceof Array){n[X]=k[X].slice(0)}else{n[X]=k[X]}}}if(!R||!R.length||!R.filter(function(Z){return Z.values.length}).length){a.utils.noData(w,L);return w}else{L.selectAll(".nv-noData").remove()}s=h.xScale();r=h.yScale();var M=L.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([R]);var y=M.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g");var S=M.select("g");y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class","nv-y nv-axis");y.append("g").attr("class","nv-barsWrap");y.append("g").attr("class","nv-legendWrap");y.append("g").attr("class","nv-controlsWrap");if(F){g.width(Y-d());S.select(".nv-legendWrap").datum(R).call(g);if(z.top!=g.height()){z.top=g.height();N=a.utils.availableHeight(A,L,z)}S.select(".nv-legendWrap").attr("transform","translate("+d()+","+(-z.top)+")")}if(I){var V=[{key:D.grouped||"Grouped",disabled:h.stacked()},{key:D.stacked||"Stacked",disabled:!h.stacked()}];v.width(d()).color(["#444","#444","#444"]);S.select(".nv-controlsWrap").datum(V).attr("transform","translate(0,"+(-z.top)+")").call(v)}M.attr("transform","translate("+z.left+","+z.top+")");if(p){S.select(".nv-y.nv-axis").attr("transform","translate("+Y+",0)")}h.disabled(R.map(function(Z){return Z.disabled})).width(Y).height(N).color(R.map(function(aa,Z){return aa.color||C(aa,Z)}).filter(function(aa,Z){return !R[Z].disabled}));var T=S.select(".nv-barsWrap").datum(R.filter(function(Z){return !Z.disabled}));T.call(h);if(H){q.scale(s)._ticks(a.utils.calcTicksX(Y/100,R)).tickSize(-N,0);S.select(".nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")");S.select(".nv-x.nv-axis").call(q);var Q=S.select(".nv-x.nv-axis > g").selectAll("g");Q.selectAll("line, text").style("opacity",1);if(f){var W=function(Z,aa){return"translate("+Z+","+aa+")"};var K=5,P=17;Q.selectAll("text").attr("transform",function(ab,aa,Z){return W(0,(Z%2==0?K:P))});var O=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;S.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(aa,Z){return W(0,(Z===0||O%2!==0)?P:K)})}if(u){Q.filter(function(aa,Z){return Z%Math.ceil(R[0].values.length/(Y/100))!==0}).selectAll("text, line").style("opacity",0)}if(i){Q.selectAll(".tick text").attr("transform","rotate("+i+" 0,0)").style("text-anchor",i>0?"start":"end")}S.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}if(t){e.scale(r)._ticks(a.utils.calcTicksY(N/36,R)).tickSize(-Y,0);S.select(".nv-y.nv-axis").call(e)}g.dispatch.on("stateChange",function(aa){for(var Z in aa){k[Z]=aa[Z]}J.stateChange(k);w.update()});v.dispatch.on("legendClick",function(aa,Z){if(!aa.disabled){return}V=V.map(function(ab){ab.disabled=true;return ab});aa.disabled=false;switch(aa.key){case"Grouped":case D.grouped:h.stacked(false);break;case"Stacked":case D.stacked:h.stacked(true);break}k.stacked=h.stacked();J.stateChange(k);w.update()});J.on("changeState",function(Z){if(typeof Z.disabled!=="undefined"){R.forEach(function(ab,aa){ab.disabled=Z.disabled[aa]});k.disabled=Z.disabled}if(typeof Z.stacked!=="undefined"){h.stacked(Z.stacked);k.stacked=Z.stacked;G=Z.stacked}w.update()})});m.renderEnd("multibarchart immediate");return w}h.dispatch.on("elementMouseover.tooltip",function(x){x.value=w.x()(x.data);x.series={key:x.data.key,value:w.y()(x.data),color:x.color};l.data(x).hidden(false)});h.dispatch.on("elementMouseout.tooltip",function(x){l.hidden(true)});h.dispatch.on("elementMousemove.tooltip",function(x){l.position({top:d3.event.pageY,left:d3.event.pageX})()});w.dispatch=J;w.multibar=h;w.legend=g;w.controls=v;w.xAxis=q;w.yAxis=e;w.state=k;w.tooltip=l;w.options=a.utils.optionsFunc.bind(w);w._options=Object.create({},{width:{get:function(){return B},set:function(x){B=x}},height:{get:function(){return A},set:function(x){A=x}},showLegend:{get:function(){return F},set:function(x){F=x}},showControls:{get:function(){return I},set:function(x){I=x}},controlLabels:{get:function(){return D},set:function(x){D=x}},showXAxis:{get:function(){return H},set:function(x){H=x}},showYAxis:{get:function(){return t},set:function(x){t=x}},defaultState:{get:function(){return n},set:function(x){n=x}},noData:{get:function(){return j},set:function(x){j=x}},reduceXTicks:{get:function(){return u},set:function(x){u=x}},rotateLabels:{get:function(){return i},set:function(x){i=x}},staggerLabels:{get:function(){return f},set:function(x){f=x}},tooltips:{get:function(){return l.enabled()},set:function(x){a.deprecated("tooltips","use chart.tooltip.enabled() instead");l.enabled(!!x)}},tooltipContent:{get:function(){return l.contentGenerator()},set:function(x){a.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");l.contentGenerator(x)}},margin:{get:function(){return z},set:function(x){z.top=x.top!==undefined?x.top:z.top;z.right=x.right!==undefined?x.right:z.right;z.bottom=x.bottom!==undefined?x.bottom:z.bottom;z.left=x.left!==undefined?x.left:z.left}},duration:{get:function(){return c},set:function(x){c=x;h.duration(c);q.duration(c);e.duration(c);m.reset(c)}},color:{get:function(){return C},set:function(x){C=a.utils.getColor(x);g.color(C)}},rightAlignYAxis:{get:function(){return p},set:function(x){p=x;e.orient(p?"right":"left")}},barColor:{get:function(){return h.barColor},set:function(x){h.barColor(x);g.color(function(K,y){return d3.rgb("#ccc").darker(y*1.5).toString()})}}});a.utils.inheritOptions(w,h);a.utils.initOptions(w);return w};a.models.multiBarHorizontal=function(){var o={top:0,right:0,bottom:0,left:0},t=960,p=500,q=Math.floor(Math.random()*10000),l=null,j=d3.scale.ordinal(),i=d3.scale.linear(),C=function(x){return x.x},z=function(x){return x.y},A=function(x){return x.yErr},e=[0],w=a.utils.defaultColor(),r=null,f,E=false,D=false,F=false,k=60,I=0.1,h=d3.format(",.2f"),G=1200,v,s,n,u,c=250,H=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd");var B,d;var g=a.utils.renderWatch(H,c);function m(x){g.reset();x.each(function(Q){var T=t-o.left-o.right,L=p-o.top-o.bottom;l=d3.select(this);a.utils.initSVG(l);if(E){Q=d3.layout.stack().offset("zero").values(function(U){return U.values}).y(z)(Q)}Q.forEach(function(V,U){V.values.forEach(function(W){W.series=U;W.key=V.key})});if(E){Q[0].values.map(function(W,U){var X=0,V=0;Q.map(function(Z){var Y=Z.values[U];Y.size=Math.abs(Y.y);if(Y.y<0){Y.y1=V-Y.size;V=V-Y.size}else{Y.y1=X;X=X+Y.size}})})}var K=(v&&s)?[]:Q.map(function(U){return U.values.map(function(W,V){return{x:C(W,V),y:z(W,V),y0:W.y0,y1:W.y1}})});j.domain(v||d3.merge(K).map(function(U){return U.x})).rangeBands(n||[0,L],I);i.domain(s||d3.extent(d3.merge(K).map(function(U){return E?(U.y>0?U.y1+U.y:U.y1):U.y}).concat(e)));if(D&&!E){i.range(u||[(i.domain()[0]<0?k:0),T-(i.domain()[1]>0?k:0)])}else{i.range(u||[0,T])}B=B||j;d=d||d3.scale.linear().domain(i.domain()).range([i(0),i(0)]);var J=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([Q]);var O=J.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal");var M=O.append("defs");var y=O.append("g");var R=J.select("g");y.append("g").attr("class","nv-groups");J.attr("transform","translate("+o.left+","+o.top+")");var N=J.select(".nv-groups").selectAll(".nv-group").data(function(U){return U},function(V,U){return U});N.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001);N.exit().watchTransition(g,"multibarhorizontal: exit groups").style("stroke-opacity",0.000001).style("fill-opacity",0.000001).remove();N.attr("class",function(V,U){return"nv-group nv-series-"+U}).classed("hover",function(U){return U.hover}).style("fill",function(V,U){return w(V,U)}).style("stroke",function(V,U){return w(V,U)});N.watchTransition(g,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",0.75);var S=N.selectAll("g.nv-bar").data(function(U){return U.values});S.exit().remove();var P=S.enter().append("g").attr("transform",function(W,V,U){return"translate("+d(E?W.y0:0)+","+(E?0:(U*j.rangeBand()/Q.length)+j(C(W,V)))+")"});P.append("rect").attr("width",0).attr("height",j.rangeBand()/(E?1:Q.length));S.on("mouseover",function(V,U){d3.select(this).classed("hover",true);H.elementMouseover({data:V,index:U,color:d3.select(this).style("fill")})}).on("mouseout",function(V,U){d3.select(this).classed("hover",false);H.elementMouseout({data:V,index:U,color:d3.select(this).style("fill")})}).on("mouseout",function(V,U){H.elementMouseout({data:V,index:U,color:d3.select(this).style("fill")})}).on("mousemove",function(V,U){H.elementMousemove({data:V,index:U,color:d3.select(this).style("fill")})}).on("click",function(V,U){H.elementClick({data:V,index:U,color:d3.select(this).style("fill")});d3.event.stopPropagation()}).on("dblclick",function(V,U){H.elementDblClick({data:V,index:U,color:d3.select(this).style("fill")});d3.event.stopPropagation()});if(A(Q[0],0)){P.append("polyline");S.select("polyline").attr("fill","none").attr("points",function(Y,W){var X=A(Y,W),V=0.8*j.rangeBand()/((E?1:Q.length)*2);X=X.length?X:[-Math.abs(X),Math.abs(X)];X=X.map(function(Z){return i(Z)-i(0)});var U=[[X[0],-V],[X[0],V],[X[0],0],[X[1],0],[X[1],-V],[X[1],V]];return U.map(function(Z){return Z.join(",")}).join(" ")}).attr("transform",function(W,V){var U=j.rangeBand()/((E?1:Q.length)*2);return"translate("+(z(W,V)<0?0:i(z(W,V))-i(0))+", "+U+")"})}P.append("text");if(D&&!E){S.select("text").attr("text-anchor",function(V,U){return z(V,U)<0?"end":"start"}).attr("y",j.rangeBand()/(Q.length*2)).attr("dy",".32em").text(function(X,V){var U=h(z(X,V)),W=A(X,V);if(W===undefined){return U}if(!W.length){return U+""+h(Math.abs(W))}return U+"+"+h(Math.abs(W[1]))+"-"+h(Math.abs(W[0]))});S.watchTransition(g,"multibarhorizontal: bars").select("text").attr("x",function(V,U){return z(V,U)<0?-4:i(z(V,U))-i(0)+4})}else{S.selectAll("text").text("")}if(F&&!E){P.append("text").classed("nv-bar-label",true);S.select("text.nv-bar-label").attr("text-anchor",function(V,U){return z(V,U)<0?"start":"end"}).attr("y",j.rangeBand()/(Q.length*2)).attr("dy",".32em").text(function(V,U){return C(V,U)});S.watchTransition(g,"multibarhorizontal: bars").select("text.nv-bar-label").attr("x",function(V,U){return z(V,U)<0?i(0)-i(z(V,U))+4:-4})}else{S.selectAll("text.nv-bar-label").text("")}S.attr("class",function(V,U){return z(V,U)<0?"nv-bar negative":"nv-bar positive"});if(r){if(!f){f=Q.map(function(){return true})}S.style("fill",function(W,V,U){return d3.rgb(r(W,V)).darker(f.map(function(Y,X){return X}).filter(function(Y,X){return !f[X]})[U]).toString()}).style("stroke",function(W,V,U){return d3.rgb(r(W,V)).darker(f.map(function(Y,X){return X}).filter(function(Y,X){return !f[X]})[U]).toString()})}if(E){S.watchTransition(g,"multibarhorizontal: bars").attr("transform",function(V,U){return"translate("+i(V.y1)+","+j(C(V,U))+")"}).select("rect").attr("width",function(V,U){return Math.abs(i(z(V,U)+V.y0)-i(V.y0))}).attr("height",j.rangeBand())}else{S.watchTransition(g,"multibarhorizontal: bars").attr("transform",function(V,U){return"translate("+(z(V,U)<0?i(z(V,U)):i(0))+","+(V.series*j.rangeBand()/Q.length+j(C(V,U)))+")"}).select("rect").attr("height",j.rangeBand()/Q.length).attr("width",function(V,U){return Math.max(Math.abs(i(z(V,U))-i(0)),1)})}B=j.copy();d=i.copy()});g.renderEnd("multibarHorizontal immediate");return m}m.dispatch=H;m.options=a.utils.optionsFunc.bind(m);m._options=Object.create({},{width:{get:function(){return t},set:function(x){t=x}},height:{get:function(){return p},set:function(x){p=x}},x:{get:function(){return C},set:function(x){C=x}},y:{get:function(){return z},set:function(x){z=x}},yErr:{get:function(){return A},set:function(x){A=x}},xScale:{get:function(){return j},set:function(x){j=x}},yScale:{get:function(){return i},set:function(x){i=x}},xDomain:{get:function(){return v},set:function(x){v=x}},yDomain:{get:function(){return s},set:function(x){s=x}},xRange:{get:function(){return n},set:function(x){n=x}},yRange:{get:function(){return u},set:function(x){u=x}},forceY:{get:function(){return e},set:function(x){e=x}},stacked:{get:function(){return E},set:function(x){E=x}},showValues:{get:function(){return D},set:function(x){D=x}},disabled:{get:function(){return f},set:function(x){f=x}},id:{get:function(){return q},set:function(x){q=x}},valueFormat:{get:function(){return h},set:function(x){h=x}},valuePadding:{get:function(){return k},set:function(x){k=x}},groupSpacing:{get:function(){return I},set:function(x){I=x}},margin:{get:function(){return o},set:function(x){o.top=x.top!==undefined?x.top:o.top;o.right=x.right!==undefined?x.right:o.right;o.bottom=x.bottom!==undefined?x.bottom:o.bottom;o.left=x.left!==undefined?x.left:o.left}},duration:{get:function(){return c},set:function(x){c=x;g.reset(c)}},color:{get:function(){return w},set:function(x){w=a.utils.getColor(x)}},barColor:{get:function(){return r},set:function(x){r=x?a.utils.getColor(x):null}}});a.utils.initOptions(m);return m};a.models.multiBarHorizontalChart=function(){var g=a.models.multiBarHorizontal(),n=a.models.axis(),e=a.models.axis(),f=a.models.legend().height(30),r=a.models.legend().height(30),j=a.models.tooltip();var t={top:30,right:20,bottom:50,left:60},v=null,u=null,w=a.utils.defaultColor(),E=true,z={},B=true,C=true,q=true,D=false,p,o,i=a.utils.state(),l=null,h=null,F=d3.dispatch("stateChange","changeState","renderEnd"),d=function(){return E?180:0},c=250;i.stacked=false;g.stacked(D);n.orient("left").tickPadding(5).showMaxMin(false).tickFormat(function(x){return x});e.orient("bottom").tickFormat(d3.format(",.1f"));j.duration(0).valueFormatter(function(y,x){return e.tickFormat()(y,x)}).headerFormatter(function(y,x){return n.tickFormat()(y,x)});r.updateState(false);var m=function(x){return function(){return{active:x.map(function(y){return !y.disabled}),stacked:D}}};var A=function(x){return function(y){if(y.stacked!==undefined){D=y.stacked}if(y.active!==undefined){x.forEach(function(H,G){H.disabled=!y.active[G]})}}};var k=a.utils.renderWatch(F,c);function s(x){k.reset();k.models(g);if(C){k.models(n)}if(q){k.models(e)}x.each(function(K){var G=d3.select(this),N=this;a.utils.initSVG(G);var Q=a.utils.availableWidth(v,G,t),I=a.utils.availableHeight(u,G,t);s.update=function(){G.transition().duration(c).call(s)};s.container=this;D=g.stacked();i.setter(A(K),s.update).getter(m(K)).update();i.disabled=K.map(function(R){return !!R.disabled});if(!l){var P;l={};for(P in i){if(i[P] instanceof Array){l[P]=i[P].slice(0)}else{l[P]=i[P]}}}if(!K||!K.length||!K.filter(function(R){return R.values.length}).length){a.utils.noData(s,G);return s}else{G.selectAll(".nv-noData").remove()}p=g.xScale();o=g.yScale();var H=G.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([K]);var y=H.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g");var L=H.select("g");y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");y.append("g").attr("class","nv-barsWrap");y.append("g").attr("class","nv-legendWrap");y.append("g").attr("class","nv-controlsWrap");if(B){f.width(Q-d());L.select(".nv-legendWrap").datum(K).call(f);if(t.top!=f.height()){t.top=f.height();I=a.utils.availableHeight(u,G,t)}L.select(".nv-legendWrap").attr("transform","translate("+d()+","+(-t.top)+")")}if(E){var O=[{key:z.grouped||"Grouped",disabled:g.stacked()},{key:z.stacked||"Stacked",disabled:!g.stacked()}];r.width(d()).color(["#444","#444","#444"]);L.select(".nv-controlsWrap").datum(O).attr("transform","translate(0,"+(-t.top)+")").call(r)}H.attr("transform","translate("+t.left+","+t.top+")");g.disabled(K.map(function(R){return R.disabled})).width(Q).height(I).color(K.map(function(S,R){return S.color||w(S,R)}).filter(function(S,R){return !K[R].disabled}));var M=L.select(".nv-barsWrap").datum(K.filter(function(R){return !R.disabled}));M.transition().call(g);if(C){n.scale(p)._ticks(a.utils.calcTicksY(I/24,K)).tickSize(-Q,0);L.select(".nv-x.nv-axis").call(n);var J=L.select(".nv-x.nv-axis").selectAll("g");J.selectAll("line, text")}if(q){e.scale(o)._ticks(a.utils.calcTicksX(Q/100,K)).tickSize(-I,0);L.select(".nv-y.nv-axis").attr("transform","translate(0,"+I+")");L.select(".nv-y.nv-axis").call(e)}L.select(".nv-zeroLine line").attr("x1",o(0)).attr("x2",o(0)).attr("y1",0).attr("y2",-I);f.dispatch.on("stateChange",function(S){for(var R in S){i[R]=S[R]}F.stateChange(i);s.update()});r.dispatch.on("legendClick",function(S,R){if(!S.disabled){return}O=O.map(function(T){T.disabled=true;return T});S.disabled=false;switch(S.key){case"Grouped":g.stacked(false);break;case"Stacked":g.stacked(true);break}i.stacked=g.stacked();F.stateChange(i);D=g.stacked();s.update()});F.on("changeState",function(R){if(typeof R.disabled!=="undefined"){K.forEach(function(T,S){T.disabled=R.disabled[S]});i.disabled=R.disabled}if(typeof R.stacked!=="undefined"){g.stacked(R.stacked);i.stacked=R.stacked;D=R.stacked}s.update()})});k.renderEnd("multibar horizontal chart immediate");return s}g.dispatch.on("elementMouseover.tooltip",function(x){x.value=s.x()(x.data);x.series={key:x.data.key,value:s.y()(x.data),color:x.color};j.data(x).hidden(false)});g.dispatch.on("elementMouseout.tooltip",function(x){j.hidden(true)});g.dispatch.on("elementMousemove.tooltip",function(x){j.position({top:d3.event.pageY,left:d3.event.pageX})()});s.dispatch=F;s.multibar=g;s.legend=f;s.controls=r;s.xAxis=n;s.yAxis=e;s.state=i;s.tooltip=j;s.options=a.utils.optionsFunc.bind(s);s._options=Object.create({},{width:{get:function(){return v},set:function(x){v=x}},height:{get:function(){return u},set:function(x){u=x}},showLegend:{get:function(){return B},set:function(x){B=x}},showControls:{get:function(){return E},set:function(x){E=x}},controlLabels:{get:function(){return z},set:function(x){z=x}},showXAxis:{get:function(){return C},set:function(x){C=x}},showYAxis:{get:function(){return q},set:function(x){q=x}},defaultState:{get:function(){return l},set:function(x){l=x}},noData:{get:function(){return h},set:function(x){h=x}},tooltips:{get:function(){return j.enabled()},set:function(x){a.deprecated("tooltips","use chart.tooltip.enabled() instead");j.enabled(!!x)}},tooltipContent:{get:function(){return j.contentGenerator()},set:function(x){a.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");j.contentGenerator(x)}},margin:{get:function(){return t},set:function(x){t.top=x.top!==undefined?x.top:t.top;t.right=x.right!==undefined?x.right:t.right;t.bottom=x.bottom!==undefined?x.bottom:t.bottom;t.left=x.left!==undefined?x.left:t.left}},duration:{get:function(){return c},set:function(x){c=x;k.reset(c);g.duration(c);n.duration(c);e.duration(c)}},color:{get:function(){return w},set:function(x){w=a.utils.getColor(x);f.color(w)}},barColor:{get:function(){return g.barColor},set:function(x){g.barColor(x);f.color(function(G,y){return d3.rgb("#ccc").darker(y*1.5).toString()})}}});a.utils.inheritOptions(s,g);a.utils.initOptions(s);return s};a.models.multiChart=function(){var t={top:30,right:20,bottom:50,left:60},w=a.utils.defaultColor(),v=null,u=null,z=true,h=null,m,l,A=function(x){return x.x},y=function(x){return x.y},n="monotone",D=true;var r=d3.scale.linear(),C=d3.scale.linear(),B=d3.scale.linear(),p=a.models.line().yScale(C),o=a.models.line().yScale(B),g=a.models.multiBar().stacked(false).yScale(C),e=a.models.multiBar().stacked(false).yScale(B),k=a.models.stackedArea().yScale(C),j=a.models.stackedArea().yScale(B),q=a.models.axis().scale(r).orient("bottom").tickPadding(5),d=a.models.axis().scale(C).orient("left"),c=a.models.axis().scale(B).orient("right"),f=a.models.legend().height(30),i=a.models.tooltip(),E=d3.dispatch();function s(x){x.each(function(ai){var T=d3.select(this),L=this;a.utils.initSVG(T);s.update=function(){T.transition().call(s)};s.container=this;var F=a.utils.availableWidth(v,T,t),H=a.utils.availableHeight(u,T,t);var W=ai.filter(function(aj){return aj.type=="line"&&aj.yAxis==1});var V=ai.filter(function(aj){return aj.type=="line"&&aj.yAxis==2});var ac=ai.filter(function(aj){return aj.type=="bar"&&aj.yAxis==1});var ab=ai.filter(function(aj){return aj.type=="bar"&&aj.yAxis==2});var S=ai.filter(function(aj){return aj.type=="area"&&aj.yAxis==1});var Q=ai.filter(function(aj){return aj.type=="area"&&aj.yAxis==2});if(!ai||!ai.length||!ai.filter(function(aj){return aj.values.length}).length){a.utils.noData(s,T);return s}else{T.selectAll(".nv-noData").remove()}var N=ai.filter(function(aj){return !aj.disabled&&aj.yAxis==1}).map(function(aj){return aj.values.map(function(al,ak){return{x:al.x,y:al.y}})});var M=ai.filter(function(aj){return !aj.disabled&&aj.yAxis==2}).map(function(aj){return aj.values.map(function(al,ak){return{x:al.x,y:al.y}})});r.domain(d3.extent(d3.merge(N.concat(M)),function(aj){return aj.x})).range([0,F]);var O=T.selectAll("g.wrap.multiChart").data([ai]);var Z=O.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");Z.append("g").attr("class","nv-x nv-axis");Z.append("g").attr("class","nv-y1 nv-axis");Z.append("g").attr("class","nv-y2 nv-axis");Z.append("g").attr("class","lines1Wrap");Z.append("g").attr("class","lines2Wrap");Z.append("g").attr("class","bars1Wrap");Z.append("g").attr("class","bars2Wrap");Z.append("g").attr("class","stack1Wrap");Z.append("g").attr("class","stack2Wrap");Z.append("g").attr("class","legendWrap");var ad=O.select("g");var ag=ai.map(function(ak,aj){return ai[aj].color||w(ak,aj)});if(z){var X=f.align()?F/2:F;var ah=f.align()?X:0;f.width(X);f.color(ag);ad.select(".legendWrap").datum(ai.map(function(aj){aj.originalKey=aj.originalKey===undefined?aj.key:aj.originalKey;aj.key=aj.originalKey+(aj.yAxis==1?"":" (right axis)");return aj})).call(f);if(t.top!=f.height()){t.top=f.height();H=a.utils.availableHeight(u,T,t)}ad.select(".legendWrap").attr("transform","translate("+ah+","+(-t.top)+")")}p.width(F).height(H).interpolate(n).color(ag.filter(function(ak,aj){return !ai[aj].disabled&&ai[aj].yAxis==1&&ai[aj].type=="line"}));o.width(F).height(H).interpolate(n).color(ag.filter(function(ak,aj){return !ai[aj].disabled&&ai[aj].yAxis==2&&ai[aj].type=="line"}));g.width(F).height(H).color(ag.filter(function(ak,aj){return !ai[aj].disabled&&ai[aj].yAxis==1&&ai[aj].type=="bar"}));e.width(F).height(H).color(ag.filter(function(ak,aj){return !ai[aj].disabled&&ai[aj].yAxis==2&&ai[aj].type=="bar"}));k.width(F).height(H).color(ag.filter(function(ak,aj){return !ai[aj].disabled&&ai[aj].yAxis==1&&ai[aj].type=="area"}));j.width(F).height(H).color(ag.filter(function(ak,aj){return !ai[aj].disabled&&ai[aj].yAxis==2&&ai[aj].type=="area"}));ad.attr("transform","translate("+t.left+","+t.top+")");var G=ad.select(".lines1Wrap").datum(W.filter(function(aj){return !aj.disabled}));var J=ad.select(".bars1Wrap").datum(ac.filter(function(aj){return !aj.disabled}));var af=ad.select(".stack1Wrap").datum(S.filter(function(aj){return !aj.disabled}));var aa=ad.select(".lines2Wrap").datum(V.filter(function(aj){return !aj.disabled}));var ae=ad.select(".bars2Wrap").datum(ab.filter(function(aj){return !aj.disabled}));var U=ad.select(".stack2Wrap").datum(Q.filter(function(aj){return !aj.disabled}));var R=S.length?S.map(function(aj){return aj.values}).reduce(function(ak,aj){return ak.map(function(al,am){return{x:al.x,y:al.y+aj[am].y}})}).concat([{x:0,y:0}]):[];var P=Q.length?Q.map(function(aj){return aj.values}).reduce(function(ak,aj){return ak.map(function(al,am){return{x:al.x,y:al.y+aj[am].y}})}).concat([{x:0,y:0}]):[];C.domain(m||d3.extent(d3.merge(N).concat(R),function(aj){return aj.y})).range([0,H]);B.domain(l||d3.extent(d3.merge(M).concat(P),function(aj){return aj.y})).range([0,H]);p.yDomain(C.domain());g.yDomain(C.domain());k.yDomain(C.domain());o.yDomain(B.domain());e.yDomain(B.domain());j.yDomain(B.domain());if(S.length){d3.transition(af).call(k)}if(Q.length){d3.transition(U).call(j)}if(ac.length){d3.transition(J).call(g)}if(ab.length){d3.transition(ae).call(e)}if(W.length){d3.transition(G).call(p)}if(V.length){d3.transition(aa).call(o)}q._ticks(a.utils.calcTicksX(F/100,ai)).tickSize(-H,0);ad.select(".nv-x.nv-axis").attr("transform","translate(0,"+H+")");d3.transition(ad.select(".nv-x.nv-axis")).call(q);d._ticks(a.utils.calcTicksY(H/36,ai)).tickSize(-F,0);d3.transition(ad.select(".nv-y1.nv-axis")).call(d);c._ticks(a.utils.calcTicksY(H/36,ai)).tickSize(-F,0);d3.transition(ad.select(".nv-y2.nv-axis")).call(c);ad.select(".nv-y1.nv-axis").classed("nv-disabled",N.length?false:true).attr("transform","translate("+r.range()[0]+",0)");ad.select(".nv-y2.nv-axis").classed("nv-disabled",M.length?false:true).attr("transform","translate("+r.range()[1]+",0)");f.dispatch.on("stateChange",function(aj){s.update()});function Y(aj){var ak=ai[aj.seriesIndex].yAxis===2?c:d;aj.value=aj.point.x;aj.series={value:aj.point.y,color:aj.point.color};i.duration(100).valueFormatter(function(am,al){return ak.tickFormat()(am,al)}).data(aj).position(aj.pos).hidden(false)}function I(aj){var ak=ai[aj.seriesIndex].yAxis===2?c:d;aj.point.x=k.x()(aj.point);aj.point.y=k.y()(aj.point);i.duration(100).valueFormatter(function(am,al){return ak.tickFormat()(am,al)}).data(aj).position(aj.pos).hidden(false)}function K(aj){var ak=ai[aj.data.series].yAxis===2?c:d;aj.value=g.x()(aj.data);aj.series={value:g.y()(aj.data),color:aj.color};i.duration(0).valueFormatter(function(am,al){return ak.tickFormat()(am,al)}).data(aj).hidden(false)}p.dispatch.on("elementMouseover.tooltip",Y);o.dispatch.on("elementMouseover.tooltip",Y);p.dispatch.on("elementMouseout.tooltip",function(aj){i.hidden(true)});o.dispatch.on("elementMouseout.tooltip",function(aj){i.hidden(true)});k.dispatch.on("elementMouseover.tooltip",I);j.dispatch.on("elementMouseover.tooltip",I);k.dispatch.on("elementMouseout.tooltip",function(aj){i.hidden(true)});j.dispatch.on("elementMouseout.tooltip",function(aj){i.hidden(true)});g.dispatch.on("elementMouseover.tooltip",K);e.dispatch.on("elementMouseover.tooltip",K);g.dispatch.on("elementMouseout.tooltip",function(aj){i.hidden(true)});e.dispatch.on("elementMouseout.tooltip",function(aj){i.hidden(true)});g.dispatch.on("elementMousemove.tooltip",function(aj){i.position({top:d3.event.pageY,left:d3.event.pageX})()});e.dispatch.on("elementMousemove.tooltip",function(aj){i.position({top:d3.event.pageY,left:d3.event.pageX})()})});return s}s.dispatch=E;s.lines1=p;s.lines2=o;s.bars1=g;s.bars2=e;s.stack1=k;s.stack2=j;s.xAxis=q;s.yAxis1=d;s.yAxis2=c;s.tooltip=i;s.options=a.utils.optionsFunc.bind(s);s._options=Object.create({},{width:{get:function(){return v},set:function(x){v=x}},height:{get:function(){return u},set:function(x){u=x}},showLegend:{get:function(){return z},set:function(x){z=x}},yDomain1:{get:function(){return m},set:function(x){m=x}},yDomain2:{get:function(){return l},set:function(x){l=x}},noData:{get:function(){return h},set:function(x){h=x}},interpolate:{get:function(){return n},set:function(x){n=x}},tooltips:{get:function(){return i.enabled()},set:function(x){a.deprecated("tooltips","use chart.tooltip.enabled() instead");i.enabled(!!x)}},tooltipContent:{get:function(){return i.contentGenerator()},set:function(x){a.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");i.contentGenerator(x)}},margin:{get:function(){return t},set:function(x){t.top=x.top!==undefined?x.top:t.top;t.right=x.right!==undefined?x.right:t.right;t.bottom=x.bottom!==undefined?x.bottom:t.bottom;t.left=x.left!==undefined?x.left:t.left}},color:{get:function(){return w},set:function(x){w=a.utils.getColor(x)}},x:{get:function(){return A},set:function(x){A=x;p.x(x);o.x(x);g.x(x);e.x(x);k.x(x);j.x(x)}},y:{get:function(){return y},set:function(x){y=x;p.y(x);o.y(x);k.y(x);j.y(x);g.y(x);e.y(x)}},useVoronoi:{get:function(){return D},set:function(x){D=x;p.useVoronoi(x);o.useVoronoi(x);k.useVoronoi(x);j.useVoronoi(x)}}});a.utils.initOptions(s);return s};a.models.ohlcBar=function(){var n={top:0,right:0,bottom:0,left:0},r=null,o=null,p=Math.floor(Math.random()*10000),j=null,h=d3.scale.linear(),g=d3.scale.linear(),w=function(x){return x.x},v=function(x){return x.y},d=function(x){return x.open},c=function(x){return x.close},B=function(x){return x.high},i=function(x){return x.low},f=[],e=[],k=false,A=true,u=a.utils.defaultColor(),z=false,t,q,m,s,C=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");function l(x){x.each(function(H){j=d3.select(this);var L=a.utils.availableWidth(r,j,n),E=a.utils.availableHeight(o,j,n);a.utils.initSVG(j);var K=(L/H[0].values.length)*0.9;h.domain(t||d3.extent(H[0].values.map(w).concat(f)));if(k){h.range(m||[L*0.5/H[0].values.length,L*(H[0].values.length-0.5)/H[0].values.length])}else{h.range(m||[5+K/2,L-K/2-5])}g.domain(q||[d3.min(H[0].values.map(i).concat(e)),d3.max(H[0].values.map(B).concat(e))]).range(s||[E,0]);if(h.domain()[0]===h.domain()[1]){h.domain()[0]?h.domain([h.domain()[0]-h.domain()[0]*0.01,h.domain()[1]+h.domain()[1]*0.01]):h.domain([-1,1])}if(g.domain()[0]===g.domain()[1]){g.domain()[0]?g.domain([g.domain()[0]+g.domain()[0]*0.01,g.domain()[1]-g.domain()[1]*0.01]):g.domain([-1,1])}var D=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([H[0].values]);var G=D.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar");var F=G.append("defs");var y=G.append("g");var I=D.select("g");y.append("g").attr("class","nv-ticks");D.attr("transform","translate("+n.left+","+n.top+")");j.on("click",function(N,M){C.chartClick({data:N,index:M,pos:d3.event,id:p})});F.append("clipPath").attr("id","nv-chart-clip-path-"+p).append("rect");D.select("#nv-chart-clip-path-"+p+" rect").attr("width",L).attr("height",E);I.attr("clip-path",A?"url(#nv-chart-clip-path-"+p+")":"");var J=D.select(".nv-ticks").selectAll(".nv-tick").data(function(M){return M});J.exit().remove();J.enter().append("path").attr("class",function(O,N,M){return(d(O,N)>c(O,N)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+M+"-"+N}).attr("d",function(N,M){return"m0,0l0,"+(g(d(N,M))-g(B(N,M)))+"l"+(-K/2)+",0l"+(K/2)+",0l0,"+(g(i(N,M))-g(d(N,M)))+"l0,"+(g(c(N,M))-g(i(N,M)))+"l"+(K/2)+",0l"+(-K/2)+",0z"}).attr("transform",function(N,M){return"translate("+h(w(N,M))+","+g(B(N,M))+")"}).attr("fill",function(N,M){return u[0]}).attr("stroke",function(N,M){return u[0]}).attr("x",0).attr("y",function(N,M){return g(Math.max(0,v(N,M)))}).attr("height",function(N,M){return Math.abs(g(v(N,M))-g(0))});J.attr("class",function(O,N,M){return(d(O,N)>c(O,N)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+M+"-"+N});d3.transition(J).attr("transform",function(N,M){return"translate("+h(w(N,M))+","+g(B(N,M))+")"}).attr("d",function(O,N){var M=(L/H[0].values.length)*0.9;return"m0,0l0,"+(g(d(O,N))-g(B(O,N)))+"l"+(-M/2)+",0l"+(M/2)+",0l0,"+(g(i(O,N))-g(d(O,N)))+"l0,"+(g(c(O,N))-g(i(O,N)))+"l"+(M/2)+",0l"+(-M/2)+",0z"})});return l}l.highlightPoint=function(y,x){l.clearHighlights();j.select(".nv-ohlcBar .nv-tick-0-"+y).classed("hover",x)};l.clearHighlights=function(){j.select(".nv-ohlcBar .nv-tick.hover").classed("hover",false)};l.dispatch=C;l.options=a.utils.optionsFunc.bind(l);l._options=Object.create({},{width:{get:function(){return r},set:function(x){r=x}},height:{get:function(){return o},set:function(x){o=x}},xScale:{get:function(){return h},set:function(x){h=x}},yScale:{get:function(){return g},set:function(x){g=x}},xDomain:{get:function(){return t},set:function(x){t=x}},yDomain:{get:function(){return q},set:function(x){q=x}},xRange:{get:function(){return m},set:function(x){m=x}},yRange:{get:function(){return s},set:function(x){s=x}},forceX:{get:function(){return f},set:function(x){f=x}},forceY:{get:function(){return e},set:function(x){e=x}},padData:{get:function(){return k},set:function(x){k=x}},clipEdge:{get:function(){return A},set:function(x){A=x}},id:{get:function(){return p},set:function(x){p=x}},interactive:{get:function(){return z},set:function(x){z=x}},x:{get:function(){return w},set:function(x){w=x}},y:{get:function(){return v},set:function(x){v=x}},open:{get:function(){return d()},set:function(x){d=x}},close:{get:function(){return c()},set:function(x){c=x}},high:{get:function(){return B},set:function(x){B=x}},low:{get:function(){return i},set:function(x){i=x}},margin:{get:function(){return n},set:function(x){n.top=x.top!=undefined?x.top:n.top;n.right=x.right!=undefined?x.right:n.right;n.bottom=x.bottom!=undefined?x.bottom:n.bottom;n.left=x.left!=undefined?x.left:n.left}},color:{get:function(){return u},set:function(x){u=a.utils.getColor(x)}}});a.utils.initOptions(l);return l};a.models.parallelCoordinates=function(){var g={top:30,right:0,bottom:10,left:0},d=null,p=null,n=d3.scale.ordinal(),l={},c=[],m=[],h=a.utils.defaultColor(),e=[],f=[],o=[],k=1,i=d3.dispatch("brush","elementMouseover","elementMouseout");function j(q){q.each(function(R){var F=d3.select(this);var t=a.utils.availableWidth(d,F,g),w=a.utils.availableHeight(p,F,g);a.utils.initSVG(F);f=R;n.rangePoints([0,t],1).domain(c);var K={};c.forEach(function(T){var S=d3.extent(R,function(U){return +U[T]});K[T]=false;if(S[0]===undefined){K[T]=true;S[0]=0;S[1]=0}if(S[0]===S[1]){S[0]=S[0]-1;S[1]=S[1]+1}l[T]=d3.scale.linear().domain(S).range([(w-12)*0.9,0]);l[T].brush=d3.svg.brush().y(l[T]).on("brush",u);return T!="name"});var C=F.selectAll("g.nv-wrap.nv-parallelCoordinates").data([R]);var y=C.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates");var J=y.append("g");var N=C.select("g");J.append("g").attr("class","nv-parallelCoordinates background");J.append("g").attr("class","nv-parallelCoordinates foreground");J.append("g").attr("class","nv-parallelCoordinates missingValuesline");C.attr("transform","translate("+g.left+","+g.top+")");var E=d3.svg.line().interpolate("cardinal").tension(k),v=d3.svg.axis().orient("left"),r=d3.behavior.drag().on("dragstart",P).on("drag",O).on("dragend",L);var G,x;var A=n.range()[1]-n.range()[0];var B=[];var I=[0+A/2,w-12,t-A/2,w-12];G=C.select(".missingValuesline").selectAll("line").data([I]);G.enter().append("line");G.exit().remove();G.attr("x1",function(S){return S[0]}).attr("y1",function(S){return S[1]}).attr("x2",function(S){return S[2]}).attr("y2",function(S){return S[3]});x=C.select(".missingValuesline").selectAll("text").data(["undefined values"]);x.append("text").data(["undefined values"]);x.enter().append("text");x.exit().remove();x.attr("y",w).attr("x",t-92-A/2).text(function(S){return S});var M=C.select(".background").selectAll("path").data(R);M.enter().append("path");M.exit().remove();M.attr("d",H);var s=C.select(".foreground").selectAll("path").data(R);s.enter().append("path");s.exit().remove();s.attr("d",H).attr("stroke",h);s.on("mouseover",function(T,S){d3.select(this).classed("hover",true);i.elementMouseover({label:T.name,data:T.data,index:S,pos:[d3.mouse(this.parentNode)[0],d3.mouse(this.parentNode)[1]]})});s.on("mouseout",function(T,S){d3.select(this).classed("hover",false);i.elementMouseout({label:T.name,data:T.data,index:S})});var z=N.selectAll(".dimension").data(c);var D=z.enter().append("g").attr("class","nv-parallelCoordinates dimension");D.append("g").attr("class","nv-parallelCoordinates nv-axis");D.append("g").attr("class","nv-parallelCoordinates-brush");D.append("text").attr("class","nv-parallelCoordinates nv-label");z.attr("transform",function(S){return"translate("+n(S)+",0)"});z.exit().remove();z.select(".nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").text(String).on("mouseover",function(T,S){i.elementMouseover({dim:T,pos:[d3.mouse(this.parentNode.parentNode)[0],d3.mouse(this.parentNode.parentNode)[1]]})}).on("mouseout",function(T,S){i.elementMouseout({dim:T})}).call(r);z.select(".nv-axis").each(function(T,S){d3.select(this).call(v.scale(l[T]).tickFormat(d3.format(m[S])))});z.select(".nv-parallelCoordinates-brush").each(function(S){d3.select(this).call(l[S].brush)}).selectAll("rect").attr("x",-8).attr("width",16);function H(S){return E(c.map(function(X){if(isNaN(S[X])||isNaN(parseFloat(S[X]))){var W=l[X].domain();var T=l[X].range();var V=W[0]-(W[1]-W[0])/9;if(B.indexOf(X)<0){var U=d3.scale.linear().domain([V,W[1]]).range([w-12,T[1]]);l[X].brush.y(U);B.push(X)}return[n(X),l[X](V)]}if(B.length>0){G.style("display","inline");x.style("display","inline")}else{G.style("display","none");x.style("display","none")}return[n(X),l[X](S[X])]}))}function u(){var T=c.filter(function(U){return !l[U].brush.empty()}),S=T.map(function(U){return l[U].brush.extent()});e=[];T.forEach(function(V,U){e[U]={dimension:V,extent:S[U]}});f=[];s.style("display",function(V){var U=T.every(function(X,W){if(isNaN(V[X])&&S[W][0]==l[X].brush.y().domain()[0]){return true}return S[W][0]<=V[X]&&V[X]<=S[W][1]});if(U){f.push(V)}return U?null:"none"});i.brush({filters:e,active:f})}function P(T,S){o[T]=this.parentNode.__origin__=n(T);M.attr("visibility","hidden")}function O(T,S){o[T]=Math.min(t,Math.max(0,this.parentNode.__origin__+=d3.event.x));s.attr("d",H);c.sort(function(V,U){return Q(V)-Q(U)});n.domain(c);z.attr("transform",function(U){return"translate("+Q(U)+")"})}function L(T,S){delete this.parentNode.__origin__;delete o[T];d3.select(this.parentNode).attr("transform","translate("+n(T)+")");s.attr("d",H);M.attr("d",H).attr("visibility",null)}function Q(T){var S=o[T];return S==null?n(T):S}});return j}j.dispatch=i;j.options=a.utils.optionsFunc.bind(j);j._options=Object.create({},{width:{get:function(){return d},set:function(q){d=q}},height:{get:function(){return p},set:function(q){p=q}},dimensionNames:{get:function(){return c},set:function(q){c=q}},dimensionFormats:{get:function(){return m},set:function(q){m=q}},lineTension:{get:function(){return k},set:function(q){k=q}},dimensions:{get:function(){return c},set:function(q){a.deprecated("dimensions","use dimensionNames instead");c=q}},margin:{get:function(){return g},set:function(q){g.top=q.top!==undefined?q.top:g.top;g.right=q.right!==undefined?q.right:g.right;g.bottom=q.bottom!==undefined?q.bottom:g.bottom;g.left=q.left!==undefined?q.left:g.left}},color:{get:function(){return h},set:function(q){h=a.utils.getColor(q)}}});a.utils.initOptions(j);return j};a.models.pie=function(){var m={top:0,right:0,bottom:0,left:0},t=500,n=500,z=function(F){return F.x},y=function(F){return F.y},q=Math.floor(Math.random()*10000),j=null,u=a.utils.defaultColor(),g=d3.format(",.2f"),p=true,B=false,D="key",v=0.02,h=false,E=false,A=true,d=0,c=false,w=false,i=false,s=false,e=0,k=0.5,r=[],C=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd");var x=[];var o=[];var f=a.utils.renderWatch(C);function l(F){f.reset();F.each(function(ai){var H=t-m.left-m.right,L=n-m.top-m.bottom,O=Math.min(H,L)/2,N=[],M=[];j=d3.select(this);if(r.length===0){var G=O-O/5;var ah=k*O;for(var Z=0;Z<ai[0].length;Z++){N.push(G);M.push(ah)}}else{N=r.map(function(ae){return(ae.outer-ae.outer/5)*O});M=r.map(function(ae){return(ae.inner-ae.inner/5)*O});k=d3.min(r.map(function(ae){return(ae.inner-ae.inner/5)}))}a.utils.initSVG(j);var V=j.selectAll(".nv-wrap.nv-pie").data(ai);var Q=V.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+q);var Y=Q.append("g");var aa=V.select("g");var P=Y.append("g").attr("class","nv-pie");Y.append("g").attr("class","nv-pieLabels");V.attr("transform","translate("+m.left+","+m.top+")");aa.select(".nv-pie").attr("transform","translate("+H/2+","+L/2+")");aa.select(".nv-pieLabels").attr("transform","translate("+H/2+","+L/2+")");j.on("click",function(aj,ae){C.chartClick({data:aj,index:ae,pos:d3.event,id:q})});x=[];o=[];for(var Z=0;Z<ai[0].length;Z++){var T=d3.svg.arc().outerRadius(N[Z]);var ac=d3.svg.arc().outerRadius(N[Z]+5);if(w!==false){T.startAngle(w);ac.startAngle(w)}if(s!==false){T.endAngle(s);ac.endAngle(s)}if(h){T.innerRadius(M[Z]);ac.innerRadius(M[Z])}if(T.cornerRadius&&e){T.cornerRadius(e);ac.cornerRadius(e)}x.push(T);o.push(ac)}var W=d3.layout.pie().sort(null).value(function(ae){return ae.disabled?0:y(ae)});if(W.padAngle&&i){W.padAngle(i)}if(h&&E){P.append("text").attr("class","nv-pie-title");V.select(".nv-pie-title").style("text-anchor","middle").text(function(ae){return E}).style("font-size",(Math.min(H,L))*k*2/(E.length+2)+"px").attr("dy","0.35em").attr("transform",function(aj,ae){return"translate(0, "+d+")"})}var J=V.select(".nv-pie").selectAll(".nv-slice").data(W);var I=V.select(".nv-pieLabels").selectAll(".nv-label").data(W);J.exit().remove();I.exit().remove();var ad=J.enter().append("g");ad.attr("class","nv-slice");ad.on("mouseover",function(aj,ae){d3.select(this).classed("hover",true);if(A){d3.select(this).select("path").transition().duration(70).attr("d",o[ae])}C.elementMouseover({data:aj.data,index:ae,color:d3.select(this).style("fill")})});ad.on("mouseout",function(aj,ae){d3.select(this).classed("hover",false);if(A){d3.select(this).select("path").transition().duration(50).attr("d",x[ae])}C.elementMouseout({data:aj.data,index:ae})});ad.on("mousemove",function(aj,ae){C.elementMousemove({data:aj.data,index:ae})});ad.on("click",function(aj,ae){C.elementClick({data:aj.data,index:ae,color:d3.select(this).style("fill")})});ad.on("dblclick",function(aj,ae){C.elementDblClick({data:aj.data,index:ae,color:d3.select(this).style("fill")})});J.attr("fill",function(aj,ae){return u(aj.data,ae)});J.attr("stroke",function(aj,ae){return u(aj.data,ae)});var X=ad.append("path").each(function(ae){this._current=ae});J.select("path").transition().attr("d",function(aj,ae){return x[ae](aj)}).attrTween("d",K);if(p){var R=[];for(var Z=0;Z<ai[0].length;Z++){R.push(x[Z]);if(B){if(h){R[Z]=d3.svg.arc().outerRadius(x[Z].outerRadius());if(w!==false){R[Z].startAngle(w)}if(s!==false){R[Z].endAngle(s)}}}else{if(!h){R[Z].innerRadius(0)}}}I.enter().append("g").classed("nv-label",true).each(function(ak,ae){var aj=d3.select(this);aj.attr("transform",function(an,am){if(c){an.outerRadius=N[am]+10;an.innerRadius=N[am]+15;var al=(an.startAngle+an.endAngle)/2*(180/Math.PI);if((an.startAngle+an.endAngle)/2<Math.PI){al-=90}else{al+=90}return"translate("+R[am].centroid(an)+") rotate("+al+")"}else{an.outerRadius=O+10;an.innerRadius=O+15;return"translate("+R[am].centroid(an)+")"}});aj.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3);aj.append("text").style("text-anchor",c?((ak.startAngle+ak.endAngle)/2<Math.PI?"start":"end"):"middle").style("fill","#000")});var U={};var ag=14;var S=140;var af=function(ae){return Math.floor(ae[0]/S)*S+","+Math.floor(ae[1]/ag)*ag};I.watchTransition(f,"pie labels").attr("transform",function(am,ak){if(c){am.outerRadius=N[ak]+10;am.innerRadius=N[ak]+15;var aj=(am.startAngle+am.endAngle)/2*(180/Math.PI);if((am.startAngle+am.endAngle)/2<Math.PI){aj-=90}else{aj+=90}return"translate("+R[ak].centroid(am)+") rotate("+aj+")"}else{am.outerRadius=O+10;am.innerRadius=O+15;var ae=R[ak].centroid(am);if(am.value){var al=af(ae);if(U[al]){ae[1]-=ag}U[af(ae)]=true}return"translate("+ae+")"}});I.select(".nv-label text").style("text-anchor",function(aj,ae){return c?((aj.startAngle+aj.endAngle)/2<Math.PI?"start":"end"):"middle"}).text(function(al,aj){var ak=(al.endAngle-al.startAngle)/(2*Math.PI);var ae="";if(!al.value||ak<v){return""}if(typeof D==="function"){ae=D(al,aj,{key:z(al.data),value:y(al.data),percent:g(ak)})}else{switch(D){case"key":ae=z(al.data);break;case"value":ae=g(y(al.data));break;case"percent":ae=d3.format("%")(ak);break}}return ae})}function ab(aj){var ae=(aj.startAngle+aj.endAngle)*90/Math.PI-90;return ae>90?ae-180:ae}function K(aj,ae){aj.endAngle=isNaN(aj.endAngle)?0:aj.endAngle;aj.startAngle=isNaN(aj.startAngle)?0:aj.startAngle;if(!h){aj.innerRadius=0}var ak=d3.interpolate(this._current,aj);this._current=ak(0);return function(al){return x[ae](ak(al))}}});f.renderEnd("pie immediate");return l}l.dispatch=C;l.options=a.utils.optionsFunc.bind(l);l._options=Object.create({},{arcsRadius:{get:function(){return r},set:function(F){r=F}},width:{get:function(){return t},set:function(F){t=F}},height:{get:function(){return n},set:function(F){n=F}},showLabels:{get:function(){return p},set:function(F){p=F}},title:{get:function(){return E},set:function(F){E=F}},titleOffset:{get:function(){return d},set:function(F){d=F}},labelThreshold:{get:function(){return v},set:function(F){v=F}},valueFormat:{get:function(){return g},set:function(F){g=F}},x:{get:function(){return z},set:function(F){z=F}},id:{get:function(){return q},set:function(F){q=F}},endAngle:{get:function(){return s},set:function(F){s=F}},startAngle:{get:function(){return w},set:function(F){w=F}},padAngle:{get:function(){return i},set:function(F){i=F}},cornerRadius:{get:function(){return e},set:function(F){e=F}},donutRatio:{get:function(){return k},set:function(F){k=F}},labelsOutside:{get:function(){return B},set:function(F){B=F}},labelSunbeamLayout:{get:function(){return c},set:function(F){c=F}},donut:{get:function(){return h},set:function(F){h=F}},growOnHover:{get:function(){return A},set:function(F){A=F}},pieLabelsOutside:{get:function(){return B},set:function(F){B=F;a.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return B},set:function(F){B=F;a.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return g},set:function(F){g=F;a.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return m},set:function(F){m.top=typeof F.top!="undefined"?F.top:m.top;m.right=typeof F.right!="undefined"?F.right:m.right;m.bottom=typeof F.bottom!="undefined"?F.bottom:m.bottom;m.left=typeof F.left!="undefined"?F.left:m.left}},y:{get:function(){return y},set:function(F){y=d3.functor(F)}},color:{get:function(){return u},set:function(F){u=a.utils.getColor(F)}},labelType:{get:function(){return D},set:function(F){D=F||"key"}}});a.utils.initOptions(l);return l};a.models.pieChart=function(){var l=a.models.pie();var d=a.models.legend();var f=a.models.tooltip();var n={top:30,right:20,bottom:20,left:20},p=null,o=null,s=true,k="top",q=a.utils.defaultColor(),g=a.utils.state(),h=null,e=null,c=250,t=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd");f.headerEnabled(false).duration(0).valueFormatter(function(v,u){return l.valueFormat()(v,u)});var i=a.utils.renderWatch(t);var j=function(u){return function(){return{active:u.map(function(v){return !v.disabled})}}};var r=function(u){return function(v){if(v.active!==undefined){u.forEach(function(x,w){x.disabled=!v.active[w]})}}};function m(u){i.reset();i.models(l);u.each(function(z){var w=d3.select(this);a.utils.initSVG(w);var B=this;var F=a.utils.availableWidth(p,w,n),y=a.utils.availableHeight(o,w,n);m.update=function(){w.transition().call(m)};m.container=this;g.setter(r(z),m.update).getter(j(z)).update();g.disabled=z.map(function(G){return !!G.disabled});if(!h){var D;h={};for(D in g){if(g[D] instanceof Array){h[D]=g[D].slice(0)}else{h[D]=g[D]}}}if(!z||!z.length){a.utils.noData(m,w);return m}else{w.selectAll(".nv-noData").remove()}var x=w.selectAll("g.nv-wrap.nv-pieChart").data([z]);var v=x.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g");var A=x.select("g");v.append("g").attr("class","nv-pieWrap");v.append("g").attr("class","nv-legendWrap");if(s){if(k==="top"){d.width(F).key(l.x());x.select(".nv-legendWrap").datum(z).call(d);if(n.top!=d.height()){n.top=d.height();y=a.utils.availableHeight(o,w,n)}x.select(".nv-legendWrap").attr("transform","translate(0,"+(-n.top)+")")}else{if(k==="right"){var E=a.models.legend().width();if(F/2<E){E=(F/2)}d.height(y).key(l.x());d.width(E);F-=d.width();x.select(".nv-legendWrap").datum(z).call(d).attr("transform","translate("+(F)+",0)")}}}x.attr("transform","translate("+n.left+","+n.top+")");l.width(F).height(y);var C=A.select(".nv-pieWrap").datum([z]);d3.transition(C).call(l);d.dispatch.on("stateChange",function(H){for(var G in H){g[G]=H[G]}t.stateChange(g);m.update()});t.on("changeState",function(G){if(typeof G.disabled!=="undefined"){z.forEach(function(I,H){I.disabled=G.disabled[H]});g.disabled=G.disabled}m.update()})});i.renderEnd("pieChart immediate");return m}l.dispatch.on("elementMouseover.tooltip",function(u){u.series={key:m.x()(u.data),value:m.y()(u.data),color:u.color};f.data(u).hidden(false)});l.dispatch.on("elementMouseout.tooltip",function(u){f.hidden(true)});l.dispatch.on("elementMousemove.tooltip",function(u){f.position({top:d3.event.pageY,left:d3.event.pageX})()});m.legend=d;m.dispatch=t;m.pie=l;m.tooltip=f;m.options=a.utils.optionsFunc.bind(m);m._options=Object.create({},{noData:{get:function(){return e},set:function(u){e=u}},showLegend:{get:function(){return s},set:function(u){s=u}},legendPosition:{get:function(){return k},set:function(u){k=u}},defaultState:{get:function(){return h},set:function(u){h=u}},tooltips:{get:function(){return f.enabled()},set:function(u){a.deprecated("tooltips","use chart.tooltip.enabled() instead");f.enabled(!!u)}},tooltipContent:{get:function(){return f.contentGenerator()},set:function(u){a.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");f.contentGenerator(u)}},color:{get:function(){return q},set:function(u){q=u;d.color(q);l.color(q)}},duration:{get:function(){return c},set:function(u){c=u;i.reset(c)}},margin:{get:function(){return n},set:function(u){n.top=u.top!==undefined?u.top:n.top;n.right=u.right!==undefined?u.right:n.right;n.bottom=u.bottom!==undefined?u.bottom:n.bottom;n.left=u.left!==undefined?u.left:n.left}}});a.utils.inheritOptions(m,l);a.utils.initOptions(m);return m};a.models.scatter=function(){var i={top:0,right:0,bottom:0,left:0},d=null,e=null,t=a.utils.defaultColor(),C=Math.floor(Math.random()*100000),w=null,J=d3.scale.linear(),H=d3.scale.linear(),E=d3.scale.linear(),O=function(x){return x.x},N=function(x){return x.y},A=function(x){return x.size||1},n=function(x){return x.shape||"circle"},F=[],D=[],Q=[],h=true,R=function(x){return !x.notActive},L=false,k=0.1,v=false,T=true,l=false,p=function(){return 25},g=null,f=null,P=null,q=null,j=null,u=null,K=false,M=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),U=true,s=250;var o,c,B,I,m=false,G=a.utils.renderWatch(M,s),r=[16,256];function S(x){G.reset();x.each(function(aa){w=d3.select(this);var ae=a.utils.availableWidth(d,w,i),W=a.utils.availableHeight(e,w,i);a.utils.initSVG(w);aa.forEach(function(ag,af){ag.values.forEach(function(ah){ah.series=af})});var V=(g&&f&&j)?[]:d3.merge(aa.map(function(af){return af.values.map(function(ah,ag){return{x:O(ah,ag),y:N(ah,ag),size:A(ah,ag)}})}));J.domain(g||d3.extent(V.map(function(af){return af.x}).concat(F)));if(L&&aa[0]){J.range(P||[(ae*k+ae)/(2*aa[0].values.length),ae-ae*(1+k)/(2*aa[0].values.length)])}else{J.range(P||[0,ae])}H.domain(f||d3.extent(V.map(function(af){return af.y}).concat(D))).range(q||[W,0]);E.domain(j||d3.extent(V.map(function(af){return af.size}).concat(Q))).range(u||r);K=J.domain()[0]===J.domain()[1]||H.domain()[0]===H.domain()[1];if(J.domain()[0]===J.domain()[1]){J.domain()[0]?J.domain([J.domain()[0]-J.domain()[0]*0.01,J.domain()[1]+J.domain()[1]*0.01]):J.domain([-1,1])}if(H.domain()[0]===H.domain()[1]){H.domain()[0]?H.domain([H.domain()[0]-H.domain()[0]*0.01,H.domain()[1]+H.domain()[1]*0.01]):H.domain([-1,1])}if(isNaN(J.domain()[0])){J.domain([-1,1])}if(isNaN(H.domain()[0])){H.domain([-1,1])}o=o||J;c=c||H;B=B||E;var z=w.selectAll("g.nv-wrap.nv-scatter").data([aa]);var Z=z.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+C);var X=Z.append("defs");var y=Z.append("g");var ab=z.select("g");z.classed("nv-single-point",K);y.append("g").attr("class","nv-groups");y.append("g").attr("class","nv-point-paths");Z.append("g").attr("class","nv-point-clips");z.attr("transform","translate("+i.left+","+i.top+")");X.append("clipPath").attr("id","nv-edge-clip-"+C).append("rect");z.select("#nv-edge-clip-"+C+" rect").attr("width",ae).attr("height",(W>0)?W:0);ab.attr("clip-path",v?"url(#nv-edge-clip-"+C+")":"");function ac(){m=false;if(!h){return false}if(U===true){var ag=d3.merge(aa.map(function(am,al){return am.values.map(function(an,aq){var ap=O(an,aq);var ao=N(an,aq);return[J(ap)+Math.random()*0.0001,H(ao)+Math.random()*0.0001,al,aq,an]}).filter(function(an,ao){return R(an[4],ao)})}));if(ag.length==0){return false}if(ag.length<3){ag.push([J.range()[0]-20,H.range()[0]-20,null,null]);ag.push([J.range()[1]+20,H.range()[1]+20,null,null]);ag.push([J.range()[0]-20,H.range()[0]+20,null,null]);ag.push([J.range()[1]+20,H.range()[1]-20,null,null])}var aj=d3.geom.polygon([[-10,-10],[-10,e+10],[d+10,e+10],[d+10,-10]]);var ak=d3.geom.voronoi(ag).map(function(am,al){return{data:aj.clip(am),series:ag[al][2],point:ag[al][3]}});z.select(".nv-point-paths").selectAll("path").remove();var af=z.select(".nv-point-paths").selectAll("path").data(ak);var ai=af.enter().append("svg:path").attr("d",function(al){if(!al||!al.data||al.data.length===0){return"M 0 0"}else{return"M"+al.data.join(",")+"Z"}}).attr("id",function(am,al){return"nv-path-"+al}).attr("clip-path",function(am,al){return"url(#nv-clip-"+al+")"});if(l){ai.style("fill",d3.rgb(230,230,230)).style("fill-opacity",0.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200))}if(T){z.select(".nv-point-clips").selectAll("clipPath").remove();z.select(".nv-point-clips").selectAll("clipPath").data(ag).enter().append("svg:clipPath").attr("id",function(am,al){return"nv-clip-"+al}).append("svg:circle").attr("cx",function(al){return al[0]}).attr("cy",function(al){return al[1]}).attr("r",p)}var ah=function(ar,ao){if(m){return 0}var am=aa[ar.series];if(am===undefined){return}var al=am.values[ar.point];al.color=t(am,ar.series);al.x=O(al);al.y=N(al);var an=w.node().getBoundingClientRect();var ap=window.pageYOffset||document.documentElement.scrollTop;var aq=window.pageXOffset||document.documentElement.scrollLeft;var at={left:J(O(al,ar.point))+an.left+aq+i.left+10,top:H(N(al,ar.point))+an.top+ap+i.top+10};ao({point:al,series:am,pos:at,seriesIndex:ar.series,pointIndex:ar.point})};af.on("click",function(al){ah(al,M.elementClick)}).on("dblclick",function(al){ah(al,M.elementDblClick)}).on("mouseover",function(al){ah(al,M.elementMouseover)}).on("mouseout",function(am,al){ah(am,M.elementMouseout)})}else{z.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(ao,an){if(m||!aa[ao.series]){return 0}var am=aa[ao.series],al=am.values[an];M.elementClick({point:al,series:am,pos:[J(O(al,an))+i.left,H(N(al,an))+i.top],seriesIndex:ao.series,pointIndex:an})}).on("dblclick",function(ao,an){if(m||!aa[ao.series]){return 0}var am=aa[ao.series],al=am.values[an];M.elementDblClick({point:al,series:am,pos:[J(O(al,an))+i.left,H(N(al,an))+i.top],seriesIndex:ao.series,pointIndex:an})}).on("mouseover",function(ao,an){if(m||!aa[ao.series]){return 0}var am=aa[ao.series],al=am.values[an];M.elementMouseover({point:al,series:am,pos:[J(O(al,an))+i.left,H(N(al,an))+i.top],seriesIndex:ao.series,pointIndex:an,color:t(ao,an)})}).on("mouseout",function(ao,an){if(m||!aa[ao.series]){return 0}var am=aa[ao.series],al=am.values[an];M.elementMouseout({point:al,series:am,seriesIndex:ao.series,pointIndex:an,color:t(ao,an)})})}}m=true;var Y=z.select(".nv-groups").selectAll(".nv-group").data(function(af){return af},function(af){return af.key});Y.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001);Y.exit().remove();Y.attr("class",function(ag,af){return"nv-group nv-series-"+af}).classed("hover",function(af){return af.hover});Y.watchTransition(G,"scatter: groups").style("fill",function(ag,af){return t(ag,af)}).style("stroke",function(ag,af){return t(ag,af)}).style("stroke-opacity",1).style("fill-opacity",0.5);var ad=Y.selectAll("path.nv-point").data(function(af){return af.values.map(function(ag,ah){return[ag,ah]}).filter(function(ag,ah){return R(ag[0],ah)})});ad.enter().append("path").style("fill",function(af){return af.color}).style("stroke",function(af){return af.color}).attr("transform",function(af){return"translate("+o(O(af[0],af[1]))+","+c(N(af[0],af[1]))+")"}).attr("d",a.utils.symbol().type(function(af){return n(af[0])}).size(function(af){return E(A(af[0],af[1]))}));ad.exit().remove();Y.exit().selectAll("path.nv-point").watchTransition(G,"scatter exit").attr("transform",function(af){return"translate("+J(O(af[0],af[1]))+","+H(N(af[0],af[1]))+")"}).remove();ad.each(function(af){d3.select(this).classed("nv-point",true).classed("nv-point-"+af[1],true).classed("nv-noninteractive",!h).classed("hover",false)});ad.watchTransition(G,"scatter points").attr("transform",function(af){return"translate("+J(O(af[0],af[1]))+","+H(N(af[0],af[1]))+")"}).attr("d",a.utils.symbol().type(function(af){return n(af[0])}).size(function(af){return E(A(af[0],af[1]))}));clearTimeout(I);I=setTimeout(ac,300);o=J.copy();c=H.copy();B=E.copy()});G.renderEnd("scatter immediate");return S}S.dispatch=M;S.options=a.utils.optionsFunc.bind(S);S._calls=new function(){this.clearHighlights=function(){a.dom.write(function(){w.selectAll(".nv-point.hover").classed("hover",false)});return null};this.highlightPoint=function(y,z,x){a.dom.write(function(){w.select(" .nv-series-"+y+" .nv-point-"+z).classed("hover",x)})}};M.on("elementMouseover.point",function(x){if(h){S._calls.highlightPoint(x.seriesIndex,x.pointIndex,true)}});M.on("elementMouseout.point",function(x){if(h){S._calls.highlightPoint(x.seriesIndex,x.pointIndex,false)}});S._options=Object.create({},{width:{get:function(){return d},set:function(x){d=x}},height:{get:function(){return e},set:function(x){e=x}},xScale:{get:function(){return J},set:function(x){J=x}},yScale:{get:function(){return H},set:function(x){H=x}},pointScale:{get:function(){return E},set:function(x){E=x}},xDomain:{get:function(){return g},set:function(x){g=x}},yDomain:{get:function(){return f},set:function(x){f=x}},pointDomain:{get:function(){return j},set:function(x){j=x}},xRange:{get:function(){return P},set:function(x){P=x}},yRange:{get:function(){return q},set:function(x){q=x}},pointRange:{get:function(){return u},set:function(x){u=x}},forceX:{get:function(){return F},set:function(x){F=x}},forceY:{get:function(){return D},set:function(x){D=x}},forcePoint:{get:function(){return Q},set:function(x){Q=x}},interactive:{get:function(){return h},set:function(x){h=x}},pointActive:{get:function(){return R},set:function(x){R=x}},padDataOuter:{get:function(){return k},set:function(x){k=x}},padData:{get:function(){return L},set:function(x){L=x}},clipEdge:{get:function(){return v},set:function(x){v=x}},clipVoronoi:{get:function(){return T},set:function(x){T=x}},clipRadius:{get:function(){return p},set:function(x){p=x}},showVoronoi:{get:function(){return l},set:function(x){l=x}},id:{get:function(){return C},set:function(x){C=x}},x:{get:function(){return O},set:function(x){O=d3.functor(x)}},y:{get:function(){return N},set:function(x){N=d3.functor(x)}},pointSize:{get:function(){return A},set:function(x){A=d3.functor(x)}},pointShape:{get:function(){return n},set:function(x){n=d3.functor(x)}},margin:{get:function(){return i},set:function(x){i.top=x.top!==undefined?x.top:i.top;i.right=x.right!==undefined?x.right:i.right;i.bottom=x.bottom!==undefined?x.bottom:i.bottom;i.left=x.left!==undefined?x.left:i.left}},duration:{get:function(){return s},set:function(x){s=x;G.reset(s)}},color:{get:function(){return t},set:function(x){t=a.utils.getColor(x)}},useVoronoi:{get:function(){return U},set:function(x){U=x;if(U===false){T=false}}}});a.utils.initOptions(S);return S};a.models.scatterChart=function(){var r=a.models.scatter(),o=a.models.axis(),e=a.models.axis(),f=a.models.legend(),w=a.models.distribution(),u=a.models.distribution(),j=a.models.tooltip();var z={top:30,right:20,bottom:50,left:75},B=null,A=null,t=null,C=a.utils.defaultColor(),q=r.xScale(),p=r.yScale(),d=false,I=false,F=true,G=true,s=true,n=false,i=a.utils.state(),l=null,H=d3.dispatch("stateChange","changeState","renderEnd"),h=null,c=250;r.xScale(q).yScale(p);o.orient("bottom").tickPadding(10);e.orient((n)?"right":"left").tickPadding(10);w.axis("x");u.axis("y");j.headerFormatter(function(y,x){return o.tickFormat()(y,x)}).valueFormatter(function(y,x){return e.tickFormat()(y,x)});var E,g,k=a.utils.renderWatch(H,c);var m=function(x){return function(){return{active:x.map(function(y){return !y.disabled})}}};var D=function(x){return function(y){if(y.active!==undefined){x.forEach(function(K,J){K.disabled=!y.active[J]})}}};function v(x){k.reset();k.models(r);if(G){k.models(o)}if(s){k.models(e)}if(d){k.models(w)}if(I){k.models(u)}x.each(function(O){var Q=this;t=d3.select(this);a.utils.initSVG(t);var T=a.utils.availableWidth(B,t,z),K=a.utils.availableHeight(A,t,z);v.update=function(){if(c===0){t.call(v)}else{t.transition().duration(c).call(v)}};v.container=this;i.setter(D(O),v.update).getter(m(O)).update();i.disabled=O.map(function(U){return !!U.disabled});if(!l){var R;l={};for(R in i){if(i[R] instanceof Array){l[R]=i[R].slice(0)}else{l[R]=i[R]}}}if(!O||!O.length||!O.filter(function(U){return U.values.length}).length){a.utils.noData(v,t);k.renderEnd("scatter immediate");return v}else{t.selectAll(".nv-noData").remove()}q=r.xScale();p=r.yScale();var J=t.selectAll("g.nv-wrap.nv-scatterChart").data([O]);var M=J.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+r.id());var y=M.append("g");var P=J.select("g");y.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none");y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class","nv-y nv-axis");y.append("g").attr("class","nv-scatterWrap");y.append("g").attr("class","nv-regressionLinesWrap");y.append("g").attr("class","nv-distWrap");y.append("g").attr("class","nv-legendWrap");if(n){P.select(".nv-y.nv-axis").attr("transform","translate("+T+",0)")}if(F){var S=T;f.width(S);J.select(".nv-legendWrap").datum(O).call(f);if(z.top!=f.height()){z.top=f.height();K=a.utils.availableHeight(A,t,z)}J.select(".nv-legendWrap").attr("transform","translate(0,"+(-z.top)+")")}J.attr("transform","translate("+z.left+","+z.top+")");r.width(T).height(K).color(O.map(function(V,U){V.color=V.color||C(V,U);return V.color}).filter(function(V,U){return !O[U].disabled}));J.select(".nv-scatterWrap").datum(O.filter(function(U){return !U.disabled})).call(r);J.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+r.id()+")");var N=J.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(U){return U});N.enter().append("g").attr("class","nv-regLines");var L=N.selectAll(".nv-regLine").data(function(U){return[U]});L.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0);L.filter(function(U){return U.intercept&&U.slope}).watchTransition(k,"scatterPlusLineChart: regline").attr("x1",q.range()[0]).attr("x2",q.range()[1]).attr("y1",function(V,U){return p(q.domain()[0]*V.slope+V.intercept)}).attr("y2",function(V,U){return p(q.domain()[1]*V.slope+V.intercept)}).style("stroke",function(W,V,U){return C(W,U)}).style("stroke-opacity",function(V,U){return(V.disabled||typeof V.slope==="undefined"||typeof V.intercept==="undefined")?0:1});if(G){o.scale(q)._ticks(a.utils.calcTicksX(T/100,O)).tickSize(-K,0);P.select(".nv-x.nv-axis").attr("transform","translate(0,"+p.range()[0]+")").call(o)}if(s){e.scale(p)._ticks(a.utils.calcTicksY(K/36,O)).tickSize(-T,0);P.select(".nv-y.nv-axis").call(e)}if(d){w.getData(r.x()).scale(q).width(T).color(O.map(function(V,U){return V.color||C(V,U)}).filter(function(V,U){return !O[U].disabled}));y.select(".nv-distWrap").append("g").attr("class","nv-distributionX");P.select(".nv-distributionX").attr("transform","translate(0,"+p.range()[0]+")").datum(O.filter(function(U){return !U.disabled})).call(w)}if(I){u.getData(r.y()).scale(p).width(K).color(O.map(function(V,U){return V.color||C(V,U)}).filter(function(V,U){return !O[U].disabled}));y.select(".nv-distWrap").append("g").attr("class","nv-distributionY");P.select(".nv-distributionY").attr("transform","translate("+(n?T:-u.size())+",0)").datum(O.filter(function(U){return !U.disabled})).call(u)}f.dispatch.on("stateChange",function(V){for(var U in V){i[U]=V[U]}H.stateChange(i);v.update()});H.on("changeState",function(U){if(typeof U.disabled!=="undefined"){O.forEach(function(W,V){W.disabled=U.disabled[V]});i.disabled=U.disabled}v.update()});r.dispatch.on("elementMouseout.tooltip",function(U){j.hidden(true);t.select(".nv-chart-"+r.id()+" .nv-series-"+U.seriesIndex+" .nv-distx-"+U.pointIndex).attr("y1",0);t.select(".nv-chart-"+r.id()+" .nv-series-"+U.seriesIndex+" .nv-disty-"+U.pointIndex).attr("x2",u.size())});r.dispatch.on("elementMouseover.tooltip",function(U){t.select(".nv-series-"+U.seriesIndex+" .nv-distx-"+U.pointIndex).attr("y1",U.pos.top-K-z.top);t.select(".nv-series-"+U.seriesIndex+" .nv-disty-"+U.pointIndex).attr("x2",U.pos.left+w.size()-z.left);j.position(U.pos).data(U).hidden(false)});E=q.copy();g=p.copy()});k.renderEnd("scatter with line immediate");return v}v.dispatch=H;v.scatter=r;v.legend=f;v.xAxis=o;v.yAxis=e;v.distX=w;v.distY=u;v.tooltip=j;v.options=a.utils.optionsFunc.bind(v);v._options=Object.create({},{width:{get:function(){return B},set:function(x){B=x}},height:{get:function(){return A},set:function(x){A=x}},container:{get:function(){return t},set:function(x){t=x}},showDistX:{get:function(){return d},set:function(x){d=x}},showDistY:{get:function(){return I},set:function(x){I=x}},showLegend:{get:function(){return F},set:function(x){F=x}},showXAxis:{get:function(){return G},set:function(x){G=x}},showYAxis:{get:function(){return s},set:function(x){s=x}},defaultState:{get:function(){return l},set:function(x){l=x}},noData:{get:function(){return h},set:function(x){h=x}},duration:{get:function(){return c},set:function(x){c=x}},tooltips:{get:function(){return j.enabled()},set:function(x){a.deprecated("tooltips","use chart.tooltip.enabled() instead");j.enabled(!!x)}},tooltipContent:{get:function(){return j.contentGenerator()},set:function(x){a.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");j.contentGenerator(x)}},tooltipXContent:{get:function(){return j.contentGenerator()},set:function(x){a.deprecated("tooltipContent","This option is removed, put values into main tooltip.")}},tooltipYContent:{get:function(){return j.contentGenerator()},set:function(x){a.deprecated("tooltipContent","This option is removed, put values into main tooltip.")}},margin:{get:function(){return z},set:function(x){z.top=x.top!==undefined?x.top:z.top;z.right=x.right!==undefined?x.right:z.right;z.bottom=x.bottom!==undefined?x.bottom:z.bottom;z.left=x.left!==undefined?x.left:z.left}},rightAlignYAxis:{get:function(){return n},set:function(x){n=x;e.orient((x)?"right":"left")}},color:{get:function(){return C},set:function(x){C=a.utils.getColor(x);f.color(C);w.color(C);u.color(C)}}});a.utils.inheritOptions(v,r);a.utils.initOptions(v);return v};a.models.sparkline=function(){var j={top:2,right:0,bottom:2,left:0},f=400,q=32,e=null,g=true,n=d3.scale.linear(),m=d3.scale.linear(),p=function(r){return r.x},o=function(r){return r.y},i=a.utils.getColor(["#000"]),k,d,c,h;function l(r){r.each(function(w){var z=f-j.left-j.right,u=q-j.top-j.bottom;e=d3.select(this);a.utils.initSVG(e);n.domain(k||d3.extent(w,p)).range(c||[0,z]);m.domain(d||d3.extent(w,o)).range(h||[u,0]);var t=e.selectAll("g.nv-wrap.nv-sparkline").data([w]);var v=t.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline");var s=v.append("g");var x=t.select("g");t.attr("transform","translate("+j.left+","+j.top+")");var A=t.selectAll("path").data(function(B){return[B]});A.enter().append("path");A.exit().remove();A.style("stroke",function(C,B){return C.color||i(C,B)}).attr("d",d3.svg.line().x(function(C,B){return n(p(C,B))}).y(function(C,B){return m(o(C,B))}));var y=t.selectAll("circle.nv-point").data(function(F){var D=F.map(function(I,H){return o(I,H)});function E(I){if(I!=-1){var H=F[I];H.pointIndex=I;return H}else{return null}}var C=E(D.lastIndexOf(m.domain()[1])),B=E(D.indexOf(m.domain()[0])),G=E(D.length-1);return[B,C,G].filter(function(H){return H!=null})});y.enter().append("circle");y.exit().remove();y.attr("cx",function(C,B){return n(p(C,C.pointIndex))}).attr("cy",function(C,B){return m(o(C,C.pointIndex))}).attr("r",2).attr("class",function(C,B){return p(C,C.pointIndex)==n.domain()[1]?"nv-point nv-currentValue":o(C,C.pointIndex)==m.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})});return l}l.options=a.utils.optionsFunc.bind(l);l._options=Object.create({},{width:{get:function(){return f},set:function(r){f=r}},height:{get:function(){return q},set:function(r){q=r}},xDomain:{get:function(){return k},set:function(r){k=r}},yDomain:{get:function(){return d},set:function(r){d=r}},xRange:{get:function(){return c},set:function(r){c=r}},yRange:{get:function(){return h},set:function(r){h=r}},xScale:{get:function(){return n},set:function(r){n=r}},yScale:{get:function(){return m},set:function(r){m=r}},animate:{get:function(){return g},set:function(r){g=r}},x:{get:function(){return p},set:function(r){p=d3.functor(r)}},y:{get:function(){return o},set:function(r){o=d3.functor(r)}},margin:{get:function(){return j},set:function(r){j.top=r.top!==undefined?r.top:j.top;j.right=r.right!==undefined?r.right:j.right;j.bottom=r.bottom!==undefined?r.bottom:j.bottom;j.left=r.left!==undefined?r.left:j.left}},color:{get:function(){return i},set:function(r){i=a.utils.getColor(r)}}});a.utils.initOptions(l);return l};a.models.sparklinePlus=function(){var n=a.models.sparkline();var d={top:15,right:100,bottom:10,left:50},c=null,p=null,j,i,g=[],o=false,m=d3.format(",r"),f=d3.format(",.2f"),k=true,q=true,e=false,l=null;function h(r){r.each(function(y){var t=d3.select(this);a.utils.initSVG(t);var F=a.utils.availableWidth(c,t,d),v=a.utils.availableHeight(p,t,d);h.update=function(){t.call(h)};h.container=this;if(!y||!y.length){a.utils.noData(h,t);return h}else{t.selectAll(".nv-noData").remove()}var E=n.y()(y[y.length-1],y.length-1);j=n.xScale();i=n.yScale();var u=t.selectAll("g.nv-wrap.nv-sparklineplus").data([y]);var w=u.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus");var s=w.append("g");var z=u.select("g");s.append("g").attr("class","nv-sparklineWrap");s.append("g").attr("class","nv-valueWrap");s.append("g").attr("class","nv-hoverArea");u.attr("transform","translate("+d.left+","+d.top+")");var A=z.select(".nv-sparklineWrap");n.width(F).height(v);A.call(n);if(k){var C=z.select(".nv-valueWrap");var D=C.selectAll(".nv-currentValue").data([E]);D.enter().append("text").attr("class","nv-currentValue").attr("dx",e?-8:8).attr("dy",".9em").style("text-anchor",e?"end":"start");D.attr("x",F+(e?d.right:0)).attr("y",q?function(G){return i(G)}:0).style("fill",n.color()(y[y.length-1],y.length-1)).text(f(E))}s.select(".nv-hoverArea").append("rect").on("mousemove",x).on("click",function(){o=!o}).on("mouseout",function(){g=[];B()});z.select(".nv-hoverArea rect").attr("transform",function(G){return"translate("+-d.left+","+-d.top+")"}).attr("width",F+d.left+d.right).attr("height",v+d.top);function B(){if(o){return}var H=z.selectAll(".nv-hoverValue").data(g);var G=H.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);H.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove();H.attr("transform",function(I){return"translate("+j(n.x()(y[I],I))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);if(!g.length){return}G.append("line").attr("x1",0).attr("y1",-d.top).attr("x2",0).attr("y2",v);G.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-d.top).attr("text-anchor","end").attr("dy",".9em");z.select(".nv-hoverValue .nv-xValue").text(m(n.x()(y[g[0]],g[0])));G.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-d.top).attr("text-anchor","start").attr("dy",".9em");z.select(".nv-hoverValue .nv-yValue").text(f(n.y()(y[g[0]],g[0])))}function x(){if(o){return}var H=d3.mouse(this)[0]-d.left;function G(L,I){var M=Math.abs(n.x()(L[0],0)-I);var K=0;for(var J=0;J<L.length;J++){if(Math.abs(n.x()(L[J],J)-I)<M){M=Math.abs(n.x()(L[J],J)-I);K=J}}return K}g=[G(y,Math.round(j.invert(H)))];B()}});return h}h.sparkline=n;h.options=a.utils.optionsFunc.bind(h);h._options=Object.create({},{width:{get:function(){return c},set:function(r){c=r}},height:{get:function(){return p},set:function(r){p=r}},xTickFormat:{get:function(){return m},set:function(r){m=r}},yTickFormat:{get:function(){return f},set:function(r){f=r}},showLastValue:{get:function(){return k},set:function(r){k=r}},alignValue:{get:function(){return q},set:function(r){q=r}},rightAlignValue:{get:function(){return e},set:function(r){e=r}},noData:{get:function(){return l},set:function(r){l=r}},margin:{get:function(){return d},set:function(r){d.top=r.top!==undefined?r.top:d.top;d.right=r.right!==undefined?r.right:d.right;d.bottom=r.bottom!==undefined?r.bottom:d.bottom;d.left=r.left!==undefined?r.left:d.left}}});a.utils.inheritOptions(h,n);a.utils.initOptions(h);return h};a.models.stackedArea=function(){var l={top:0,right:0,bottom:0,left:0},o=960,m=500,p=a.utils.defaultColor(),n=Math.floor(Math.random()*100000),j=null,t=function(w){return w.x},s=function(w){return w.y},r="stack",e="zero",q="default",f="linear",u=false,h,g,i=a.models.scatter(),c=250,v=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");i.pointSize(2.2).pointDomain([2.2,2.2]);var d=a.utils.renderWatch(v,c);function k(w){d.reset();d.models(i);w.each(function(F){var J=o-l.left-l.right,B=m-l.top-l.bottom;j=d3.select(this);a.utils.initSVG(j);h=i.xScale();g=i.yScale();var G=F;F.forEach(function(L,M){L.seriesIndex=M;L.values=L.values.map(function(O,N){O.index=N;O.seriesIndex=M;return O})});var D=F.filter(function(L){return !L.disabled});F=d3.layout.stack().order(q).offset(e).values(function(L){return L.values}).x(t).y(s).out(function(M,L,N){M.display={y:N,y0:L}})(D);var z=j.selectAll("g.nv-wrap.nv-stackedarea").data([F]);var E=z.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea");var C=E.append("defs");var x=E.append("g");var H=z.select("g");x.append("g").attr("class","nv-areaWrap");x.append("g").attr("class","nv-scatterWrap");z.attr("transform","translate("+l.left+","+l.top+")");if(i.forceY().length==0){i.forceY().push(0)}i.width(J).height(B).x(t).y(function(L){return L.display.y+L.display.y0}).forceY([0]).color(F.map(function(M,L){return M.color||p(M,M.seriesIndex)}));var A=H.select(".nv-scatterWrap").datum(F);A.call(i);C.append("clipPath").attr("id","nv-edge-clip-"+n).append("rect");z.select("#nv-edge-clip-"+n+" rect").attr("width",J).attr("height",B);H.attr("clip-path",u?"url(#nv-edge-clip-"+n+")":"");var y=d3.svg.area().x(function(M,L){return h(t(M,L))}).y0(function(L){return g(L.display.y0)}).y1(function(L){return g(L.display.y+L.display.y0)}).interpolate(f);var I=d3.svg.area().x(function(M,L){return h(t(M,L))}).y0(function(L){return g(L.display.y0)}).y1(function(L){return g(L.display.y0)});var K=H.select(".nv-areaWrap").selectAll("path.nv-area").data(function(L){return L});K.enter().append("path").attr("class",function(M,L){return"nv-area nv-area-"+L}).attr("d",function(M,L){return I(M.values,M.seriesIndex)}).on("mouseover",function(M,L){d3.select(this).classed("hover",true);v.areaMouseover({point:M,series:M.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:M.seriesIndex})}).on("mouseout",function(M,L){d3.select(this).classed("hover",false);v.areaMouseout({point:M,series:M.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:M.seriesIndex})}).on("click",function(M,L){d3.select(this).classed("hover",false);v.areaClick({point:M,series:M.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:M.seriesIndex})});K.exit().remove();K.style("fill",function(M,L){return M.color||p(M,M.seriesIndex)}).style("stroke",function(M,L){return M.color||p(M,M.seriesIndex)});K.watchTransition(d,"stackedArea path").attr("d",function(M,L){return y(M.values,L)});i.dispatch.on("elementMouseover.area",function(L){H.select(".nv-chart-"+n+" .nv-area-"+L.seriesIndex).classed("hover",true)});i.dispatch.on("elementMouseout.area",function(L){H.select(".nv-chart-"+n+" .nv-area-"+L.seriesIndex).classed("hover",false)});k.d3_stackedOffset_stackPercent=function(P){var R=P.length,L=P[0].length,N,M,Q,O=[];for(M=0;M<L;++M){for(N=0,Q=0;N<G.length;N++){Q+=s(G[N].values[M])}if(Q){for(N=0;N<R;N++){P[N][M][1]/=Q}}else{for(N=0;N<R;N++){P[N][M][1]=0}}}for(M=0;M<L;++M){O[M]=0}return O}});d.renderEnd("stackedArea immediate");return k}k.dispatch=v;k.scatter=i;i.dispatch.on("elementClick",function(){v.elementClick.apply(this,arguments)});i.dispatch.on("elementMouseover",function(){v.elementMouseover.apply(this,arguments)});i.dispatch.on("elementMouseout",function(){v.elementMouseout.apply(this,arguments)});k.interpolate=function(w){if(!arguments.length){return f}f=w;return k};k.duration=function(w){if(!arguments.length){return c}c=w;d.reset(c);i.duration(c);return k};k.dispatch=v;k.scatter=i;k.options=a.utils.optionsFunc.bind(k);k._options=Object.create({},{width:{get:function(){return o},set:function(w){o=w}},height:{get:function(){return m},set:function(w){m=w}},clipEdge:{get:function(){return u},set:function(w){u=w}},offset:{get:function(){return e},set:function(w){e=w}},order:{get:function(){return q},set:function(w){q=w}},interpolate:{get:function(){return f},set:function(w){f=w}},x:{get:function(){return t},set:function(w){t=d3.functor(w)}},y:{get:function(){return s},set:function(w){s=d3.functor(w)}},margin:{get:function(){return l},set:function(w){l.top=w.top!==undefined?w.top:l.top;l.right=w.right!==undefined?w.right:l.right;l.bottom=w.bottom!==undefined?w.bottom:l.bottom;l.left=w.left!==undefined?w.left:l.left}},color:{get:function(){return p},set:function(w){p=a.utils.getColor(w)}},style:{get:function(){return r},set:function(w){r=w;switch(r){case"stack":k.offset("zero");k.order("default");break;case"stream":k.offset("wiggle");k.order("inside-out");break;case"stream-center":k.offset("silhouette");k.order("inside-out");break;case"expand":k.offset("expand");k.order("default");break;case"stack_percent":k.offset(k.d3_stackedOffset_stackPercent);k.order("default");break}}},duration:{get:function(){return c},set:function(w){c=w;d.reset(c);i.duration(c)}}});a.utils.inheritOptions(k,i);a.utils.initOptions(k);return k};a.models.stackedAreaChart=function(){var J=a.models.stackedArea(),o=a.models.axis(),e=a.models.axis(),f=a.models.legend(),t=a.models.legend(),z=a.interactiveGuideline(),j=a.models.tooltip();var v={top:30,right:25,bottom:50,left:60},B=null,w=null,C=a.utils.defaultColor(),K=true,H=true,I=true,s=true,n=false,r=false,q,p,i=a.utils.state(),l=null,g=null,M=d3.dispatch("stateChange","changeState","renderEnd"),d=250,A=["Stacked","Stream","Expanded"],D={},c=250;i.style=J.style();o.orient("bottom").tickPadding(7);e.orient((n)?"right":"left");j.headerFormatter(function(y,x){return o.tickFormat()(y,x)}).valueFormatter(function(y,x){return e.tickFormat()(y,x)});z.tooltip.headerFormatter(function(y,x){return o.tickFormat()(y,x)}).valueFormatter(function(y,x){return e.tickFormat()(y,x)});var L=null,G=null;t.updateState(false);var k=a.utils.renderWatch(M);var E=J.style();var m=function(x){return function(){return{active:x.map(function(y){return !y.disabled}),style:J.style()}}};var F=function(x){return function(y){if(y.style!==undefined){E=y.style}if(y.active!==undefined){x.forEach(function(O,N){O.disabled=!y.active[N]})}}};var h=d3.format("%");function u(x){k.reset();k.models(J);if(I){k.models(o)}if(s){k.models(e)}x.each(function(R){var N=d3.select(this),U=this;a.utils.initSVG(N);var Z=a.utils.availableWidth(B,N,v),Q=a.utils.availableHeight(w,N,v);u.update=function(){N.transition().duration(c).call(u)};u.container=this;i.setter(F(R),u.update).getter(m(R)).update();i.disabled=R.map(function(aa){return !!aa.disabled});if(!l){var X;l={};for(X in i){if(i[X] instanceof Array){l[X]=i[X].slice(0)}else{l[X]=i[X]}}}if(!R||!R.length||!R.filter(function(aa){return aa.values.length}).length){a.utils.noData(u,N);return u}else{N.selectAll(".nv-noData").remove()}q=J.xScale();p=J.yScale();var P=N.selectAll("g.nv-wrap.nv-stackedAreaChart").data([R]);var y=P.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g");var S=P.select("g");y.append("rect").style("opacity",0);y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class","nv-y nv-axis");y.append("g").attr("class","nv-stackedWrap");y.append("g").attr("class","nv-legendWrap");y.append("g").attr("class","nv-controlsWrap");y.append("g").attr("class","nv-interactive");S.select("rect").attr("width",Z).attr("height",Q);if(H){var Y=(K)?Z-d:Z;f.width(Y);S.select(".nv-legendWrap").datum(R).call(f);if(v.top!=f.height()){v.top=f.height();Q=a.utils.availableHeight(w,N,v)}S.select(".nv-legendWrap").attr("transform","translate("+(Z-Y)+","+(-v.top)+")")}if(K){var V=[{key:D.stacked||"Stacked",metaKey:"Stacked",disabled:J.style()!="stack",style:"stack"},{key:D.stream||"Stream",metaKey:"Stream",disabled:J.style()!="stream",style:"stream"},{key:D.expanded||"Expanded",metaKey:"Expanded",disabled:J.style()!="expand",style:"expand"},{key:D.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:J.style()!="stack_percent",style:"stack_percent"}];d=(A.length/3)*260;V=V.filter(function(aa){return A.indexOf(aa.metaKey)!==-1});t.width(d).color(["#444","#444","#444"]);S.select(".nv-controlsWrap").datum(V).call(t);if(v.top!=Math.max(t.height(),f.height())){v.top=Math.max(t.height(),f.height());Q=a.utils.availableHeight(w,N,v)}S.select(".nv-controlsWrap").attr("transform","translate(0,"+(-v.top)+")")}P.attr("transform","translate("+v.left+","+v.top+")");if(n){S.select(".nv-y.nv-axis").attr("transform","translate("+Z+",0)")}if(r){z.width(Z).height(Q).margin({left:v.left,top:v.top}).svgContainer(N).xScale(q);P.select(".nv-interactive").call(z)}J.width(Z).height(Q);var T=S.select(".nv-stackedWrap").datum(R);T.transition().call(J);if(I){o.scale(q)._ticks(a.utils.calcTicksX(Z/100,R)).tickSize(-Q,0);S.select(".nv-x.nv-axis").attr("transform","translate(0,"+Q+")");S.select(".nv-x.nv-axis").transition().duration(0).call(o)}if(s){var W;if(J.offset()==="wiggle"){W=0}else{W=a.utils.calcTicksY(Q/36,R)}e.scale(p)._ticks(W).tickSize(-Z,0);if(J.style()==="expand"||J.style()==="stack_percent"){var O=e.tickFormat();if(!L||O!==h){L=O}e.tickFormat(h)}else{if(L){e.tickFormat(L);L=null}}S.select(".nv-y.nv-axis").transition().duration(0).call(e)}J.dispatch.on("areaClick.toggle",function(aa){if(R.filter(function(ab){return !ab.disabled}).length===1){R.forEach(function(ab){ab.disabled=false})}else{R.forEach(function(ac,ab){ac.disabled=(ab!=aa.seriesIndex)})}i.disabled=R.map(function(ab){return !!ab.disabled});M.stateChange(i);u.update()});f.dispatch.on("stateChange",function(ab){for(var aa in ab){i[aa]=ab[aa]}M.stateChange(i);u.update()});t.dispatch.on("legendClick",function(ab,aa){if(!ab.disabled){return}V=V.map(function(ac){ac.disabled=true;return ac});ab.disabled=false;J.style(ab.style);i.style=J.style();M.stateChange(i);u.update()});z.dispatch.on("elementMousemove",function(ae){J.clearHighlights();var ad,ai,ab,aa=[];R.filter(function(al,ak){al.seriesIndex=ak;return !al.disabled}).forEach(function(am,al){ai=a.interactiveBisect(am.values,ae.pointXValue,u.x());var ak=am.values[ai];var ao=u.y()(ak,ai);if(ao!=null){J.highlightPoint(al,ai,true)}if(typeof ak==="undefined"){return}if(typeof ad==="undefined"){ad=ak}if(typeof ab==="undefined"){ab=u.xScale()(u.x()(ak,ai))}var an=(J.style()=="expand")?ak.display.y:u.y()(ak,ai);aa.push({key:am.key,value:an,color:C(am,am.seriesIndex),stackedValue:ak.display})});aa.reverse();if(aa.length>2){var ah=u.yScale().invert(ae.mouseY);var aj=Infinity,af=null;aa.forEach(function(an,am){ah=Math.abs(ah);var ak=Math.abs(an.stackedValue.y0);var al=Math.abs(an.stackedValue.y);if(ah>=ak&&ah<=(al+ak)){af=am;return}});if(af!=null){aa[af].highlight=true}}var ac=o.tickFormat()(u.x()(ad,ai));var ag=z.tooltip.valueFormatter();if(J.style()==="expand"||J.style()==="stack_percent"){if(!G){G=ag}ag=d3.format(".1%")}else{if(G){ag=G;G=null}}z.tooltip.position({left:ab+v.left,top:ae.mouseY+v.top}).chartContainer(U.parentNode).valueFormatter(ag).data({value:ac,series:aa})();z.renderGuideLine(ab)});z.dispatch.on("elementMouseout",function(aa){J.clearHighlights()});M.on("changeState",function(aa){if(typeof aa.disabled!=="undefined"&&R.length===aa.disabled.length){R.forEach(function(ac,ab){ac.disabled=aa.disabled[ab]});i.disabled=aa.disabled}if(typeof aa.style!=="undefined"){J.style(aa.style);E=aa.style}u.update()})});k.renderEnd("stacked Area chart immediate");return u}J.dispatch.on("elementMouseover.tooltip",function(x){x.point.x=J.x()(x.point);x.point.y=J.y()(x.point);j.data(x).position(x.pos).hidden(false)});J.dispatch.on("elementMouseout.tooltip",function(x){j.hidden(true)});u.dispatch=M;u.stacked=J;u.legend=f;u.controls=t;u.xAxis=o;u.yAxis=e;u.interactiveLayer=z;u.tooltip=j;u.dispatch=M;u.options=a.utils.optionsFunc.bind(u);u._options=Object.create({},{width:{get:function(){return B},set:function(x){B=x}},height:{get:function(){return w},set:function(x){w=x}},showLegend:{get:function(){return H},set:function(x){H=x}},showXAxis:{get:function(){return I},set:function(x){I=x}},showYAxis:{get:function(){return s},set:function(x){s=x}},defaultState:{get:function(){return l},set:function(x){l=x}},noData:{get:function(){return g},set:function(x){g=x}},showControls:{get:function(){return K},set:function(x){K=x}},controlLabels:{get:function(){return D},set:function(x){D=x}},controlOptions:{get:function(){return A},set:function(x){A=x}},tooltips:{get:function(){return j.enabled()},set:function(x){a.deprecated("tooltips","use chart.tooltip.enabled() instead");j.enabled(!!x)}},tooltipContent:{get:function(){return j.contentGenerator()},set:function(x){a.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");j.contentGenerator(x)}},margin:{get:function(){return v},set:function(x){v.top=x.top!==undefined?x.top:v.top;v.right=x.right!==undefined?x.right:v.right;v.bottom=x.bottom!==undefined?x.bottom:v.bottom;v.left=x.left!==undefined?x.left:v.left}},duration:{get:function(){return c},set:function(x){c=x;k.reset(c);J.duration(c);o.duration(c);e.duration(c)}},color:{get:function(){return C},set:function(x){C=a.utils.getColor(x);f.color(C);J.color(C)}},rightAlignYAxis:{get:function(){return n},set:function(x){n=x;e.orient(n?"right":"left")}},useInteractiveGuideline:{get:function(){return r},set:function(x){r=!!x;u.interactive(!x);u.useVoronoi(!x);J.scatter.interactive(!x)}}});a.utils.inheritOptions(u,J);a.utils.initOptions(u);return u};a.models.sunburst=function(){var m={top:0,right:0,bottom:0,left:0},q=null,n=null,k="count",d={count:function(v){return 1},size:function(v){return v.size}},o=Math.floor(Math.random()*10000),j=null,s=a.utils.defaultColor(),c=500,u=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd");var i=d3.scale.linear().range([0,2*Math.PI]);var h=d3.scale.sqrt();var f=d3.layout.partition().sort(null).value(function(v){return 1});var g=d3.svg.arc().startAngle(function(v){return Math.max(0,Math.min(2*Math.PI,i(v.x)))}).endAngle(function(v){return Math.max(0,Math.min(2*Math.PI,i(v.x+v.dx)))}).innerRadius(function(v){return Math.max(0,h(v.y))}).outerRadius(function(v){return Math.max(0,h(v.y+v.dy))});var r,p;var t;var e=a.utils.renderWatch(u);function l(v){e.reset();v.each(function(B){j=d3.select(this);var F=a.utils.availableWidth(q,j,m);var x=a.utils.availableHeight(n,j,m);var D=Math.min(F,x)/2;var G;a.utils.initSVG(j);var w=j.selectAll(".nv-wrap.nv-sunburst").data(B);var A=w.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+o);var C=A.selectAll("nv-sunburst");w.attr("transform","translate("+F/2+","+x/2+")");j.on("click",function(I,H){u.chartClick({data:I,index:H,pos:d3.event,id:o})});h.range([0,D]);r=r||B;t=B[0];f.value(d[k]||d.count);G=C.data(f.nodes).enter().append("path").attr("d",g).style("fill",function(H){return s((H.children?H:H.parent).name)}).style("stroke","#FFF").on("click",function(H){if(p!==r&&r!==H){p=r}r=H;G.transition().duration(c).attrTween("d",y(H))}).each(z).on("dblclick",function(H){if(p.parent==H){G.transition().duration(c).attrTween("d",y(t))}}).each(z).on("mouseover",function(I,H){d3.select(this).classed("hover",true).style("opacity",0.8);u.elementMouseover({data:I,color:d3.select(this).style("fill")})}).on("mouseout",function(I,H){d3.select(this).classed("hover",false).style("opacity",1);u.elementMouseout({data:I})}).on("mousemove",function(I,H){u.elementMousemove({data:I})});function z(H){H.x0=H.x;H.dx0=H.dx}function E(H,J){var K=d3.interpolate({x:H.x0,dx:H.dx0},H);function I(N){var M=K(N);H.x0=M.x;H.dx0=M.dx;return g(M)}if(J==0){var L=d3.interpolate(i.domain(),[r.x,r.x+r.dx]);return function(M){i.domain(L(M));return I(M)}}else{return I}}function y(K){var I=d3.interpolate(i.domain(),[K.x,K.x+K.dx]),J=d3.interpolate(h.domain(),[K.y,1]),H=d3.interpolate(h.range(),[K.y?20:0,D]);return function(M,L){return L?function(N){return g(M)}:function(N){i.domain(I(N));h.domain(J(N)).range(H(N));return g(M)}}}});e.renderEnd("sunburst immediate");return l}l.dispatch=u;l.options=a.utils.optionsFunc.bind(l);l._options=Object.create({},{width:{get:function(){return q},set:function(v){q=v}},height:{get:function(){return n},set:function(v){n=v}},mode:{get:function(){return k},set:function(v){k=v}},id:{get:function(){return o},set:function(v){o=v}},duration:{get:function(){return c},set:function(v){c=v}},margin:{get:function(){return m},set:function(v){m.top=v.top!=undefined?v.top:m.top;m.right=v.right!=undefined?v.right:m.right;m.bottom=v.bottom!=undefined?v.bottom:m.bottom;m.left=v.left!=undefined?v.left:m.left}},color:{get:function(){return s},set:function(v){s=a.utils.getColor(v)}}});a.utils.initOptions(l);return l};a.models.sunburstChart=function(){var f=a.models.sunburst();var o=a.models.tooltip();var g={top:30,right:20,bottom:20,left:20},d=null,m=null,h=a.utils.defaultColor(),c=Math.round(Math.random()*100000),n=null,l=null,e=250,j=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd");var i=a.utils.renderWatch(j);o.headerEnabled(false).duration(0).valueFormatter(function(q,p){return q});function k(p){i.reset();i.models(f);p.each(function(v){var r=d3.select(this);a.utils.initSVG(r);var x=this;var y=a.utils.availableWidth(d,r,g),t=a.utils.availableHeight(m,r,g);k.update=function(){if(e===0){r.call(k)}else{r.transition().duration(e).call(k)}};k.container=this;if(!v||!v.length){a.utils.noData(k,r);return k}else{r.selectAll(".nv-noData").remove()}var s=r.selectAll("g.nv-wrap.nv-sunburstChart").data(v);var q=s.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburstChart").append("g");var w=s.select("g");q.append("g").attr("class","nv-sunburstWrap");s.attr("transform","translate("+g.left+","+g.top+")");f.width(y).height(t);var u=w.select(".nv-sunburstWrap").datum(v);d3.transition(u).call(f)});i.renderEnd("sunburstChart immediate");return k}f.dispatch.on("elementMouseover.tooltip",function(p){p.series={key:p.data.name,value:p.data.size,color:p.color};o.data(p).hidden(false)});f.dispatch.on("elementMouseout.tooltip",function(p){o.hidden(true)});f.dispatch.on("elementMousemove.tooltip",function(p){o.position({top:d3.event.pageY,left:d3.event.pageX})()});k.dispatch=j;k.sunburst=f;k.tooltip=o;k.options=a.utils.optionsFunc.bind(k);k._options=Object.create({},{noData:{get:function(){return l},set:function(p){l=p}},defaultState:{get:function(){return n},set:function(p){n=p}},color:{get:function(){return h},set:function(p){h=p;f.color(h)}},duration:{get:function(){return e},set:function(p){e=p;i.reset(e);f.duration(e)}},margin:{get:function(){return g},set:function(p){g.top=p.top!==undefined?p.top:g.top;g.right=p.right!==undefined?p.right:g.right;g.bottom=p.bottom!==undefined?p.bottom:g.bottom;g.left=p.left!==undefined?p.left:g.left}}});a.utils.inheritOptions(k,f);a.utils.initOptions(k);return k};a.version="1.8.1"})();